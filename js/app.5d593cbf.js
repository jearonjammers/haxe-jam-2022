(function(t){function e(e){for(var i,s,o=e[0],_=e[1],l=e[2],h=0,c=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&c.push(a[s][0]),a[s]=0;for(i in _)Object.prototype.hasOwnProperty.call(_,i)&&(t[i]=_[i]);u&&u(e);while(c.length)c.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,o=1;o<n.length;o++){var _=n[o];0!==a[_]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},r=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/haxe-jam-2022/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],_=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=_;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2af0":function(t,e,n){},5085:function(t,e,n){"use strict";(function(e){var n=t.exports,i=e;i.$hx_scope=i.$hx_scope||{};n["flambe"]=n["flambe"]||{},n["game"]=n["game"]||{},n["game"]["Container"]=n["game"]["Container"]||{},n["game"]["Main"]=n["game"]["Main"]||{};var a,r=function(){return Bn.__string_rec(this,"")},s=s||{};function o(t,e){var n=Object.create(t);for(var i in e)n[i]=e[i];return e.toString!==Object.prototype.toString&&(n.toString=e.toString),n}var _=function(t,e){this.r=new RegExp(t,e.split("u").join(""))};_.__name__="EReg",_.prototype={match:function(t){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(t),this.r.s=t,null!=this.r.m},__class__:_};var l=function(){};l.__name__="HxOverrides",l.cca=function(t,e){var n=t.charCodeAt(e);if(n==n)return n},l.substr=function(t,e,n){if(null==n)n=t.length;else if(n<0){if(0!=e)return"";n=t.length+n}return t.substr(e,n)},l.remove=function(t,e){var n=t.indexOf(e);return-1!=n&&(t.splice(n,1),!0)},l.now=function(){return Date.now()};var u=function(){};u.__name__="Lambda",u.array=function(t){var e=[],n=Vn(t);while(n.hasNext()){var i=n.next();e.push(i)}return e},u.count=function(t,e){var n=0;if(null==e){var i=Vn(t);while(i.hasNext())i.next(),++n}else{var a=Vn(t);while(a.hasNext()){var r=a.next();e(r)&&++n}}return n},Math.__name__="Math";var h=function(){};h.__name__="Reflect",h.field=function(t,e){try{return t[e]}catch(n){return null}};var c=function(){};c.__name__="Std",c.string=function(t){return Bn.__string_rec(t,"")},c.parseInt=function(t){if(null!=t){var e=0,n=t.length;while(e<n){var i=e++,a=t.charCodeAt(i);if(a<=8||a>=14&&32!=a&&45!=a){var r=t.charCodeAt(i+1),s=parseInt(t,120==r||88==r?16:10);return isNaN(s)?null:s}}}return null};var d=function(){this.b=""};d.__name__="StringBuf",d.prototype={__class__:d};var p=function(){};p.__name__="StringTools",p.htmlEscape=function(t,e){var n="",i=0,a=t;while(i<a.length){t=a;var r=i++,s=t.charCodeAt(r);s>=55296&&s<=56319&&(s=s-55232<<10|1023&t.charCodeAt(r+1));var o=s;o>=65536&&++i;var _=o;switch(_){case 34:n+=e?"&quot;":String.fromCodePoint(_);break;case 38:n+="&amp;";break;case 39:n+=e?"&#039;":String.fromCodePoint(_);break;case 60:n+="&lt;";break;case 62:n+="&gt;";break;default:n+=String.fromCodePoint(_)}}return n},p.startsWith=function(t,e){return t.length>=e.length&&0==t.lastIndexOf(e,0)},p.isSpace=function(t,e){var n=l.cca(t,e);return n>8&&n<14||32==n},p.ltrim=function(t){var e=t.length,n=0;while(n<e&&p.isSpace(t,n))++n;return n>0?l.substr(t,n,e-n):t},p.rtrim=function(t){var e=t.length,n=0;while(n<e&&p.isSpace(t,e-n-1))++n;return n>0?l.substr(t,0,e-n):t},p.trim=function(t){return p.ltrim(p.rtrim(t))},p.replace=function(t,e,n){return t.split(e).join(n)};var m={toString:function(t){switch(t){case 0:return"Element";case 1:return"PCData";case 2:return"CData";case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"}}},f=function(t){this.nodeType=t,this.children=[],this.attributeMap=new En};f.__name__="Xml",f.parse=function(t){return Fn.parse(t)},f.createElement=function(t){var e=new f(f.Element);if(e.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":m.toString(e.nodeType)));return e.nodeName=t,e},f.createPCData=function(t){var e=new f(f.PCData);if(e.nodeType==f.Document||e.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":m.toString(e.nodeType)));return e.nodeValue=t,e},f.createCData=function(t){var e=new f(f.CData);if(e.nodeType==f.Document||e.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":m.toString(e.nodeType)));return e.nodeValue=t,e},f.createComment=function(t){var e=new f(f.Comment);if(e.nodeType==f.Document||e.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":m.toString(e.nodeType)));return e.nodeValue=t,e},f.createDocType=function(t){var e=new f(f.DocType);if(e.nodeType==f.Document||e.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":m.toString(e.nodeType)));return e.nodeValue=t,e},f.createProcessingInstruction=function(t){var e=new f(f.ProcessingInstruction);if(e.nodeType==f.Document||e.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":m.toString(e.nodeType)));return e.nodeValue=t,e},f.createDocument=function(){return new f(f.Document)},f.prototype={get:function(t){if(this.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));return this.attributeMap.h[t]},set:function(t,e){if(this.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));this.attributeMap.h[t]=e},exists:function(t){if(this.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));return Object.prototype.hasOwnProperty.call(this.attributeMap.h,t)},attributes:function(){if(this.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));return new kn(this.attributeMap.h)},elements:function(){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));var t=[],e=0,n=this.children;while(e<n.length){var i=n[e];++e,i.nodeType==f.Element&&t.push(i)}return new Dn(t)},firstElement:function(){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));var t=0,e=this.children;while(t<e.length){var n=e[t];if(++t,n.nodeType==f.Element)return n}return null},addChild:function(t){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));null!=t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this},removeChild:function(t){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));return!!l.remove(this.children,t)&&(t.parent=null,!0)},toString:function(){return In.print(this)},__class__:f};var g=function(){};g.__name__="flambe.util.Disposable",g.__isInterface__=!0,g.prototype={__class__:g};var v=function(){this._flags=0,this.next=null,this.owner=null};v.__name__="flambe.Component",v.__interfaces__=[g],v.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(t){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:v};var b=function(){v.call(this),this._disposables=[]};b.__name__="flambe.Disposer",b.__super__=v,b.prototype=o(v.prototype,{get_name:function(){return"Disposer_14"},add:function(t){return this._disposables.push(t),this},onRemoved:function(){this.freeDisposables()},dispose:function(){v.prototype.dispose.call(this),this.freeDisposables()},freeDisposables:function(){var t=this._disposables;this._disposables=[];var e=0;while(e<t.length){var n=t[e];++e,n.dispose()}},__class__:b});var w=function(){this.firstComponent=null,this.next=null,this.firstChild=null,this.parent=null,this._compMap={}};w.__name__="flambe.Entity",w.__interfaces__=[g],w.prototype={add:function(t){null!=t.owner&&t.owner.remove(t);var e=t.get_name(),n=this._compMap[e];null!=n&&this.remove(n),this._compMap[e]=t;var i=null,a=this.firstComponent;while(null!=a)i=a,a=a.next;return null!=i?i.next=t:this.firstComponent=t,t.owner=this,t.next=null,t.onAdded(),this},remove:function(t){var e=null,n=this.firstComponent;while(null!=n){var i=n.next;if(n==t)return null==e?this.firstComponent=i:(e.owner=this,e.next=i),delete this._compMap[n.get_name()],0!=(1&n._flags)&&(n.onStop(),n._flags&=-2),n.onRemoved(),n.owner=null,n.next=null,!0;e=n,n=i}return!1},addChild:function(t,e){if(null==e&&(e=!0),null!=t.parent&&t.parent.removeChild(t),t.parent=this,e){var n=null,i=this.firstChild;while(null!=i)n=i,i=i.next;null!=n?n.next=t:this.firstChild=t}else t.next=this.firstChild,this.firstChild=t;return this},removeChild:function(t){var e=null,n=this.firstChild;while(null!=n){var i=n.next;if(n==t)return null==e?this.firstChild=i:e.next=i,n.parent=null,void(n.next=null);e=n,n=i}},disposeChildren:function(){while(null!=this.firstChild)this.firstChild.dispose()},dispose:function(){null!=this.parent&&this.parent.removeChild(this);while(null!=this.firstComponent)this.firstComponent.dispose();this.disposeChildren()},toString:function(){return this.toStringImpl("")},toStringImpl:function(t){var e="",n=this.firstComponent;while(null!=n)e+=n.get_name(),null!=n.next&&(e+=", "),n=n.next;e+="\n";var i=String.fromCodePoint(9492),a=String.fromCodePoint(9500),r=String.fromCodePoint(9472),s=String.fromCodePoint(9474);n=this.firstChild;while(null!=n){var o=null==n.next;e+=t+(o?i:a)+r+r+" ",e+=n.toStringImpl(t+(o?" ":s)+"   "),n=n.next}return e},__class__:w};var x=function(){};x.__name__="flambe.util.PackageLog";var y=function(){};y.__name__="flambe.platform.Platform",y.__isInterface__=!0,y.prototype={__class__:y};var S=function(){};S.__name__="flambe.platform.html.HtmlPlatform",S.__interfaces__=[y],S.prototype={init:function(){var t=this;me.fixAndroidMath();var e=null;try{e=window.flambe.canvas}catch(b){}Ge.that(null!=e,"Could not find a Flambe canvas! Are you embedding with flambe.js?"),e.setAttribute("tabindex","0"),e.style.outlineStyle="none",e.style.webkitTapHighlightColor="transparent",this._stage=new de(e),this._pointer=new Tt,this._mouse=new ue(this._pointer,e),this._renderer=this.createRenderer(e),this.mainLoop=new Wt,this.musicPlaying=!1,this._canvas=e,this._container=e.parentElement,this._container.style.overflow="hidden",this._container.style.position="relative",this._container.style.msTouchAction="none";var n=0,a=function(i){if(!(i.timeStamp-n<1e3)){var a=e.getBoundingClientRect(),r=t.getX(i,a),s=t.getY(i,a);switch(i.type){case"mousedown":i.target==e&&(i.preventDefault(),t._mouse.submitDown(r,s,i.button),e.focus());break;case"mousemove":t._mouse.submitMove(r,s);break;case"mouseup":t._mouse.submitUp(r,s,i.button);break;case"DOMMouseScroll":case"mousewheel":var o="mousewheel"==i.type?i.wheelDelta/40:-i.detail;t._mouse.submitScroll(r,s,o)&&i.preventDefault();break}}};window.addEventListener("mousedown",a,!1),window.addEventListener("mousemove",a,!1),window.addEventListener("mouseup",a,!1),e.addEventListener("mousewheel",a,!1),e.addEventListener("DOMMouseScroll",a,!1),e.addEventListener("contextmenu",(function(t){t.preventDefault()}),!1);var r="undefined"!=typeof window.ontouchstart,s="msMaxTouchPoints"in window.navigator&&window.navigator.msMaxTouchPoints>1;if(r||s){var o=new Mt(this._pointer,r?4:i.navigator.msMaxTouchPoints);this._touch=o;var _=function(e){var i=r?e.changedTouches:[e],a=e.target.getBoundingClientRect();switch(n=e.timeStamp,e.type){case"MSPointerMove":case"pointermove":case"touchmove":e.preventDefault();var s=0;while(s<i.length){var _=i[s];++s;var l=t.getX(_,a),u=t.getY(_,a),h=0|(r?_.identifier:_.pointerId);o.submitMove(h,l,u)}break;case"MSPointerUp":case"pointerup":case"touchcancel":case"touchend":s=0;while(s<i.length){_=i[s];++s;l=t.getX(_,a),u=t.getY(_,a),h=0|(r?_.identifier:_.pointerId);o.submitUp(h,l,u)}break;case"MSPointerDown":case"pointerdown":case"touchstart":e.preventDefault(),me.SHOULD_HIDE_MOBILE_BROWSER&&me.hideMobileBrowser();s=0;while(s<i.length){_=i[s];++s;l=t.getX(_,a),u=t.getY(_,a),h=0|(r?_.identifier:_.pointerId);o.submitDown(h,l,u)}break}};r?(e.addEventListener("touchstart",_,!1),e.addEventListener("touchmove",_,!1),e.addEventListener("touchend",_,!1),e.addEventListener("touchcancel",_,!1)):(e.addEventListener("MSPointerDown",_,!1),e.addEventListener("MSPointerMove",_,!1),e.addEventListener("MSPointerUp",_,!1))}else this._touch=new Ot;var l=window.onerror;window.onerror=function(t,e,n){return P.uncaughtError.emit(t),null!=l&&l(t,e,n)};var u=me.loadExtension("hidden",window.document);if(null!=u.value){var c=function(t){P.hidden.set__(h.field(window.document,u.field))};c(null),window.document.addEventListener(u.prefix+"visibilitychange",c,!1)}else{var d=function(t){P.hidden.set__("pagehide"==t.type)};window.addEventListener("pageshow",d,!1),window.addEventListener("pagehide",d,!1)}P.hidden.get_changed().connect((function(e,n){e||(t._skipFrame=!0)})),this._skipFrame=!1,this._lastUpdate=Date.now();var p=me.loadExtension("requestAnimationFrame").value;if(null!=p){var m=window.performance,f=null!=m&&me.polyfill("now",m);f?this._lastUpdate=m.now():R.logger.warn("No monotonic timer support, falling back to the system date",null);var g=null;g=function(n){t.update(f?m.now():n),p(g,e)},p(g,e)}else R.logger.warn("No requestAnimationFrame support, falling back to setInterval",null),window.setInterval((function(){t.update(Date.now())}),16);new Dt(this),this._catapult=ie.canUse()?new ie:null;var v=["renderer",this._renderer.get_type()];R.logger.info("Initialized HTML platform",v)},loadAssetPack:function(t){return new ne(this,t).promise},getStage:function(){return this._stage},getStorage:function(){if(null==this._storage){var t=Nn.getLocalStorage();null!=t?this._storage=new pe(t):(R.logger.warn("localStorage is unavailable, falling back to unpersisted storage",null),this._storage=new Nt)}return this._storage},getLocale:function(){var t=i.navigator.language;return null==t&&(t=i.navigator.userLanguage),t},createLogHandler:function(t){return oe.isSupported()?new oe(t):null},getTime:function(){return Date.now()/1e3},getCatapultClient:function(){return this._catapult},update:function(t){var e=(t-this._lastUpdate)/1e3;this._lastUpdate=t,P.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(e),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getMouse:function(){return this._mouse},getTouch:function(){return this._touch},getKeyboard:function(){var t=this;if(null==this._keyboard){this._keyboard=new yt;var e=function(e){switch(e.type){case"keydown":t._keyboard.submitDown(e.keyCode)&&e.preventDefault();break;case"keyup":t._keyboard.submitUp(e.keyCode);break}};this._canvas.addEventListener("keydown",e,!1),this._canvas.addEventListener("keyup",e,!1)}return this._keyboard},getWeb:function(){return null==this._web&&(this._web=new ge),this._web},getExternal:function(){return null==this._external&&(this._external=new re),this._external},getMotion:function(){return null==this._motion&&(this._motion=new le),this._motion},getRenderer:function(){return this._renderer},getX:function(t,e){return(t.clientX-e.left)*this._stage.get_width()/e.width},getY:function(t,e){return(t.clientY-e.top)*this._stage.get_height()/e.height},createRenderer:function(t){try{var e=On.getContextWebGL(t,{depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=e){if(!me.detectSlowDriver(e))return new Se(this._stage,e);R.logger.warn("Detected a slow WebGL driver, falling back to canvas",null)}}catch(n){}return new $t(t)},__class__:S};var A=function(t,e){this._value=t,this._changed=null!=e?new E(e):null};A.__name__="flambe.util.Value",A.prototype={watch:function(t){return t(this._value,this._value),this.get_changed().connect(t)},set__:function(t){var e=this._value;return t!=e&&(this._value=t,null!=this._changed&&this._changed.emit(t,e)),t},get_changed:function(){return null==this._changed&&(this._changed=new E),this._changed},toString:function(){return""+c.string(this._value)},__class__:A};var C=function(t,e){this._next=null,this._signal=t,this._listener=e,this.stayInList=!0};C.__name__="flambe.util.SignalConnection",C.__interfaces__=[g],C.prototype={once:function(){return this.stayInList=!1,this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:C};var T=function(t){this._head=null!=t?new C(this,t):null,this._deferredTasks=null};T.__name__="flambe.util.SignalBase",T.prototype={connectImpl:function(t,e){var n=this,i=new C(this,t);return this._head==T.DISPATCHING_SENTINEL?this.defer((function(){n.listAdd(i,e)})):this.listAdd(i,e),i},disconnect:function(t){var e=this;this._head==T.DISPATCHING_SENTINEL?this.defer((function(){e.listRemove(t)})):this.listRemove(t)},defer:function(t){var e=null,n=this._deferredTasks;while(null!=n)e=n,n=n.next;var i=new qe(t);null!=e?e.next=i:this._deferredTasks=i},willEmit:function(){Ge.that(this._head!=T.DISPATCHING_SENTINEL);var t=this._head;return this._head=T.DISPATCHING_SENTINEL,t},didEmit:function(t){this._head=t;var e=this._deferredTasks;this._deferredTasks=null;while(null!=e)e.fn(),e=e.next},listAdd:function(t,e){if(e)t._next=this._head,this._head=t;else{var n=null,i=this._head;while(null!=i)n=i,i=i._next;null!=n?n._next=t:this._head=t}},listRemove:function(t){var e=null,n=this._head;while(null!=n){if(n==t){var i=n._next;return void(null==e?this._head=i:e._next=i)}e=n,n=n._next}},__class__:T};var E=function(t){T.call(this,t)};E.__name__="flambe.util.Signal2",E.__super__=T,E.prototype=o(T.prototype,{connect:function(t,e){return null==e&&(e=!1),this.connectImpl(t,e)},emit:function(t,e){var n=this;this._head==T.DISPATCHING_SENTINEL?this.defer((function(){n.emitImpl(t,e)})):this.emitImpl(t,e)},emitImpl:function(t,e){var n=this.willEmit(),i=n;while(null!=i)i._listener(t,e),i.stayInList||i.dispose(),i=i._next;this.didEmit(n)},__class__:E});var k=function(t){T.call(this,t)};k.__name__="flambe.util.Signal1",k.__super__=T,k.prototype=o(T.prototype,{connect:function(t,e){return null==e&&(e=!1),this.connectImpl(t,e)},emit:function(t){var e=this;this._head==T.DISPATCHING_SENTINEL?this.defer((function(){e.emitImpl(t)})):this.emitImpl(t)},emitImpl:function(t){var e=this.willEmit(),n=e;while(null!=n)n._listener(t),n.stayInList||n.dispose(),n=n._next;this.didEmit(e)},__class__:k});var M=function(t,e){this._behavior=null,A.call(this,t,e)};M.__name__="flambe.animation.AnimatedFloat",M.__super__=A,M.prototype=o(A.prototype,{set__:function(t){return this._behavior=null,A.prototype.set__.call(this,t)},update:function(t){null!=this._behavior&&(A.prototype.set__.call(this,this._behavior.update(t)),this._behavior.isComplete()&&(this._behavior=null))},animateTo:function(t,e,n){this.set_behavior(new O(this._value,t,e,n))},set_behavior:function(t){return this._behavior=t,this.update(0),t},__class__:M});var P=n["flambe"]["System"]=function(){};P.__name__="flambe.System",P.init=function(){P._calledInit||(P._platform.init(),P._calledInit=!0)},P.loadAssetPack=function(t){return P.assertCalledInit(),P._platform.loadAssetPack(t)},P.createLogger=function(t){return new D(P._platform.createLogHandler(t))},P.get_time=function(){return P.assertCalledInit(),P._platform.getTime()},P.get_stage=function(){return P.assertCalledInit(),P._platform.getStage()},P.get_storage=function(){return P.assertCalledInit(),P._platform.getStorage()},P.get_pointer=function(){return P.assertCalledInit(),P._platform.getPointer()},P.get_mouse=function(){return P.assertCalledInit(),P._platform.getMouse()},P.get_touch=function(){return P.assertCalledInit(),P._platform.getTouch()},P.get_keyboard=function(){return P.assertCalledInit(),P._platform.getKeyboard()},P.get_web=function(){return P.assertCalledInit(),P._platform.getWeb()},P.get_external=function(){return P.assertCalledInit(),P._platform.getExternal()},P.get_locale=function(){return P.assertCalledInit(),P._platform.getLocale()},P.get_motion=function(){return P.assertCalledInit(),P._platform.getMotion()},P.get_renderer=function(){return P.assertCalledInit(),P._platform.getRenderer()},P.assertCalledInit=function(){Ge.that(P._calledInit,"You must call System.init() first")};var D=function(t){this._handler=t};D.__name__="flambe.util.Logger",D.prototype={info:function(t,e){this.log(We.Info,t,e)},warn:function(t,e){this.log(We.Warn,t,e)},error:function(t,e){this.log(We.Error,t,e)},log:function(t,e,n){null!=this._handler&&(null==e&&(e=""),null!=n&&(e=Qe.withFields(e,n)),this._handler.log(t,e))},__class__:D};var R=function(){};R.__name__="flambe.Log",R.__super__=x,R.prototype=o(x.prototype,{__class__:R});var L=function(t){null==t&&(t=1),this._realDt=0,v.call(this),this.scale=new M(t)};L.__name__="flambe.SpeedAdjuster",L.__super__=v,L.prototype=o(v.prototype,{get_name:function(){return"SpeedAdjuster_16"},onUpdate:function(t){this._realDt>0&&(t=this._realDt,this._realDt=0),this.scale.update(t)},__class__:L});var F=function(){};F.__name__="flambe.animation.Behavior",F.__isInterface__=!0,F.prototype={__class__:F};var I=function(t,e){this._target=t,this._fn=e};I.__name__="flambe.animation.Binding",I.__interfaces__=[F],I.prototype={update:function(t){var e=this._target._value;return null!=this._fn?this._fn(e):e},isComplete:function(){return!1},__class__:I};var B=function(){};B.__name__="flambe.animation.Ease",B.linear=function(t){return t},B.cubeIn=function(t){return t*t*t},B.cubeOut=function(t){return 1+--t*t*t},B.sineIn=function(t){return 1-Math.cos(1.5707963267948966*t)},B.sineOut=function(t){return Math.sin(1.5707963267948966*t)},B.bounceOut=function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-.5454545454545454)*(t-.5454545454545454)+.75:t<.9090909090909091?7.5625*(t-.8181818181818182)*(t-.8181818181818182)+.9375:7.5625*(t-.9545454545454546)*(t-.9545454545454546)+.984375};var N=function(t,e,n,i,a){null==a&&(a=0),null==i&&(i=0),null==n&&(n=1),this.start=t,this.end=e,this.cycles=i,this.speed=new M(n),this._count=1.5707963267948966+a*(3.141592653589793/n),this._distance=.5*(t-e),this._center=e+this._distance};N.__name__="flambe.animation.Sine",N.__interfaces__=[F],N.prototype={update:function(t){return this.speed.update(t),this._count+=t*(3.141592653589793/this.speed._value),this.isComplete()?this._center+3.141592653589793*this._distance:this._center+Math.sin(this._count)*this._distance},isComplete:function(){return this.cycles>0&&(this._count-1.5707963267948966)/3.141592653589793*.5>=this.cycles},__class__:N};var O=function(t,e,n,i){this._from=t,this._to=e,this._duration=n,this.elapsed=0,this._easing=null!=i?i:B.linear};O.__name__="flambe.animation.Tween",O.__interfaces__=[F],O.prototype={update:function(t){return this.elapsed+=t,this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:O};var V=function(){};V.__name__="flambe.asset.Asset",V.__isInterface__=!0,V.__interfaces__=[g],V.prototype={__class__:V};var U=s["flambe.asset.AssetFormat"]={__ename__:!0,__constructs__:null,WEBP:{_hx_name:"WEBP",_hx_index:0,__enum__:"flambe.asset.AssetFormat",toString:r},JXR:{_hx_name:"JXR",_hx_index:1,__enum__:"flambe.asset.AssetFormat",toString:r},PNG:{_hx_name:"PNG",_hx_index:2,__enum__:"flambe.asset.AssetFormat",toString:r},JPG:{_hx_name:"JPG",_hx_index:3,__enum__:"flambe.asset.AssetFormat",toString:r},GIF:{_hx_name:"GIF",_hx_index:4,__enum__:"flambe.asset.AssetFormat",toString:r},DDS:{_hx_name:"DDS",_hx_index:5,__enum__:"flambe.asset.AssetFormat",toString:r},PVR:{_hx_name:"PVR",_hx_index:6,__enum__:"flambe.asset.AssetFormat",toString:r},PKM:{_hx_name:"PKM",_hx_index:7,__enum__:"flambe.asset.AssetFormat",toString:r},MP3:{_hx_name:"MP3",_hx_index:8,__enum__:"flambe.asset.AssetFormat",toString:r},M4A:{_hx_name:"M4A",_hx_index:9,__enum__:"flambe.asset.AssetFormat",toString:r},OPUS:{_hx_name:"OPUS",_hx_index:10,__enum__:"flambe.asset.AssetFormat",toString:r},OGG:{_hx_name:"OGG",_hx_index:11,__enum__:"flambe.asset.AssetFormat",toString:r},WAV:{_hx_name:"WAV",_hx_index:12,__enum__:"flambe.asset.AssetFormat",toString:r},Data:{_hx_name:"Data",_hx_index:13,__enum__:"flambe.asset.AssetFormat",toString:r}};U.__constructs__=[U.WEBP,U.JXR,U.PNG,U.JPG,U.GIF,U.DDS,U.PVR,U.PKM,U.MP3,U.M4A,U.OPUS,U.OGG,U.WAV,U.Data];var K=function(t,e,n,i){this.name=t,this.url=e,this.format=n,this.bytes=i};K.__name__="flambe.asset.AssetEntry",K.prototype={__class__:K};var X=function(){};X.__name__="flambe.asset.AssetPack",X.__isInterface__=!0,X.__interfaces__=[g],X.prototype={__class__:X};var Y=function(){};Y.__name__="flambe.asset.File",Y.__isInterface__=!0,Y.__interfaces__=[V],Y.prototype={__class__:Y};var G=function(){this._remoteBase=null,this._localBase=null,this._entries=[]};G.__name__="flambe.asset.Manifest",G.fromAssets=function(t,e){null==e&&(e=!0);var n=h.field(Rn.getType(G).assets[0],t);if(null==n){if(e)throw An.thrown(Qe.withFields("Missing asset pack",["name",t]));return null}var i=new G;i.set_localBase("assets");var a=0;while(a<n.length){var r=n[a];++a;var s=r.name,o=t+"/"+s+"?v="+c.string(r.md5),_=G.inferFormat(s);_!=U.Data&&(s=Qe.removeFileExtension(s)),i.add(s,o,r.bytes,_)}return i},G.inferFormat=function(t){var e=Qe.getUrlExtension(t);if(null!=e)switch(e.toLowerCase()){case"dds":return U.DDS;case"gif":return U.GIF;case"jpeg":case"jpg":return U.JPG;case"jxr":case"wdp":return U.JXR;case"m4a":return U.M4A;case"mp3":return U.MP3;case"ogg":return U.OGG;case"opus":return U.OPUS;case"pkm":return U.PKM;case"png":return U.PNG;case"pvr":return U.PVR;case"wav":return U.WAV;case"webp":return U.WEBP}else R.logger.warn("No file extension for asset, it will be loaded as data",["url",t]);return U.Data},G.prototype={add:function(t,e,n,i){null==n&&(n=0),null==i&&(i=G.inferFormat(e));var a=new K(t,e,i,n);return this._entries.push(a),a},iterator:function(){return new Dn(this._entries)},getFullURL:function(t){var e=null!=this.get_remoteBase()&&G._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=e?Qe.joinPath(e,t.url):t.url},get_localBase:function(){return this._localBase},set_localBase:function(t){return null!=t&&Ge.that(!p.startsWith(t,"http://")&&!p.startsWith(t,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://"),this._localBase=t},get_remoteBase:function(){return this._remoteBase},__class__:G};var H=s["flambe.display.BlendMode"]={__ename__:!0,__constructs__:null,Normal:{_hx_name:"Normal",_hx_index:0,__enum__:"flambe.display.BlendMode",toString:r},Add:{_hx_name:"Add",_hx_index:1,__enum__:"flambe.display.BlendMode",toString:r},Multiply:{_hx_name:"Multiply",_hx_index:2,__enum__:"flambe.display.BlendMode",toString:r},Screen:{_hx_name:"Screen",_hx_index:3,__enum__:"flambe.display.BlendMode",toString:r},Mask:{_hx_name:"Mask",_hx_index:4,__enum__:"flambe.display.BlendMode",toString:r},Copy:{_hx_name:"Copy",_hx_index:5,__enum__:"flambe.display.BlendMode",toString:r}};H.__constructs__=[H.Normal,H.Add,H.Multiply,H.Screen,H.Mask,H.Copy];var W=s["flambe.display.EmitterType"]={__ename__:!0,__constructs__:null,Gravity:{_hx_name:"Gravity",_hx_index:0,__enum__:"flambe.display.EmitterType",toString:r},Radial:{_hx_name:"Radial",_hx_index:1,__enum__:"flambe.display.EmitterType",toString:r}};W.__constructs__=[W.Gravity,W.Radial];var j=function(t,e){this._file=t.getFile(e+".pex");var n=f.parse(this._file.toString()),i=0,a=0,r=e.lastIndexOf("/"),s=r>=0?l.substr(e,0,r+1):"";this.textures=[];var o=n.firstElement().elements();while(o.hasNext()){var _=o.next();if(_.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==_.nodeType?"null":m.toString(_.nodeType)));switch(_.nodeName.toLowerCase()){case"angle":this.angle=j.getFloat(_,"value");break;case"anglevariance":this.angleVariance=j.getFloat(_,"value");break;case"blendfuncdestination":a=0|j.getFloat(_,"value");break;case"blendfuncsource":i=0|j.getFloat(_,"value");break;case"duration":this.duration=j.getFloat(_,"value");break;case"emittertype":this.type=0==(0|j.getFloat(_,"value"))?W.Gravity:W.Radial;break;case"finishcolor":this.alphaEnd=j.getFloat(_,"alpha");break;case"finishcolorvariance":this.alphaEndVariance=j.getFloat(_,"alpha");break;case"finishparticlesize":this.sizeEnd=j.getFloat(_,"value");break;case"finishparticlesizevariance":this.sizeEndVariance=j.getFloat(_,"value");break;case"gravity":this.gravityX=j.getFloat(_,"x"),this.gravityY=j.getFloat(_,"y");break;case"maxparticles":this.maxParticles=0|j.getFloat(_,"value");break;case"maxradius":this.maxRadius=j.getFloat(_,"value");break;case"maxradiusvariance":this.maxRadiusVariance=j.getFloat(_,"value");break;case"minradius":this.minRadius=j.getFloat(_,"value");break;case"particlelifespan":this.lifespan=j.getFloat(_,"value");break;case"particlelifespanvariance":this.lifespanVariance=j.getFloat(_,"value");break;case"radialacceleration":this.radialAccel=j.getFloat(_,"value");break;case"radialaccelvariance":this.radialAccelVariance=j.getFloat(_,"value");break;case"rotatepersecond":this.rotatePerSecond=j.getFloat(_,"value");break;case"rotatepersecondvariance":this.rotatePerSecondVariance=j.getFloat(_,"value");break;case"rotationend":this.rotationEnd=j.getFloat(_,"value");break;case"rotationendvariance":this.rotationEndVariance=j.getFloat(_,"value");break;case"rotationstart":this.rotationStart=j.getFloat(_,"value");break;case"rotationstartvariance":this.rotationStartVariance=j.getFloat(_,"value");break;case"sourcepositionvariance":this.emitXVariance=j.getFloat(_,"x"),this.emitYVariance=j.getFloat(_,"y");break;case"speed":this.speed=j.getFloat(_,"value");break;case"speedvariance":this.speedVariance=j.getFloat(_,"value");break;case"startcolor":this.alphaStart=j.getFloat(_,"alpha");break;case"startcolorvariance":this.alphaStartVariance=j.getFloat(_,"alpha");break;case"startparticlesize":this.sizeStart=j.getFloat(_,"value");break;case"startparticlesizevariance":this.sizeStartVariance=j.getFloat(_,"value");break;case"tangentialacceleration":this.tangentialAccel=j.getFloat(_,"value");break;case"tangentialaccelvariance":this.tangentialAccelVariance=j.getFloat(_,"value");break;case"texture":this.textures=[t.getTexture(s+Qe.removeFileExtension(_.get("name"))+"0"),t.getTexture(s+Qe.removeFileExtension(_.get("name"))+"1"),t.getTexture(s+Qe.removeFileExtension(_.get("name"))+"2"),t.getTexture(s+Qe.removeFileExtension(_.get("name"))+"3"),t.getTexture(s+Qe.removeFileExtension(_.get("name"))+"4")];break}}this.lifespan<=0&&(this.lifespan=this.duration),1==i&&1==a?this.blendMode=H.Add:1==i&&771==a?this.blendMode=null:0==i&&0==a||R.logger.warn("Unsupported particle blend functions",["emitter",e,"source",i,"dest",a])};j.__name__="flambe.display.EmitterMold",j.getFloat=function(t,e){return parseFloat(t.get(e))},j.prototype={__class__:j};var z=function(t,e){null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e};z.__name__="flambe.math.Point",z.prototype={set:function(t,e){this.x=t,this.y=e},distanceTo:function(t,e){return Math.sqrt(this.distanceToSquared(t,e))},distanceToSquared:function(t,e){var n=this.x-t,i=this.y-e;return n*n+i*i},toString:function(){return"("+this.x+","+this.y+")"},__class__:z};var q=function(){this._cosCache=0,this._sinCache=0,this._parentViewMatrixUpdateCount=0,this._viewMatrixUpdateCount=0,this._viewMatrix=null,this.scissor=null,this.blendMode=null;var t=this;v.call(this),this._flags|=182,this._localMatrix=new mt;var e=function(e,n){t._flags|=24};this.x=new M(0,e),this.y=new M(0,e),this.rotation=new M(0,(function(e,n){t._flags|=152})),this.scaleX=new M(1,e),this.scaleY=new M(1,e),this.anchorX=new M(0,e),this.anchorY=new M(0,e),this.alpha=new M(1),this.disablePixelSnapping()};q.__name__="flambe.display.Sprite",q.hitTest=function(t,e,n){var i=t._compMap["Sprite_4"];if(null!=i){if(6!=(6&i._flags))return null;i.getLocalMatrix().inverseTransform(e,n,q._scratchPoint)&&(e=q._scratchPoint.x,n=q._scratchPoint.y);var a=i.scissor;if(null!=a&&!a.contains(e,n))return null}var r=q.hitTestBackwards(t.firstChild,e,n);return null!=r?r:null!=i&&i.containsLocal(e,n)?i:null},q.render=function(t,e){var n=t._compMap["Sprite_4"];if(null!=n){var i=n.alpha._value;if(0==(2&n._flags)||i<=0)return;e.save(),i<1&&e.multiplyAlpha(i),null!=n.blendMode&&e.setBlendMode(n.blendMode);var a=n.getLocalMatrix(),r=a.m02,s=a.m12;0!=(32&n._flags)&&(r=Math.round(r),s=Math.round(s)),e.transform(a.m00,a.m10,a.m01,a.m11,r,s);var o=n.scissor;null!=o&&e.applyScissor(o.x,o.y,o.width,o.height),n.draw(e)}var _=t._compMap["Director_15"];if(null!=_){var l=_.occludedScenes,u=0;while(u<l.length){var h=l[u];++u,q.render(h,e)}}var c=t.firstChild;while(null!=c){var d=c.next;q.render(c,e),c=d}null!=n&&e.restore()},q.hitTestBackwards=function(t,e,n){if(null!=t){var i=q.hitTestBackwards(t.next,e,n);return null!=i?i:q.hitTest(t,e,n)}return null},q.__super__=v,q.prototype=o(v.prototype,{get_name:function(){return"Sprite_4"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(t,e){return t>=0&&t<this.getNaturalWidth()&&e>=0&&e<this.getNaturalHeight()},getLocalMatrix:function(){if(0!=(8&this._flags)){if(this._flags&=-9,0!=(128&this._flags)){this._flags&=-129;var t=3.141592653589793*this.rotation._value/180;this._sinCache=Math.sin(t),this._cosCache=Math.cos(t)}var e=this.scaleX._value,n=this.scaleY._value;this._localMatrix.set(this._cosCache*e,this._sinCache*e,-this._sinCache*n,this._cosCache*n,this.x._value,this.y._value),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value)}return this._localMatrix},getViewMatrix:function(){if(this.isViewMatrixDirty()){var t=this.getParentSprite();this._viewMatrix=null!=t?mt.multiply(t.getViewMatrix(),this.getLocalMatrix(),this._viewMatrix):this.getLocalMatrix().clone(this._viewMatrix),this._flags&=-17,null!=t&&(this._parentViewMatrixUpdateCount=t._viewMatrixUpdateCount),++this._viewMatrixUpdateCount}return this._viewMatrix},setAnchor:function(t,e){return this.anchorX.set__(t),this.anchorY.set__(e),this},centerAnchor:function(){return this.anchorX.set__(this.getNaturalWidth()/2),this.anchorY.set__(this.getNaturalHeight()/2),this},setXY:function(t,e){return this.x.set__(t),this.y.set__(e),this},setRotation:function(t){return this.rotation.set__(t),this},setScale:function(t){return this.scaleX.set__(t),this.scaleY.set__(t),this},disablePixelSnapping:function(){return this.set_pixelSnapping(!1),this},onAdded:function(){0!=(64&this._flags)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(t){this.x.update(t),this.y.update(t),this.rotation.update(t),this.scaleX.update(t),this.scaleY.update(t),this.alpha.update(t),this.anchorX.update(t),this.anchorY.update(t)},draw:function(t){},isViewMatrixDirty:function(){if(0!=(16&this._flags))return!0;var t=this.getParentSprite();return null!=t&&(this._parentViewMatrixUpdateCount!=t._viewMatrixUpdateCount||t.isViewMatrixDirty())},getParentSprite:function(){if(null==this.owner)return null;var t=this.owner.parent;while(null!=t){var e=t._compMap["Sprite_4"];if(null!=e)return e;t=t.parent}return null},get_pointerDown:function(){return null==this._pointerDown&&(this._pointerDown=new k),this._pointerDown},get_pointerIn:function(){return null==this._pointerIn&&(this._pointerIn=new k),this._pointerIn},get_pointerOut:function(){return null==this._pointerOut&&(this._pointerOut=new k),this._pointerOut},connectHover:function(){var t=this;null==this._hoverConnection&&(P.assertCalledInit(),this._hoverConnection=P._platform.getPointer().move.connect((function(e){var n=e.hit;while(null!=n){if(n==t)return;n=n.getParentSprite()}null!=t._pointerOut&&0!=(64&t._flags)&&t._pointerOut.emit(e),t._flags&=-65,null!=t._hoverConnection&&(t._hoverConnection.dispose(),t._hoverConnection=null)})))},set_visible:function(t){return this._flags=He.set(this._flags,2,t),t},set_pixelSnapping:function(t){return this._flags=He.set(this._flags,32,t),t},onPointerDown:function(t){this.onHover(t),null!=this._pointerDown&&this._pointerDown.emit(t)},onPointerMove:function(t){this.onHover(t),null!=this._pointerMove&&this._pointerMove.emit(t)},onHover:function(t){0==(64&this._flags)&&(this._flags|=64,null==this._pointerIn&&null==this._pointerOut||(null!=this._pointerIn&&this._pointerIn.emit(t),this.connectHover()))},onPointerUp:function(t){1==t.source._hx_index&&(null!=this._pointerOut&&0!=(64&this._flags)&&this._pointerOut.emit(t),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)),null!=this._pointerUp&&this._pointerUp.emit(t)},__class__:q});var Q=function(t){this._totalElapsed=0,this._emitElapsed=0,this.enabled=!0,this.numParticles=0,q.call(this),this.textures=t.textures,this.blendMode=t.blendMode,this.type=t.type,this.alphaEnd=new M(t.alphaEnd),this.alphaEndVariance=new M(t.alphaEndVariance),this.alphaStart=new M(t.alphaStart),this.alphaStartVariance=new M(t.alphaStartVariance),this.angle=new M(t.angle),this.angleVariance=new M(t.angleVariance),this.duration=t.duration,this.emitXVariance=new M(t.emitXVariance),this.emitYVariance=new M(t.emitYVariance),this.gravityX=new M(t.gravityX),this.gravityY=new M(t.gravityY),this.maxRadius=new M(t.maxRadius),this.maxRadiusVariance=new M(t.maxRadiusVariance),this.minRadius=new M(t.minRadius),this.lifespan=new M(t.lifespan),this.lifespanVariance=new M(t.lifespanVariance),this.radialAccel=new M(t.radialAccel),this.radialAccelVariance=new M(t.radialAccelVariance),this.rotatePerSecond=new M(t.rotatePerSecond),this.rotatePerSecondVariance=new M(t.rotatePerSecondVariance),this.rotationEnd=new M(t.rotationEnd),this.rotationEndVariance=new M(t.rotationEndVariance),this.rotationStart=new M(t.rotationStart),this.rotationStartVariance=new M(t.rotationStartVariance),this.sizeEnd=new M(t.sizeEnd),this.sizeEndVariance=new M(t.sizeEndVariance),this.sizeStart=new M(t.sizeStart),this.sizeStartVariance=new M(t.sizeStartVariance),this.speed=new M(t.speed),this.speedVariance=new M(t.speedVariance),this.tangentialAccel=new M(t.tangentialAccel),this.tangentialAccelVariance=new M(t.tangentialAccelVariance),this.emitX=new M(0),this.emitY=new M(0),this._particles=new Array(t.maxParticles);var e=0,n=this._particles.length;while(e<n)this._particles[e]=new J,++e};Q.__name__="flambe.display.EmitterSprite",Q.random=function(t,e){return 0!=e&&(t+=e*(2*Math.random()-1)),t},Q.__super__=q,Q.prototype=o(q.prototype,{onUpdate:function(t){q.prototype.onUpdate.call(this,t),this.alphaEnd.update(t),this.alphaEndVariance.update(t),this.alphaStart.update(t),this.alphaStartVariance.update(t),this.angle.update(t),this.angleVariance.update(t),this.emitX.update(t),this.emitXVariance.update(t),this.emitY.update(t),this.emitYVariance.update(t),this.gravityX.update(t),this.gravityY.update(t),this.lifespan.update(t),this.lifespanVariance.update(t),this.maxRadius.update(t),this.maxRadiusVariance.update(t),this.minRadius.update(t),this.radialAccel.update(t),this.radialAccelVariance.update(t),this.rotatePerSecond.update(t),this.rotatePerSecondVariance.update(t),this.rotationEnd.update(t),this.rotationEndVariance.update(t),this.rotationStart.update(t),this.rotationStartVariance.update(t),this.sizeEnd.update(t),this.sizeEndVariance.update(t),this.sizeStart.update(t),this.sizeStartVariance.update(t),this.speed.update(t),this.speedVariance.update(t),this.tangentialAccel.update(t),this.tangentialAccelVariance.update(t);var e=this.type==W.Gravity,n=0;while(n<this.numParticles){var i=this._particles[n];if(i.life>t){if(e){i.x+=i.velX*t,i.y+=i.velY*t;var a=this.gravityX._value,r=-this.gravityY._value;if(0!=i.radialAccel||0!=i.tangentialAccel){var s=i.x-i.emitX,o=i.y-i.emitY,_=Math.sqrt(s*s+o*o),l=s/_,u=o/_;a+=l*i.radialAccel,r+=u*i.radialAccel;var h=-u;a+=h*i.tangentialAccel,r+=l*i.tangentialAccel}i.velX+=a*t,i.velY+=r*t}else{i.radialRotation+=i.velRadialRotation*t;var c=i.radialRadius+=i.velRadialRadius*t;i.x=this.emitX._value-Math.cos(i.radialRotation)*c,i.y=this.emitY._value-Math.sin(i.radialRotation)*c,c<this.minRadius._value&&(i.life=0)}i.scale+=i.velScale*t,i.rotation+=i.velRotation*t,i.alpha+=i.velAlpha*t,i.life-=t,++n}else--this.numParticles,n!=this.numParticles&&(this._particles[n]=this._particles[this.numParticles],this._particles[this.numParticles]=i)}if(this.enabled)if(this.duration>0&&(this._totalElapsed+=t,this._totalElapsed>=this.duration))this.enabled=!1;else{var d=this.lifespan._value/this._particles.length;this._emitElapsed+=t;while(this._emitElapsed>=d){if(this.numParticles<this._particles.length){i=this._particles[this.numParticles];this.initParticle(i)&&++this.numParticles}this._emitElapsed-=d}}},draw:function(t){var e=-this.textures[0].get_width()/2,n=0,i=this.numParticles;while(n<i){var a=this._particles[n];t.save(),t.translate(a.x,a.y),a.alpha<1&&t.multiplyAlpha(a.alpha),0!=a.rotation&&t.rotate(a.rotation),1!=a.scale&&t.scale(a.scale,a.scale);var r=this.textures[n%this.textures.length];t.drawTexture(r,e,e),t.restore(),++n}},initParticle:function(t){if(t.life=Q.random(this.lifespan._value,this.lifespanVariance._value),t.life<=0)return!1;t.emitX=this.emitX._value,t.emitY=this.emitY._value;var e=-3.141592653589793*Q.random(this.angle._value,this.angleVariance._value)/180,n=Q.random(this.speed._value,this.speedVariance._value);if(t.velX=n*Math.cos(e),t.velY=n*Math.sin(e),t.radialAccel=Q.random(this.radialAccel._value,this.radialAccelVariance._value),t.tangentialAccel=Q.random(this.tangentialAccel._value,this.tangentialAccelVariance._value),t.radialRadius=Q.random(this.maxRadius._value,this.maxRadiusVariance._value),t.velRadialRadius=-t.radialRadius/t.life,t.radialRotation=e,t.velRadialRotation=3.141592653589793*Q.random(this.rotatePerSecond._value,this.rotatePerSecondVariance._value)/180,this.type==W.Gravity)t.x=Q.random(this.emitX._value,this.emitXVariance._value),t.y=Q.random(this.emitY._value,this.emitYVariance._value);else{var i=t.radialRadius;t.x=this.emitX._value-Math.cos(t.radialRotation)*i,t.y=this.emitY._value-Math.sin(t.radialRotation)*i}var a=this.textures[0].get_width(),r=Q.random(this.sizeStart._value,this.sizeStartVariance._value)/a,s=Q.random(this.sizeEnd._value,this.sizeEndVariance._value)/a;t.scale=r,t.velScale=(s-r)/t.life;var o=Q.random(this.rotationStart._value,this.rotationStartVariance._value),_=Q.random(this.rotationEnd._value,this.rotationEndVariance._value);t.rotation=o,t.velRotation=(_-o)/t.life;var l=Q.random(this.alphaStart._value,this.alphaStartVariance._value),u=Q.random(this.alphaEnd._value,this.alphaEndVariance._value);return t.alpha=l,t.velAlpha=(u-l)/t.life,!0},__class__:Q});var J=function(){this.life=0,this.velAlpha=0,this.alpha=0,this.velRotation=0,this.rotation=0,this.velScale=0,this.scale=0,this.tangentialAccel=0,this.radialAccel=0,this.velRadialRotation=0,this.radialRotation=0,this.velRadialRadius=0,this.radialRadius=0,this.velY=0,this.y=0,this.velX=0,this.x=0,this.emitY=0,this.emitX=0};J.__name__="flambe.display._EmitterSprite.Particle",J.prototype={__class__:J};var Z=function(t,e,n){q.call(this),this.color=t,this.width=new M(e),this.height=new M(n)};Z.__name__="flambe.display.FillSprite",Z.__super__=q,Z.prototype=o(q.prototype,{draw:function(t){t.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(t){q.prototype.onUpdate.call(this,t),this.width.update(t),this.height.update(t)},__class__:Z});var $=function(){};$.__name__="flambe.display.Graphics",$.__isInterface__=!0,$.prototype={__class__:$};var tt=function(t){q.call(this),this.texture=t};tt.__name__="flambe.display.ImageSprite",tt.__super__=q,tt.prototype=o(q.prototype,{draw:function(t){null!=this.texture&&t.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:tt});var et=s["flambe.display.Orientation"]={__ename__:!0,__constructs__:null,Portrait:{_hx_name:"Portrait",_hx_index:0,__enum__:"flambe.display.Orientation",toString:r},Landscape:{_hx_name:"Landscape",_hx_index:1,__enum__:"flambe.display.Orientation",toString:r}};et.__constructs__=[et.Portrait,et.Landscape];var nt=function(){};nt.__name__="flambe.display.Texture",nt.__isInterface__=!0,nt.__interfaces__=[V],nt.prototype={__class__:nt};var it=function(){};it.__name__="flambe.display.SubTexture",it.__isInterface__=!0,it.__interfaces__=[nt];var at=function(){this.init(0,0,0)};at.__name__="flambe.input.Acceleration",at.prototype={init:function(t,e,n){this.x=t,this.y=e,this.z=n},__class__:at};var rt=function(){this.init(0,0,0)};rt.__name__="flambe.input.Attitude",rt.prototype={init:function(t,e,n){this.pitch=t,this.roll=e,this.azimuth=n},__class__:rt};var st=s["flambe.input.Key"]={__ename__:!0,__constructs__:null,A:{_hx_name:"A",_hx_index:0,__enum__:"flambe.input.Key",toString:r},B:{_hx_name:"B",_hx_index:1,__enum__:"flambe.input.Key",toString:r},C:{_hx_name:"C",_hx_index:2,__enum__:"flambe.input.Key",toString:r},D:{_hx_name:"D",_hx_index:3,__enum__:"flambe.input.Key",toString:r},E:{_hx_name:"E",_hx_index:4,__enum__:"flambe.input.Key",toString:r},F:{_hx_name:"F",_hx_index:5,__enum__:"flambe.input.Key",toString:r},G:{_hx_name:"G",_hx_index:6,__enum__:"flambe.input.Key",toString:r},H:{_hx_name:"H",_hx_index:7,__enum__:"flambe.input.Key",toString:r},I:{_hx_name:"I",_hx_index:8,__enum__:"flambe.input.Key",toString:r},J:{_hx_name:"J",_hx_index:9,__enum__:"flambe.input.Key",toString:r},K:{_hx_name:"K",_hx_index:10,__enum__:"flambe.input.Key",toString:r},L:{_hx_name:"L",_hx_index:11,__enum__:"flambe.input.Key",toString:r},M:{_hx_name:"M",_hx_index:12,__enum__:"flambe.input.Key",toString:r},N:{_hx_name:"N",_hx_index:13,__enum__:"flambe.input.Key",toString:r},O:{_hx_name:"O",_hx_index:14,__enum__:"flambe.input.Key",toString:r},P:{_hx_name:"P",_hx_index:15,__enum__:"flambe.input.Key",toString:r},Q:{_hx_name:"Q",_hx_index:16,__enum__:"flambe.input.Key",toString:r},R:{_hx_name:"R",_hx_index:17,__enum__:"flambe.input.Key",toString:r},S:{_hx_name:"S",_hx_index:18,__enum__:"flambe.input.Key",toString:r},T:{_hx_name:"T",_hx_index:19,__enum__:"flambe.input.Key",toString:r},U:{_hx_name:"U",_hx_index:20,__enum__:"flambe.input.Key",toString:r},V:{_hx_name:"V",_hx_index:21,__enum__:"flambe.input.Key",toString:r},W:{_hx_name:"W",_hx_index:22,__enum__:"flambe.input.Key",toString:r},X:{_hx_name:"X",_hx_index:23,__enum__:"flambe.input.Key",toString:r},Y:{_hx_name:"Y",_hx_index:24,__enum__:"flambe.input.Key",toString:r},Z:{_hx_name:"Z",_hx_index:25,__enum__:"flambe.input.Key",toString:r},Number0:{_hx_name:"Number0",_hx_index:26,__enum__:"flambe.input.Key",toString:r},Number1:{_hx_name:"Number1",_hx_index:27,__enum__:"flambe.input.Key",toString:r},Number2:{_hx_name:"Number2",_hx_index:28,__enum__:"flambe.input.Key",toString:r},Number3:{_hx_name:"Number3",_hx_index:29,__enum__:"flambe.input.Key",toString:r},Number4:{_hx_name:"Number4",_hx_index:30,__enum__:"flambe.input.Key",toString:r},Number5:{_hx_name:"Number5",_hx_index:31,__enum__:"flambe.input.Key",toString:r},Number6:{_hx_name:"Number6",_hx_index:32,__enum__:"flambe.input.Key",toString:r},Number7:{_hx_name:"Number7",_hx_index:33,__enum__:"flambe.input.Key",toString:r},Number8:{_hx_name:"Number8",_hx_index:34,__enum__:"flambe.input.Key",toString:r},Number9:{_hx_name:"Number9",_hx_index:35,__enum__:"flambe.input.Key",toString:r},Numpad0:{_hx_name:"Numpad0",_hx_index:36,__enum__:"flambe.input.Key",toString:r},Numpad1:{_hx_name:"Numpad1",_hx_index:37,__enum__:"flambe.input.Key",toString:r},Numpad2:{_hx_name:"Numpad2",_hx_index:38,__enum__:"flambe.input.Key",toString:r},Numpad3:{_hx_name:"Numpad3",_hx_index:39,__enum__:"flambe.input.Key",toString:r},Numpad4:{_hx_name:"Numpad4",_hx_index:40,__enum__:"flambe.input.Key",toString:r},Numpad5:{_hx_name:"Numpad5",_hx_index:41,__enum__:"flambe.input.Key",toString:r},Numpad6:{_hx_name:"Numpad6",_hx_index:42,__enum__:"flambe.input.Key",toString:r},Numpad7:{_hx_name:"Numpad7",_hx_index:43,__enum__:"flambe.input.Key",toString:r},Numpad8:{_hx_name:"Numpad8",_hx_index:44,__enum__:"flambe.input.Key",toString:r},Numpad9:{_hx_name:"Numpad9",_hx_index:45,__enum__:"flambe.input.Key",toString:r},NumpadAdd:{_hx_name:"NumpadAdd",_hx_index:46,__enum__:"flambe.input.Key",toString:r},NumpadDecimal:{_hx_name:"NumpadDecimal",_hx_index:47,__enum__:"flambe.input.Key",toString:r},NumpadDivide:{_hx_name:"NumpadDivide",_hx_index:48,__enum__:"flambe.input.Key",toString:r},NumpadEnter:{_hx_name:"NumpadEnter",_hx_index:49,__enum__:"flambe.input.Key",toString:r},NumpadMultiply:{_hx_name:"NumpadMultiply",_hx_index:50,__enum__:"flambe.input.Key",toString:r},NumpadSubtract:{_hx_name:"NumpadSubtract",_hx_index:51,__enum__:"flambe.input.Key",toString:r},F1:{_hx_name:"F1",_hx_index:52,__enum__:"flambe.input.Key",toString:r},F2:{_hx_name:"F2",_hx_index:53,__enum__:"flambe.input.Key",toString:r},F3:{_hx_name:"F3",_hx_index:54,__enum__:"flambe.input.Key",toString:r},F4:{_hx_name:"F4",_hx_index:55,__enum__:"flambe.input.Key",toString:r},F5:{_hx_name:"F5",_hx_index:56,__enum__:"flambe.input.Key",toString:r},F6:{_hx_name:"F6",_hx_index:57,__enum__:"flambe.input.Key",toString:r},F7:{_hx_name:"F7",_hx_index:58,__enum__:"flambe.input.Key",toString:r},F8:{_hx_name:"F8",_hx_index:59,__enum__:"flambe.input.Key",toString:r},F9:{_hx_name:"F9",_hx_index:60,__enum__:"flambe.input.Key",toString:r},F10:{_hx_name:"F10",_hx_index:61,__enum__:"flambe.input.Key",toString:r},F11:{_hx_name:"F11",_hx_index:62,__enum__:"flambe.input.Key",toString:r},F12:{_hx_name:"F12",_hx_index:63,__enum__:"flambe.input.Key",toString:r},F13:{_hx_name:"F13",_hx_index:64,__enum__:"flambe.input.Key",toString:r},F14:{_hx_name:"F14",_hx_index:65,__enum__:"flambe.input.Key",toString:r},F15:{_hx_name:"F15",_hx_index:66,__enum__:"flambe.input.Key",toString:r},Left:{_hx_name:"Left",_hx_index:67,__enum__:"flambe.input.Key",toString:r},Up:{_hx_name:"Up",_hx_index:68,__enum__:"flambe.input.Key",toString:r},Right:{_hx_name:"Right",_hx_index:69,__enum__:"flambe.input.Key",toString:r},Down:{_hx_name:"Down",_hx_index:70,__enum__:"flambe.input.Key",toString:r},Alt:{_hx_name:"Alt",_hx_index:71,__enum__:"flambe.input.Key",toString:r},Backquote:{_hx_name:"Backquote",_hx_index:72,__enum__:"flambe.input.Key",toString:r},Backslash:{_hx_name:"Backslash",_hx_index:73,__enum__:"flambe.input.Key",toString:r},Backspace:{_hx_name:"Backspace",_hx_index:74,__enum__:"flambe.input.Key",toString:r},CapsLock:{_hx_name:"CapsLock",_hx_index:75,__enum__:"flambe.input.Key",toString:r},Comma:{_hx_name:"Comma",_hx_index:76,__enum__:"flambe.input.Key",toString:r},Command:{_hx_name:"Command",_hx_index:77,__enum__:"flambe.input.Key",toString:r},Control:{_hx_name:"Control",_hx_index:78,__enum__:"flambe.input.Key",toString:r},Delete:{_hx_name:"Delete",_hx_index:79,__enum__:"flambe.input.Key",toString:r},End:{_hx_name:"End",_hx_index:80,__enum__:"flambe.input.Key",toString:r},Enter:{_hx_name:"Enter",_hx_index:81,__enum__:"flambe.input.Key",toString:r},Equals:{_hx_name:"Equals",_hx_index:82,__enum__:"flambe.input.Key",toString:r},Escape:{_hx_name:"Escape",_hx_index:83,__enum__:"flambe.input.Key",toString:r},Home:{_hx_name:"Home",_hx_index:84,__enum__:"flambe.input.Key",toString:r},Insert:{_hx_name:"Insert",_hx_index:85,__enum__:"flambe.input.Key",toString:r},LeftBracket:{_hx_name:"LeftBracket",_hx_index:86,__enum__:"flambe.input.Key",toString:r},Minus:{_hx_name:"Minus",_hx_index:87,__enum__:"flambe.input.Key",toString:r},PageDown:{_hx_name:"PageDown",_hx_index:88,__enum__:"flambe.input.Key",toString:r},PageUp:{_hx_name:"PageUp",_hx_index:89,__enum__:"flambe.input.Key",toString:r},Period:{_hx_name:"Period",_hx_index:90,__enum__:"flambe.input.Key",toString:r},Quote:{_hx_name:"Quote",_hx_index:91,__enum__:"flambe.input.Key",toString:r},RightBracket:{_hx_name:"RightBracket",_hx_index:92,__enum__:"flambe.input.Key",toString:r},Semicolon:{_hx_name:"Semicolon",_hx_index:93,__enum__:"flambe.input.Key",toString:r},Shift:{_hx_name:"Shift",_hx_index:94,__enum__:"flambe.input.Key",toString:r},Slash:{_hx_name:"Slash",_hx_index:95,__enum__:"flambe.input.Key",toString:r},Space:{_hx_name:"Space",_hx_index:96,__enum__:"flambe.input.Key",toString:r},Tab:{_hx_name:"Tab",_hx_index:97,__enum__:"flambe.input.Key",toString:r},Menu:{_hx_name:"Menu",_hx_index:98,__enum__:"flambe.input.Key",toString:r},Search:{_hx_name:"Search",_hx_index:99,__enum__:"flambe.input.Key",toString:r},Unknown:(a=function(t){return{_hx_index:100,keyCode:t,__enum__:"flambe.input.Key",toString:r}},a._hx_name="Unknown",a.__params__=["keyCode"],a)};st.__constructs__=[st.A,st.B,st.C,st.D,st.E,st.F,st.G,st.H,st.I,st.J,st.K,st.L,st.M,st.N,st.O,st.P,st.Q,st.R,st.S,st.T,st.U,st.V,st.W,st.X,st.Y,st.Z,st.Number0,st.Number1,st.Number2,st.Number3,st.Number4,st.Number5,st.Number6,st.Number7,st.Number8,st.Number9,st.Numpad0,st.Numpad1,st.Numpad2,st.Numpad3,st.Numpad4,st.Numpad5,st.Numpad6,st.Numpad7,st.Numpad8,st.Numpad9,st.NumpadAdd,st.NumpadDecimal,st.NumpadDivide,st.NumpadEnter,st.NumpadMultiply,st.NumpadSubtract,st.F1,st.F2,st.F3,st.F4,st.F5,st.F6,st.F7,st.F8,st.F9,st.F10,st.F11,st.F12,st.F13,st.F14,st.F15,st.Left,st.Up,st.Right,st.Down,st.Alt,st.Backquote,st.Backslash,st.Backspace,st.CapsLock,st.Comma,st.Command,st.Control,st.Delete,st.End,st.Enter,st.Equals,st.Escape,st.Home,st.Insert,st.LeftBracket,st.Minus,st.PageDown,st.PageUp,st.Period,st.Quote,st.RightBracket,st.Semicolon,st.Shift,st.Slash,st.Space,st.Tab,st.Menu,st.Search,st.Unknown];var ot=function(){this.init(0,null)};ot.__name__="flambe.input.KeyboardEvent",ot.prototype={init:function(t,e){this.id=t,this.key=e},__class__:ot};var _t=s["flambe.input.MouseButton"]={__ename__:!0,__constructs__:null,Left:{_hx_name:"Left",_hx_index:0,__enum__:"flambe.input.MouseButton",toString:r},Middle:{_hx_name:"Middle",_hx_index:1,__enum__:"flambe.input.MouseButton",toString:r},Right:{_hx_name:"Right",_hx_index:2,__enum__:"flambe.input.MouseButton",toString:r},Unknown:(a=function(t){return{_hx_index:3,buttonCode:t,__enum__:"flambe.input.MouseButton",toString:r}},a._hx_name="Unknown",a.__params__=["buttonCode"],a)};_t.__constructs__=[_t.Left,_t.Middle,_t.Right,_t.Unknown];var lt=s["flambe.input.MouseCursor"]={__ename__:!0,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"flambe.input.MouseCursor",toString:r},Button:{_hx_name:"Button",_hx_index:1,__enum__:"flambe.input.MouseCursor",toString:r},None:{_hx_name:"None",_hx_index:2,__enum__:"flambe.input.MouseCursor",toString:r}};lt.__constructs__=[lt.Default,lt.Button,lt.None];var ut=function(){this.init(0,0,0,null)};ut.__name__="flambe.input.MouseEvent",ut.prototype={init:function(t,e,n,i){this.id=t,this.viewX=e,this.viewY=n,this.button=i},__class__:ut};var ht=s["flambe.input.EventSource"]={__ename__:!0,__constructs__:null,Mouse:(a=function(t){return{_hx_index:0,event:t,__enum__:"flambe.input.EventSource",toString:r}},a._hx_name="Mouse",a.__params__=["event"],a),Touch:(a=function(t){return{_hx_index:1,point:t,__enum__:"flambe.input.EventSource",toString:r}},a._hx_name="Touch",a.__params__=["point"],a)};ht.__constructs__=[ht.Mouse,ht.Touch];var ct=function(){this.init(0,0,0,null,null)};ct.__name__="flambe.input.PointerEvent",ct.prototype={init:function(t,e,n,i,a){this.id=t,this.viewX=e,this.viewY=n,this.hit=i,this.source=a,this._stopped=!1},__class__:ct};var dt=function(t){this.id=t,this._source=ht.Touch(this)};dt.__name__="flambe.input.TouchPoint",dt.prototype={init:function(t,e){this.viewX=t,this.viewY=e},__class__:dt};var pt=function(){};pt.__name__="flambe.math.FMath",pt.clamp=function(t,e,n){return t<e?e:t>n?n:t};var mt=function(){this.identity()};mt.__name__="flambe.math.Matrix",mt.multiply=function(t,e,n){null==n&&(n=new mt);var i=t.m00*e.m00+t.m01*e.m10,a=t.m00*e.m01+t.m01*e.m11,r=t.m00*e.m02+t.m01*e.m12+t.m02;return n.m00=i,n.m01=a,n.m02=r,i=t.m10*e.m00+t.m11*e.m10,a=t.m10*e.m01+t.m11*e.m11,r=t.m10*e.m02+t.m11*e.m12+t.m12,n.m10=i,n.m11=a,n.m12=r,n},mt.prototype={set:function(t,e,n,i,a,r){this.m00=t,this.m01=n,this.m02=a,this.m10=e,this.m11=i,this.m12=r},identity:function(){this.set(1,0,0,1,0,0)},translate:function(t,e){this.m02+=this.m00*t+this.m01*e,this.m12+=this.m11*e+this.m10*t},invert:function(){var t=this.determinant();return 0!=t&&(this.set(this.m11/t,-this.m01/t,-this.m10/t,this.m00/t,(this.m01*this.m12-this.m11*this.m02)/t,(this.m10*this.m02-this.m00*this.m12)/t),!0)},transformArray:function(t,e,n){var i=0;while(i<e){var a=t[i],r=t[i+1];n[i++]=a*this.m00+r*this.m01+this.m02,n[i++]=a*this.m10+r*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(t,e,n){var i=this.determinant();return 0!=i&&(t-=this.m02,e-=this.m12,n.x=(t*this.m11-e*this.m01)/i,n.y=(e*this.m00-t*this.m10)/i,!0)},clone:function(t){return null==t&&(t=new mt),t.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12),t},toString:function(){return this.m00+" "+this.m01+" "+this.m02+" \\ "+this.m10+" "+this.m11+" "+this.m12},__class__:mt};var ft=function(t,e,n,i){null==i&&(i=0),null==n&&(n=0),null==e&&(e=0),null==t&&(t=0),this.set(t,e,n,i)};ft.__name__="flambe.math.Rectangle",ft.prototype={set:function(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i},contains:function(t,e){if(t-=this.x,this.width>=0){if(t<0||t>this.width)return!1}else if(t>0||t<this.width)return!1;if(e-=this.y,this.height>=0){if(e<0||e>this.height)return!1}else if(e>0||e<this.height)return!1;return!0},clone:function(t){return null==t&&(t=new ft),t.set(this.x,this.y,this.width,this.height),t},equals:function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},toString:function(){return"("+this.x+","+this.y+" "+this.width+"x"+this.height+")"},__class__:ft};var gt=function(){this._reloadCount=null,this._disposed=!1};gt.__name__="flambe.platform.BasicAsset",gt.__interfaces__=[V],gt.prototype={reload:function(t){this.dispose(),this._disposed=!1,this.copyFrom(t);var e=this.get_reloadCount();e.set__(e._value+1)},dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},copyFrom:function(t){Ge.fail()},onDisposed:function(){Ge.fail()},get_reloadCount:function(){return null==this._reloadCount&&(this._reloadCount=new A(0)),this._reloadCount},__class__:gt};var vt=function(t,e){var n=this;this.manifest=e,this._platform=t,this.promise=new je,this._bytesLoaded=new En,this._pack=new bt(e,this);var i=u.array(e);if(0==i.length)this.handleSuccess();else{var a=new En,r=0;while(r<i.length){var s=i[r];++r;var o=a.h[s.name];null==o&&(o=[],a.h[s.name]=o),o.push(s)}this._assetsRemaining=u.count(a);var _=a.h,l=Object.keys(_),h=l.length,d=0;while(d<h){o=[_[l[d++]]];this.pickBestEntry(o[0],function(t){return function(i){if(null!=i){var a=e.getFullURL(i);try{n.loadEntry(a,i)}catch(r){var s=An.caught(r).unwrap();n.handleError(i,"Unexpected error: "+c.string(s))}var o=n.promise;o.set_total(o._total+i.bytes)}else{var _=t[0][0];vt.isAudio(_.format)?(R.logger.warn("Could not find a supported audio format to load",["name",_.name]),n.handleLoad(_,Lt.getInstance())):n.handleError(_,"Could not find a supported format to load")}}}(o))}}var p=this._platform.getCatapultClient();null!=p&&p.add(this)};vt.__name__="flambe.platform.BasicAssetPackLoader",vt.removeUrlParams=function(t){var e=t.indexOf("?");return e>0?l.substr(t,0,e):t},vt.isAudio=function(t){switch(t._hx_index){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}},vt.prototype={reload:function(t){var e=this,n=vt.removeUrlParams(t),i=null,a=this.manifest._entries,r=0;while(r<a.length){var s=a[r++];if(n==vt.removeUrlParams(s.url)){i=s;break}}null!=i&&this.getAssetFormats((function(n){if(n.indexOf(i.format)>=0){var a=new K(i.name,t,i.format,0);e.loadEntry(e.manifest.getFullURL(a),a)}}))},onDisposed:function(){var t=this._platform.getCatapultClient();null!=t&&t.remove(this)},pickBestEntry:function(t,e){var n=function(n){var i=0;while(i<n.length){var a=n[i];++i;var r=0;while(r<t.length){var s=t[r];if(++r,s.format==a)return void e(s)}}e(null)};this.getAssetFormats(n)},loadEntry:function(t,e){Ge.fail()},getAssetFormats:function(t){Ge.fail()},handleLoad:function(t,e){if(!this._pack.disposed){var n;switch(this.handleProgress(t,t.bytes),t.format._hx_index){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:n=this._pack.sounds;break;case 13:n=this._pack.files;break}var i=n.h[t.name];null!=i?(R.logger.info("Reloaded asset",["url",t.url]),i.reload(e)):(n.h[t.name]=e,this._assetsRemaining-=1,0==this._assetsRemaining&&this.handleSuccess())}},handleProgress:function(t,e){this._bytesLoaded.h[t.name]=e;var n=0,i=this._bytesLoaded.h,a=Object.keys(i),r=a.length,s=0;while(s<r){var o=i[a[s++]];n+=o}this.promise.set_progress(n)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(t,e){R.logger.warn("Error loading asset pack",["error",e,"url",t.url]),this.promise.error.emit(Qe.withFields(e,["url",t.url]))},handleTextureError:function(t){this.handleError(t,"Failed to create texture. Is the GPU context unavailable?")},__class__:vt};var bt=function(t,e){this.disposed=!1,this._manifest=t,this.loader=e,this.textures=new En,this.sounds=new En,this.files=new En};bt.__name__="flambe.platform._BasicAssetPackLoader.BasicAssetPack",bt.__interfaces__=[X],bt.warnOnExtension=function(t){var e=Qe.getFileExtension(t);if(null!=e&&3==e.length){var n='Requested asset "'+t+'" should not have a file extension, did you mean "'+Qe.removeFileExtension(t)+'"?';R.logger.warn(n,null)}},bt.prototype={getTexture:function(t,e){null==e&&(e=!0),Ge.that(!this.disposed,"AssetPack cannot be used after being disposed"),bt.warnOnExtension(t);var n=this.textures.h[t];if(null==n&&e)throw An.thrown(Qe.withFields("Missing texture",["name",t]));return n},getFile:function(t,e){null==e&&(e=!0),Ge.that(!this.disposed,"AssetPack cannot be used after being disposed");var n=this.files.h[t];if(null==n&&e)throw An.thrown(Qe.withFields("Missing file",["name",t]));return n},dispose:function(){if(!this.disposed){this.disposed=!0;var t=this.textures.h,e=Object.keys(t),n=e.length,i=0;while(i<n){var a=t[e[i++]];a.dispose()}this.textures=null;t=this.sounds.h;var r=Object.keys(t),s=r.length,o=0;while(o<s){var _=t[r[o++]];_.dispose()}this.sounds=null;t=this.files.h;var l=Object.keys(t),u=l.length,h=0;while(h<u){var c=t[l[h++]];c.dispose()}this.files=null,this.loader.onDisposed()}},__class__:bt};var wt=function(t){gt.call(this),this._content=t};wt.__name__="flambe.platform.BasicFile",wt.__interfaces__=[Y],wt.__super__=gt,wt.prototype=o(gt.prototype,{toString:function(){return Ge.that(!this._disposed,"Asset cannot be used after being disposed"),this._content},copyFrom:function(t){this._content=t._content},onDisposed:function(){this._content=null},__class__:wt});var xt=function(){};xt.__name__="flambe.subsystem.KeyboardSystem",xt.__isInterface__=!0,xt.prototype={__class__:xt};var yt=function(){this.down=new k,this.up=new k,this.backButton=new ze,this._keyStates=new Tn};yt.__name__="flambe.platform.BasicKeyboard",yt.__interfaces__=[xt],yt.prototype={isDown:function(t){return this._keyStates.h.hasOwnProperty(Ht.toKeyCode(t))},submitDown:function(t){return 16777238==t?null!=this.backButton._head&&(this.backButton.emit(),!0):(this._keyStates.h.hasOwnProperty(t)||(this._keyStates.h[t]=!0,yt._sharedEvent.init(yt._sharedEvent.id+1,Ht.toKey(t)),this.down.emit(yt._sharedEvent)),!0)},submitUp:function(t){this._keyStates.h.hasOwnProperty(t)&&(this._keyStates.remove(t),yt._sharedEvent.init(yt._sharedEvent.id+1,Ht.toKey(t)),this.up.emit(yt._sharedEvent))},__class__:yt};var St=function(){};St.__name__="flambe.subsystem.MouseSystem",St.__isInterface__=!0;var At=function(t){this._pointer=t,this._source=ht.Mouse(At._sharedEvent),this.down=new k,this.move=new k,this.up=new k,this.scroll=new k,this._x=0,this._y=0,this._cursor=lt.Default,this._buttonStates=new Tn};At.__name__="flambe.platform.BasicMouse",At.__interfaces__=[St],At.prototype={submitDown:function(t,e,n){this._buttonStates.h.hasOwnProperty(n)||(this._buttonStates.h[n]=!0,this.prepare(t,e,zt.toButton(n)),this._pointer.submitDown(t,e,this._source),this.down.emit(At._sharedEvent))},submitMove:function(t,e){this.prepare(t,e,null),this._pointer.submitMove(t,e,this._source),this.move.emit(At._sharedEvent)},submitUp:function(t,e,n){this._buttonStates.h.hasOwnProperty(n)&&(this._buttonStates.remove(n),this.prepare(t,e,zt.toButton(n)),this._pointer.submitUp(t,e,this._source),this.up.emit(At._sharedEvent))},submitScroll:function(t,e,n){return this._x=t,this._y=e,null!=this.scroll._head&&(this.scroll.emit(n),!0)},prepare:function(t,e,n){this._x=t,this._y=e,At._sharedEvent.init(At._sharedEvent.id+1,t,e,n)},__class__:At};var Ct=function(){};Ct.__name__="flambe.subsystem.PointerSystem",Ct.__isInterface__=!0,Ct.prototype={__class__:Ct};var Tt=function(t,e,n){null==n&&(n=!1),null==e&&(e=0),null==t&&(t=0),this.down=new k,this.move=new k,this.up=new k,this._x=t,this._y=e,this._isDown=n};Tt.__name__="flambe.platform.BasicPointer",Tt.__interfaces__=[Ct],Tt.prototype={get_x:function(){return this._x},get_y:function(){return this._y},isDown:function(){return this._isDown},submitDown:function(t,e,n){if(!this._isDown){this.submitMove(t,e,n),this._isDown=!0;var i=[],a=q.hitTest(P.root,t,e);if(null!=a){var r=a.owner;while(1){var s=r._compMap["Sprite_4"];if(null!=s&&i.push(s),r=r.parent,null==r)break}}this.prepare(t,e,a,n);var o=0;while(o<i.length){s=i[o];if(++o,s.onPointerDown(Tt._sharedEvent),Tt._sharedEvent._stopped)return}this.down.emit(Tt._sharedEvent)}},submitMove:function(t,e,n){if(t!=this._x||e!=this._y){var i=[],a=q.hitTest(P.root,t,e);if(null!=a){var r=a.owner;while(1){var s=r._compMap["Sprite_4"];if(null!=s&&i.push(s),r=r.parent,null==r)break}}this.prepare(t,e,a,n);var o=0;while(o<i.length){s=i[o];if(++o,s.onPointerMove(Tt._sharedEvent),Tt._sharedEvent._stopped)return}this.move.emit(Tt._sharedEvent)}},submitUp:function(t,e,n){if(this._isDown){this.submitMove(t,e,n),this._isDown=!1;var i=[],a=q.hitTest(P.root,t,e);if(null!=a){var r=a.owner;while(1){var s=r._compMap["Sprite_4"];if(null!=s&&i.push(s),r=r.parent,null==r)break}}this.prepare(t,e,a,n);var o=0;while(o<i.length){s=i[o];if(++o,s.onPointerUp(Tt._sharedEvent),Tt._sharedEvent._stopped)return}this.up.emit(Tt._sharedEvent)}},prepare:function(t,e,n,i){this._x=t,this._y=e,Tt._sharedEvent.init(Tt._sharedEvent.id+1,t,e,n,i)},__class__:Tt};var Et=function(t,e,n){this._y=0,this._x=0,this._parent=null,this.rootY=0,this.rootX=0,gt.call(this),this.root=t,this._width=e,this._height=n};Et.__name__="flambe.platform.BasicTexture",Et.__interfaces__=[it],Et.__super__=gt,Et.prototype=o(gt.prototype,{copyFrom:function(t){this.root._disposed=!1,this.root.copyFrom(t.root),this._width=t._width,this._height=t._height,Ge.that(this.rootX==t.rootX&&this.rootY==t.rootY&&this._x==t._x&&this._y==t._y)},onDisposed:function(){null==this._parent&&this.root.dispose()},get_reloadCount:function(){return this.root.get_reloadCount()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:Et});var kt=function(){};kt.__name__="flambe.subsystem.TouchSystem",kt.__isInterface__=!0;var Mt=function(t,e){null==e&&(e=4),this._pointer=t,this._maxPoints=e,this._pointMap=new Tn,this._points=[],this.down=new k,this.move=new k,this.up=new k};Mt.__name__="flambe.platform.BasicTouch",Mt.__interfaces__=[kt],Mt.prototype={submitDown:function(t,e,n){if(!this._pointMap.h.hasOwnProperty(t)){var i=new dt(t);i.init(e,n),this._pointMap.h[t]=i,this._points.push(i),null==this._pointerTouch&&(this._pointerTouch=i,this._pointer.submitDown(e,n,i._source)),this.down.emit(i)}},submitMove:function(t,e,n){var i=this._pointMap.h[t];null!=i&&(i.init(e,n),this._pointerTouch==i&&this._pointer.submitMove(e,n,i._source),this.move.emit(i))},submitUp:function(t,e,n){var i=this._pointMap.h[t];null!=i&&(i.init(e,n),this._pointMap.remove(t),l.remove(this._points,i),this._pointerTouch==i&&(this._pointerTouch=null,this._pointer.submitUp(e,n,i._source)),this.up.emit(i))},__class__:Mt};var Pt=function(){this._loaders=[]};Pt.__name__="flambe.platform.CatapultClient",Pt.prototype={add:function(t){"assets"==t.manifest.get_localBase()&&this._loaders.push(t)},remove:function(t){l.remove(this._loaders,t)},onError:function(t){R.logger.warn("Unable to connect to Catapult",["cause",t])},onMessage:function(t){var e=JSON.parse(t);switch(e.type){case"file_changed":var n=e.name+"?v="+e.md5;n=p.replace(n,"\\","/");var i=0,a=this._loaders;while(i<a.length){var r=a[i];++i,r.reload(n)}break;case"restart":this.onRestart();break}},onRestart:function(){Ge.fail()},__class__:Pt};var Dt=function(t){var e=this;this._platform=t,t.getKeyboard().down.connect((function(n){n.key==st.O&&t.getKeyboard().isDown(st.Control)&&e.toggleOverdrawGraphics()&&R.logger.info("Enabled overdraw visualizer, press Ctrl-O again to disable",null)}))};Dt.__name__="flambe.platform.DebugLogic",Dt.prototype={toggleOverdrawGraphics:function(){var t=this._platform.getRenderer();if(null!=this._savedGraphics)t.graphics=this._savedGraphics,this._savedGraphics=null;else if(null!=t.graphics)return this._savedGraphics=t.graphics,t.graphics=new qt(this._savedGraphics),!0;return!1},__class__:Dt};var Rt=function(){};Rt.__name__="flambe.sound.Sound",Rt.__isInterface__=!0,Rt.__interfaces__=[V];var Lt=function(){gt.call(this),this._playback=new It(this)};Lt.__name__="flambe.platform.DummySound",Lt.__interfaces__=[Rt],Lt.getInstance=function(){return null==Lt._instance&&(Lt._instance=new Lt),Lt._instance},Lt.__super__=gt,Lt.prototype=o(gt.prototype,{copyFrom:function(t){},onDisposed:function(){},__class__:Lt});var Ft=function(){};Ft.__name__="flambe.sound.Playback",Ft.__isInterface__=!0,Ft.__interfaces__=[g];var It=function(t){this._sound=t,this.volume=new M(0),this._complete=new A(!0)};It.__name__="flambe.platform.DummyPlayback",It.__interfaces__=[Ft],It.prototype={dispose:function(){},__class__:It};var Bt=function(){};Bt.__name__="flambe.subsystem.StorageSystem",Bt.__isInterface__=!0;var Nt=function(){this.clear()};Nt.__name__="flambe.platform.DummyStorage",Nt.__interfaces__=[Bt],Nt.prototype={clear:function(){this._hash=new En},__class__:Nt};var Ot=function(){this.down=new k,this.move=new k,this.up=new k};Ot.__name__="flambe.platform.DummyTouch",Ot.__interfaces__=[kt],Ot.prototype={__class__:Ot};var Vt=function(){this._entries=[]};Vt.__name__="flambe.platform.EventGroup",Vt.__interfaces__=[g],Vt.prototype={addListener:function(t,e,n){t.addEventListener(e,n,!1),this._entries.push(new Ut(t,e,n))},addDisposingListener:function(t,e,n){var i=this;this.addListener(t,e,(function(t){i.dispose(),n(t)}))},dispose:function(){var t=0,e=this._entries;while(t<e.length){var n=e[t];++t,n.dispatcher.removeEventListener(n.type,n.listener,!1)}this._entries=[]},__class__:Vt};var Ut=function(t,e,n){this.dispatcher=t,this.type=e,this.listener=n};Ut.__name__="flambe.platform._EventGroup.Entry",Ut.prototype={__class__:Ut};var Kt=function(t){k.call(this,t),this.hasListenersValue=new A(null!=this._head)};Kt.__name__="flambe.platform.HeavySignal1",Kt.__super__=k,Kt.prototype=o(k.prototype,{connect:function(t,e){null==e&&(e=!1);var n=k.prototype.connect.call(this,t,e);return this.hasListenersValue.set__(null!=this._head),n},disconnect:function(t){k.prototype.disconnect.call(this,t),this.hasListenersValue.set__(null!=this._head)},didEmit:function(t){k.prototype.didEmit.call(this,t),this.hasListenersValue.set__(null!=this._head)},__class__:Kt});var Xt=function(){};Xt.__name__="flambe.platform.InternalGraphics",Xt.__isInterface__=!0,Xt.__interfaces__=[$],Xt.prototype={__class__:Xt};var Yt=function(){};Yt.__name__="flambe.subsystem.RendererSystem",Yt.__isInterface__=!0,Yt.prototype={__class__:Yt};var Gt=function(){};Gt.__name__="flambe.platform.InternalRenderer",Gt.__isInterface__=!0,Gt.__interfaces__=[Yt],Gt.prototype={__class__:Gt};var Ht=function(){};Ht.__name__="flambe.platform.KeyCodes",Ht.toKey=function(t){switch(t){case 8:return st.Backspace;case 9:return st.Tab;case 13:return st.Enter;case 15:return st.Command;case 16:return st.Shift;case 17:return st.Control;case 18:return st.Alt;case 20:return st.CapsLock;case 27:return st.Escape;case 32:return st.Space;case 33:return st.PageUp;case 34:return st.PageDown;case 35:return st.End;case 36:return st.Home;case 37:return st.Left;case 38:return st.Up;case 39:return st.Right;case 40:return st.Down;case 45:return st.Insert;case 46:return st.Delete;case 48:return st.Number0;case 49:return st.Number1;case 50:return st.Number2;case 51:return st.Number3;case 52:return st.Number4;case 53:return st.Number5;case 54:return st.Number6;case 55:return st.Number7;case 56:return st.Number8;case 57:return st.Number9;case 65:return st.A;case 66:return st.B;case 67:return st.C;case 68:return st.D;case 69:return st.E;case 70:return st.F;case 71:return st.G;case 72:return st.H;case 73:return st.I;case 74:return st.J;case 75:return st.K;case 76:return st.L;case 77:return st.M;case 78:return st.N;case 79:return st.O;case 80:return st.P;case 81:return st.Q;case 82:return st.R;case 83:return st.S;case 84:return st.T;case 85:return st.U;case 86:return st.V;case 87:return st.W;case 88:return st.X;case 89:return st.Y;case 90:return st.Z;case 96:return st.Numpad0;case 97:return st.Numpad1;case 98:return st.Numpad2;case 99:return st.Numpad3;case 100:return st.Numpad4;case 101:return st.Numpad5;case 102:return st.Numpad6;case 103:return st.Numpad7;case 104:return st.Numpad8;case 105:return st.Numpad9;case 106:return st.NumpadMultiply;case 107:return st.NumpadAdd;case 108:return st.NumpadEnter;case 109:return st.NumpadSubtract;case 110:return st.NumpadDecimal;case 111:return st.NumpadDivide;case 112:return st.F1;case 113:return st.F2;case 114:return st.F3;case 115:return st.F4;case 116:return st.F5;case 117:return st.F6;case 118:return st.F7;case 119:return st.F8;case 120:return st.F9;case 121:return st.F10;case 122:return st.F11;case 123:return st.F12;case 186:return st.Semicolon;case 187:return st.Equals;case 188:return st.Comma;case 189:return st.Minus;case 190:return st.Period;case 191:return st.Slash;case 192:return st.Backquote;case 219:return st.LeftBracket;case 220:return st.Backslash;case 221:return st.RightBracket;case 222:return st.Quote;case 16777234:return st.Menu;case 16777247:return st.Search}return st.Unknown(t)},Ht.toKeyCode=function(t){switch(t._hx_index){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return t.keyCode}};var Wt=function(){this._tickables=[]};Wt.__name__="flambe.platform.MainLoop",Wt.updateEntity=function(t,e){var n=t._compMap["SpeedAdjuster_16"];if(null!=n&&(n._realDt=e,e*=n.scale._value,e<=0))n.onUpdate(e);else{var i=t.firstComponent;while(null!=i){var a=i.next;0==(1&i._flags)&&(i._flags|=1,i.onStart()),i.onUpdate(e),i=a}i=t.firstChild;while(null!=i){a=i.next;Wt.updateEntity(i,e),i=a}}},Wt.prototype={update:function(t){if(t<=0)R.logger.warn("Zero or negative time elapsed since the last frame!",["dt",t]);else{t>1&&(t=1);var e=0;while(e<this._tickables.length){var n=this._tickables[e];null==n||n.update(t)?this._tickables.splice(e,1):++e}P.volume.update(t),Wt.updateEntity(P.root,t)}},render:function(t){var e=t.graphics;null!=e&&(t.willRender(),q.render(P.root,e),t.didRender())},__class__:Wt};var jt=function(){};jt.__name__="flambe.platform.MathUtil",jt.nextPowerOfTwo=function(t){var e=1;while(e<t)e<<=1;return e};var zt=function(){};zt.__name__="flambe.platform.MouseCodes",zt.toButton=function(t){switch(t){case 0:return _t.Left;case 1:return _t.Middle;case 2:return _t.Right}return _t.Unknown(t)};var qt=function(t){this._impl=t};qt.__name__="flambe.platform.OverdrawGraphics",qt.__interfaces__=[Xt],qt.prototype={save:function(){this._impl.save()},translate:function(t,e){this._impl.translate(t,e)},scale:function(t,e){this._impl.scale(t,e)},rotate:function(t){this._impl.rotate(t)},transform:function(t,e,n,i,a,r){this._impl.transform(t,e,n,i,a,r)},multiplyAlpha:function(t){},setBlendMode:function(t){},applyScissor:function(t,e,n,i){this._impl.applyScissor(t,e,n,i)},restore:function(){this._impl.restore()},drawTexture:function(t,e,n){this.drawRegion(e,n,t.get_width(),t.get_height())},fillRect:function(t,e,n,i,a){this.drawRegion(e,n,i,a)},willRender:function(){this._impl.willRender(),this._impl.save(),this._impl.setBlendMode(H.Add)},didRender:function(){this._impl.restore(),this._impl.didRender()},onResize:function(t,e){this._impl.onResize(t,e)},drawRegion:function(t,e,n,i){this._impl.fillRect(1052680,t,e,n,i)},__class__:qt};var Qt=function(){};Qt.__name__="flambe.platform.TextureRoot",Qt.__isInterface__=!0;var Jt=function(){};Jt.__name__="flambe.platform.Tickable",Jt.__isInterface__=!0,Jt.prototype={__class__:Jt};var Zt=function(t,e){this._firstDraw=!1,this._canvasCtx=t.getContext("2d",{alpha:e})};Zt.__name__="flambe.platform.html.CanvasGraphics",Zt.__interfaces__=[Xt],Zt.prototype={save:function(){this._canvasCtx.save()},translate:function(t,e){this._canvasCtx.translate(0|t,0|e)},scale:function(t,e){this._canvasCtx.scale(t,e)},rotate:function(t){this._canvasCtx.rotate(3.141592653589793*t/180)},transform:function(t,e,n,i,a,r){this._canvasCtx.transform(t,e,n,i,a,r)},restore:function(){this._canvasCtx.restore()},drawTexture:function(t,e,n){this.drawSubTexture(t,e,n,0,0,t.get_width(),t.get_height())},drawSubTexture:function(t,e,n,i,a,r,s){if(this._firstDraw)return this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(t,e,n,i,a,r,s),void(this._canvasCtx.globalCompositeOperation="source-over");var o=t,_=o.root;Ge.that(!_._disposed,"Asset cannot be used after being disposed"),this._canvasCtx.drawImage(_.image,o.rootX+i|0,o.rootY+a|0,0|r,0|s,0|e,0|n,0|r,0|s)},fillRect:function(t,e,n,i,a){if(this._firstDraw)return this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(t,e,n,i,a),void(this._canvasCtx.globalCompositeOperation="source-over");var r=(16777215&t).toString(16);while(r.length<6)r="0"+r;this._canvasCtx.fillStyle="#"+r,this._canvasCtx.fillRect(0|e,0|n,0|i,0|a)},multiplyAlpha:function(t){this._canvasCtx.globalAlpha*=t},setBlendMode:function(t){var e;switch(t._hx_index){case 0:e="source-over";break;case 1:e="lighter";break;case 2:e="multiply";break;case 3:e="screen";break;case 4:e="destination-in";break;case 5:e="copy";break}this._canvasCtx.globalCompositeOperation=e},applyScissor:function(t,e,n,i){this._canvasCtx.beginPath(),this._canvasCtx.rect(0|t,0|e,0|n,0|i),this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(t,e){},__class__:Zt};var $t=function(t){this.graphics=new Zt(t,!0),this._hasGPU=new A(!0)};$t.__name__="flambe.platform.html.CanvasRenderer",$t.__interfaces__=[Gt],$t.prototype={get_type:function(){return Ye.Canvas},createTextureFromImage:function(t){var e=new ee($t.CANVAS_TEXTURES?me.createCanvas(t):t);return e.createTexture(e.width,e.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(t,e){return Ge.fail(),null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:$t};var te=function(t,e,n){Et.call(this,t,e,n)};te.__name__="flambe.platform.html.CanvasTexture",te.__super__=Et,te.prototype=o(Et.prototype,{__class__:te});var ee=function(t){this._graphics=null,this.updateCount=0,gt.call(this),this.image=t,this.width=t.width,this.height=t.height};ee.__name__="flambe.platform.html.CanvasTextureRoot",ee.__interfaces__=[Qt],ee.__super__=gt,ee.prototype=o(gt.prototype,{createTexture:function(t,e){return new te(this,t,e)},copyFrom:function(t){this.image=t.image,this._graphics=t._graphics,++this.updateCount},onDisposed:function(){this.image=null,this._graphics=null},__class__:ee});var ne=function(t,e){vt.call(this,t,e)};ne.__name__="flambe.platform.html.HtmlAssetPackLoader",ne.detectImageFormats=function(t){var e=[U.PNG,U.JPG,U.GIF],n=2,i=function(){n-=1,0==n&&t(e)},a=window.document.createElement("img");a.onload=a.onerror=function(t){1==a.width&&e.unshift(U.WEBP),i()},a.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var r=window.document.createElement("img");r.onload=r.onerror=function(t){1==r.width&&e.unshift(U.JXR),i()},r.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="},ne.detectAudioFormats=function(){var t=window.document.createElement("audio");if(null==t||null==t.canPlayType)return R.logger.warn("Audio is not supported at all in this browser!",null),[];var e=new _("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),n=i.navigator.userAgent;if(!be.get_supported()&&e.match(n))return R.logger.warn("HTML5 audio is blacklisted for this browser",["userAgent",n]),[];var a=[{format:U.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:U.MP3,mimeType:"audio/mpeg"},{format:U.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:U.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:U.WAV,mimeType:"audio/wav"}],r=[],s=0;while(s<a.length){var o=a[s];++s;var l="";try{l=t.canPlayType(o.mimeType)}catch(u){}""!=l&&r.push(o.format)}return r},ne.supportsBlob=function(){if(ne._detectBlobSupport){if(ne._detectBlobSupport=!1,new _("\\bSilk\\b","").match(i.navigator.userAgent))return!1;if(null==window.Blob)return!1;var t=new XMLHttpRequest;if(t.open("GET",".",!0),""!=t.responseType)return!1;if(t.responseType="blob","blob"!=t.responseType)return!1;ne._URL=me.loadExtension("URL").value}return null!=ne._URL&&null!=ne._URL.createObjectURL},ne.__super__=vt,ne.prototype=o(vt.prototype,{loadEntry:function(t,e){var n=this;switch(e.format._hx_index){case 0:case 1:case 2:case 3:case 4:var i=window.document.createElement("img"),a=new Vt;a.addDisposingListener(i,"load",(function(a){(i.width>1024||i.height>1024)&&R.logger.warn("Images larger than 1024px on a side will prevent GPU acceleration on some platforms (iOS)",["url",t,"width",i.width,"height",i.height]),ne.supportsBlob()&&ne._URL.revokeObjectURL(i.src);var r=n._platform.getRenderer().createTextureFromImage(i);null!=r?n.handleLoad(e,r):n.handleTextureError(e)})),a.addDisposingListener(i,"error",(function(t){n.handleError(e,"Failed to load image")})),ne.supportsBlob()?this.download(t,e,"blob",(function(t){i.src=ne._URL.createObjectURL(t)})):i.src=t;break;case 5:case 6:case 7:this.download(t,e,"arraybuffer",(function(t){var i=n._platform.getRenderer().createCompressedTexture(e.format,null);null!=i?n.handleLoad(e,i):n.handleTextureError(e)}));break;case 8:case 9:case 10:case 11:case 12:if(be.get_supported())this.download(t,e,"arraybuffer",(function(i){be.ctx.decodeAudioData(i,(function(t){n.handleLoad(e,new be(t))}),(function(){R.logger.warn("Couldn't decode Web Audio, ignoring this asset",["url",t]),n.handleLoad(e,Lt.getInstance())}))}));else{var r=window.document.createElement("audio");r.preload="auto";var s=++ne._mediaRefCount;null==ne._mediaElements&&(ne._mediaElements=new Tn),ne._mediaElements.h[s]=r;a=new Vt;a.addDisposingListener(r,"canplaythrough",(function(t){ne._mediaElements.remove(s),n.handleLoad(e,new he(r))})),a.addDisposingListener(r,"error",(function(i){ne._mediaElements.remove(s);var a=r.error.code;3==a||4==a?(R.logger.warn("Couldn't decode HTML5 audio, ignoring this asset",["url",t,"code",a]),n.handleLoad(e,Lt.getInstance())):n.handleError(e,"Failed to load audio: "+r.error.code)})),a.addListener(r,"progress",(function(t){if(r.buffered.length>0&&r.duration>0){var i=r.buffered.end(0)/r.duration;n.handleProgress(e,i*e.bytes|0)}})),r.src=t,r.load()}break;case 13:this.download(t,e,"text",(function(t){n.handleLoad(e,new wt(t))}));break}},getAssetFormats:function(t){var e=this;null==ne._supportedFormats&&(ne._supportedFormats=new je,ne.detectImageFormats((function(t){ne._supportedFormats.set_result(e._platform.getRenderer().getCompressedTextureFormats().concat(t).concat(ne.detectAudioFormats()).concat([U.Data]))}))),ne._supportedFormats.get(t)},download:function(t,e,n,i){var a=this,r=null,s=null,o=0,_=!1,l=function(){_&&(_=!1,window.clearInterval(o))},u=3,h=function(){return u-=1,u>=0&&(R.logger.warn("Retrying asset download",["url",e.url]),s(),!0)};s=function(){l(),null!=r&&r.abort(),r=new XMLHttpRequest,r.open("GET",t,!0),r.responseType=n;var s=0;r.onprogress=function(t){_||(_=!0,o=window.setInterval((function(){4!=r.readyState&&Date.now()-s>5e3&&(h()||(l(),a.handleError(e,"Download stalled")))}),1e3)),s=Date.now(),a.handleProgress(e,t.loaded)},r.onerror=function(t){0==r.status&&h()||(l(),a.handleError(e,"HTTP error "+r.status))},r.onload=function(t){var e=r.response;null==e&&(e=r.responseText),l(),i(e)},r.send()},s()},__class__:ne});var ie=function(){var t=this;Pt.call(this),this._socket=new WebSocket("ws://"+i.location.host),this._socket.onerror=function(e){t.onError("unknown")},this._socket.onopen=function(t){R.logger.info("Catapult connected",null)},this._socket.onmessage=function(e){t.onMessage(e.data)}};ie.__name__="flambe.platform.html.HtmlCatapultClient",ie.canUse=function(){return!1},ie.__super__=Pt,ie.prototype=o(Pt.prototype,{onRestart:function(){window.top.location.reload()},__class__:ie});var ae=function(){};ae.__name__="flambe.subsystem.ExternalSystem",ae.__isInterface__=!0;var re=function(){};re.__name__="flambe.platform.html.HtmlExternal",re.__interfaces__=[ae],re.prototype={__class__:re};var se=function(){};se.__name__="flambe.util.LogHandler",se.__isInterface__=!0,se.prototype={__class__:se};var oe=function(t){this._tagPrefix=t+": "};oe.__name__="flambe.platform.html.HtmlLogHandler",oe.__interfaces__=[se],oe.isSupported=function(){return"object"==typeof console&&null!=console.info},oe.prototype={log:function(t,e){switch(e=this._tagPrefix+e,t._hx_index){case 0:console.info(e);break;case 1:console.warn(e);break;case 2:console.error(e);break}},__class__:oe};var _e=function(){};_e.__name__="flambe.subsystem.MotionSystem",_e.__isInterface__=!0;var le=function(){var t=this,e=new Kt;this.acceleration=e;var n=new Kt;this.accelerationIncludingGravity=n;var i=new Kt;if(this.attitude=i,this.get_accelerationSupported()){this._sharedAcceleration=new at,this._sharedAccelerationIncludingGravity=new at;var a=null,r=function(i,r){null!=e._head||null!=n._head?null==a&&(a=new Vt,a.addListener(window,"devicemotion",Un(t,t.onDeviceMotion))):null!=a&&(a.dispose(),a=null)};e.hasListenersValue.get_changed().connect(r),n.hasListenersValue.get_changed().connect(r)}if(this.get_attitudeSupported()){this._sharedAttitude=new rt;var s=null;i.hasListenersValue.get_changed().connect((function(e,n){e?(s=new Vt,s.addListener(window,"deviceorientation",Un(t,t.onDeviceOrientation))):(s.dispose(),s=null)}))}};le.__name__="flambe.platform.html.HtmlMotion",le.__interfaces__=[_e],le.initAcceleration=function(t,e){switch(window.orientation){case-90:t.init(e.y,-e.x,e.z);break;case 0:t.init(e.x,e.y,e.z);break;case 90:t.init(-e.y,e.x,e.z);break;case 180:t.init(-e.x,-e.y,e.z);break}},le.prototype={get_accelerationSupported:function(){return null!=window.DeviceMotionEvent},onDeviceMotion:function(t){null!=t.acceleration&&(le.initAcceleration(this._sharedAcceleration,t.acceleration),this.acceleration.emit(this._sharedAcceleration)),null!=t.accelerationIncludingGravity&&(le.initAcceleration(this._sharedAccelerationIncludingGravity,t.accelerationIncludingGravity),this.accelerationIncludingGravity.emit(this._sharedAccelerationIncludingGravity))},get_attitudeSupported:function(){return null!=window.DeviceOrientationEvent},onDeviceOrientation:function(t){switch(window.orientation){case-90:this._sharedAttitude.init(t.gamma,-t.beta,t.alpha);break;case 0:this._sharedAttitude.init(t.beta,t.gamma,t.alpha);break;case 90:this._sharedAttitude.init(-t.gamma,t.beta,t.alpha);break;case 180:this._sharedAttitude.init(-t.beta,-t.gamma,t.alpha);break}this.attitude.emit(this._sharedAttitude)},__class__:le};var ue=function(t,e){At.call(this,t),this._canvas=e};ue.__name__="flambe.platform.html.HtmlMouse",ue.__super__=At,ue.prototype=o(At.prototype,{__class__:ue});var he=function(t){gt.call(this),this.audioElement=t};he.__name__="flambe.platform.html.HtmlSound",he.__interfaces__=[Rt],he.__super__=gt,he.prototype=o(gt.prototype,{copyFrom:function(t){this.audioElement=t.audioElement},onDisposed:function(){this.audioElement=null},__class__:he});var ce=function(){};ce.__name__="flambe.subsystem.StageSystem",ce.__isInterface__=!0,ce.prototype={__class__:ce};var de=function(t){var e=this;this._canvas=t,this.resize=new ze,this.scaleFactor=de.computeScaleFactor(),1!=this.scaleFactor&&(R.logger.info("Reversing device DPI scaling",["scaleFactor",this.scaleFactor]),me.setVendorStyle(this._canvas,"transform-origin","top left"),me.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")")),me.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",(function(t){me.callLater(Un(e,e.hideMobileBrowser),200)}),!1),this.hideMobileBrowser()),window.addEventListener("resize",Un(this,this.onWindowResize),!1),this.onWindowResize(null),this.orientation=new A(null),null!=window.orientation&&(window.addEventListener("orientationchange",Un(this,this.onOrientationChange),!1),this.onOrientationChange(null)),this.fullscreen=new A(!1),me.addVendorListener(window.document,"fullscreenchange",(function(t){e.updateFullscreen()}),!1),me.addVendorListener(window.document,"fullscreenerror",(function(t){R.logger.warn("Error when requesting fullscreen",null)}),!1),this.updateFullscreen()};de.__name__="flambe.platform.html.HtmlStage",de.__interfaces__=[ce],de.computeScaleFactor=function(){var t=window.devicePixelRatio;null==t&&(t=1);var e=window.document.createElement("canvas"),n=e.getContext("2d",null),i=me.loadExtension("backingStorePixelRatio",n).value;null==i&&(i=1);var a=t/i,r=window.screen.width,s=window.screen.height;return a*r>1136||a*s>1136?1:a},de.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(t){var e=this._canvas.parentElement,n=e.getBoundingClientRect();this.resizeCanvas(n.width,n.height)},resizeCanvas:function(t,e){var n=this.scaleFactor*t,i=this.scaleFactor*e;return(this._canvas.width!=n||this._canvas.height!=i)&&(this._canvas.width=0|n,this._canvas.height=0|i,this.resize.emit(),!0)},hideMobileBrowser:function(){var t=this,e=window.document.documentElement.style,n=c.string(window.innerHeight+100);e.height=n+"px";n=c.string(window.innerWidth);e.width=n+"px",e.overflow="visible",me.callLater((function(){me.hideMobileBrowser(),me.callLater((function(){var n=c.string(window.innerHeight);e.height=n+"px",t.onWindowResize(null)}),100)}))},onOrientationChange:function(t){var e=me.orientation(window.orientation);this.orientation.set__(e)},updateFullscreen:function(){var t=me.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value;this.fullscreen.set__(1==t)},__class__:de};var pe=function(t){this._storage=t};pe.__name__="flambe.platform.html.HtmlStorage",pe.__interfaces__=[Bt],pe.prototype={__class__:pe};var me=function(){};me.__name__="flambe.platform.html.HtmlUtil",me.callLater=function(t,e){null==e&&(e=0),window.setTimeout(t,e)},me.hideMobileBrowser=function(){window.scrollTo(1,0)},me.loadExtension=function(t,e){null==e&&(e=window);var n=h.field(e,t);if(null!=n)return{prefix:"",field:t,value:n};var i=t.charAt(0).toUpperCase()+l.substr(t,1,null),a=0,r=me.VENDOR_PREFIXES;while(a<r.length){var s=r[a];++a;var o=s+i;n=h.field(e,o);if(null!=n)return{prefix:s,field:o,value:n}}return{prefix:null,field:null,value:null}},me.loadFirstExtension=function(t,e){var n=0;while(n<t.length){var i=t[n];++n;var a=me.loadExtension(i,e);if(null!=a.field)return a}return{prefix:null,field:null,value:null}},me.polyfill=function(t,e){null==e&&(e=window);var n=me.loadExtension(t,e).value;return null!=n&&(e[t]=n,!0)},me.setVendorStyle=function(t,e,n){var i=t.style,a=0,r=me.VENDOR_PREFIXES;while(a<r.length){var s=r[a];++a,i.setProperty("-"+s+"-"+e,n)}i.setProperty(e,n)},me.addVendorListener=function(t,e,n,i){var a=0,r=me.VENDOR_PREFIXES;while(a<r.length){var s=r[a];++a,t.addEventListener(s+e,n,i)}t.addEventListener(e,n,i)},me.orientation=function(t){switch(t){case-90:case 90:return et.Landscape;default:return et.Portrait}},me.createEmptyCanvas=function(t,e){var n=window.document.createElement("canvas");return n.width=t,n.height=e,n},me.createCanvas=function(t){var e=me.createEmptyCanvas(t.width,t.height),n=e.getContext("2d",null);return n.save(),n.globalCompositeOperation="copy",n.drawImage(t,0,0),n.restore(),e},me.detectSlowDriver=function(t){var e=i.navigator.platform.indexOf("Win")>=0;if(e){var n=null!=window.chrome;if(n){var a=0,r=t.getSupportedExtensions();while(a<r.length){var s=r[a];if(++a,s.indexOf("WEBGL_compressed_texture")>=0)return!1}return!0}}return!1},me.fixAndroidMath=function(){if(i.navigator.userAgent.indexOf("Linux; U; Android 4")>=0){R.logger.warn("Monkey patching around Android sin/cos bug",null);var t=Math.sin,e=Math.cos;Math.sin=function(e){return 0==e?0:t(e)},Math.cos=function(t){return 0==t?1:e(t)}}};var fe=function(){};fe.__name__="flambe.subsystem.WebSystem",fe.__isInterface__=!0;var ge=function(){this.stack=[]};ge.__name__="flambe.platform.html.HtmlWeb",ge.__interfaces__=[fe],ge.prototype={__class__:ge};var ve=function(){};ve.__name__="flambe.web.WebView",ve.__isInterface__=!0,ve.__interfaces__=[g];var be=function(t){gt.call(this),this.buffer=t};be.__name__="flambe.platform.html.WebAudioSound",be.__interfaces__=[Rt],be.get_supported=function(){if(be._detectSupport){be._detectSupport=!1;var t=me.loadExtension("AudioContext").value;null!=t&&(be.ctx=new t,be.gain=be.createGain(),be.gain.connect(be.ctx.destination),P.volume.watch((function(t,e){be.gain.gain.value=t})))}return null!=be.ctx},be.createGain=function(){return null!=be.ctx.createGain?be.ctx.createGain():be.ctx.createGainNode()},be.__super__=gt,be.prototype=o(gt.prototype,{copyFrom:function(t){this.buffer=t.buffer},onDisposed:function(){this.buffer=null},__class__:be});var we=function(t){this._backbufferHeight=0,this._backbufferWidth=0,this._dataOffset=0,this._maxQuads=0,this._quads=0,this._pendingSetScissor=!1,this._currentRenderTarget=null,this._currentTexture=null,this._currentShader=null,this._currentBlendMode=null,this._lastScissor=null,this._lastTexture=null,this._lastShader=null,this._lastRenderTarget=null,this._lastBlendMode=null,this._gl=t,t.clearColor(0,0,0,0),t.enable(3042),t.pixelStorei(37441,1),this._vertexBuffer=t.createBuffer(),t.bindBuffer(34962,this._vertexBuffer),this._quadIndexBuffer=t.createBuffer(),t.bindBuffer(34963,this._quadIndexBuffer),this._drawTextureShader=new ke(t),this._drawPatternShader=new Ee(t),this._fillRectShader=new Me(t),this.resize(16)};we.__name__="flambe.platform.html.WebGLBatcher",we.prototype={resizeBackbuffer:function(t,e){this._gl.viewport(0,0,t,e),this._backbufferWidth=t,this._backbufferHeight=e},willRender:function(){this._gl.clear(16384)},didRender:function(){this.flush()},bindTexture:function(t){this.flush(),this._lastTexture=null,this._currentTexture=null,this._gl.bindTexture(3553,t)},deleteTexture:function(t){null!=this._lastTexture&&this._lastTexture.root==t&&(this.flush(),this._lastTexture=null,this._currentTexture=null),this._gl.deleteTexture(t.nativeTexture)},deleteFramebuffer:function(t){t==this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=null,this._currentRenderTarget=null),this._gl.deleteFramebuffer(t.framebuffer)},prepareDrawTexture:function(t,e,n,i){return i!=this._lastTexture&&(this.flush(),this._lastTexture=i),this.prepareQuad(5,t,e,n,this._drawTextureShader)},prepareFillRect:function(t,e,n){return this.prepareQuad(6,t,e,n,this._fillRectShader)},prepareQuad:function(t,e,n,i,a){e!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=e),n!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=n),a!=this._lastShader&&(this.flush(),this._lastShader=a),null==i&&null==this._lastScissor||null!=i&&null!=this._lastScissor&&this._lastScissor.equals(i)||(this.flush(),this._lastScissor=null!=i?i.clone(this._lastScissor):null,this._pendingSetScissor=!0),this._quads>=this._maxQuads&&this.resize(2*this._maxQuads),++this._quads;var r=this._dataOffset;return this._dataOffset+=4*t,r},flush:function(){if(!(this._quads<1)){if(this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget),this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode._hx_index){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0);break}this._currentBlendMode=this._lastBlendMode}if(this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(0|this._lastScissor.x,0|this._lastScissor.y,0|this._lastScissor.width,0|this._lastScissor.height)):this._gl.disable(3089),this._pendingSetScissor=!1),this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture),this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader),this._lastShader==this._drawPatternShader){var t=this._lastTexture,e=t.root;this._drawPatternShader.setRegion(t.rootX/e.width,t.rootY/e.height,t._width/e.width,t._height/e.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040),this._gl.drawElements(4,6*this._quads,5123,0),this._quads=0,this._dataOffset=0}},resize:function(t){if(this.flush(),!(t>1024)){this._maxQuads=t,this.data=new Float32Array(4*t*6),this._gl.bufferData(34962,this.data.length*Float32Array.BYTES_PER_ELEMENT,35040);var e=new Uint16Array(6*t),n=0;while(n<t){var i=n++;e[6*i]=4*i,e[6*i+1]=4*i+1,e[6*i+2]=4*i+2,e[6*i+3]=4*i+2,e[6*i+4]=4*i+3,e[6*i+5]=4*i}this._gl.bufferData(34963,e,35044)}},bindRenderTarget:function(t){null!=t?(this._gl.bindFramebuffer(36160,t.framebuffer),this._gl.viewport(0,0,t.width,t.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight)),this._currentRenderTarget=t,this._lastRenderTarget=t},__class__:we};var xe=function(t,e){this._stateList=null,this._inverseProjection=null,null==xe._scratchQuadArray&&(xe._scratchQuadArray=new Float32Array(8)),this._batcher=t,this._renderTarget=e};xe.__name__="flambe.platform.html.WebGLGraphics",xe.__interfaces__=[Xt],xe.prototype={save:function(){var t=this._stateList,e=this._stateList.next;null==e&&(e=new ye,e.prev=t,t.next=e),t.matrix.clone(e.matrix),e.alpha=t.alpha,e.blendMode=t.blendMode,e.scissor=null!=t.scissor?t.scissor.clone(e.scissor):null,this._stateList=e},translate:function(t,e){var n=this._stateList.matrix;n.m02+=n.m00*t+n.m01*e,n.m12+=n.m10*t+n.m11*e},scale:function(t,e){var n=this._stateList.matrix;n.m00*=t,n.m10*=t,n.m01*=e,n.m11*=e},rotate:function(t){var e=this._stateList.matrix;t=3.141592653589793*t/180;var n=Math.sin(t),i=Math.cos(t),a=e.m00,r=e.m10,s=e.m01,o=e.m11;e.m00=a*i+s*n,e.m10=r*i+o*n,e.m01=s*i-a*n,e.m11=o*i-r*n},transform:function(t,e,n,i,a,r){var s=this._stateList;xe._scratchMatrix.set(t,e,n,i,a,r),mt.multiply(s.matrix,xe._scratchMatrix,s.matrix)},restore:function(){Ge.that(null!=this._stateList.prev,"Can't restore without a previous save"),this._stateList=this._stateList.prev},drawTexture:function(t,e,n){this.drawSubTexture(t,e,n,0,0,t.get_width(),t.get_height())},drawSubTexture:function(t,e,n,i,a,r,s){var o=this._stateList,_=t,l=_.root;Ge.that(!l._disposed,"Asset cannot be used after being disposed");var u=this.transformQuad(e,n,r,s),h=l.width,c=l.height,d=(_.rootX+i)/h,p=(_.rootY+a)/c,m=d+r/h,f=p+s/c,g=o.alpha,v=this._batcher.prepareDrawTexture(this._renderTarget,o.blendMode,o.scissor,_),b=this._batcher.data;b[v]=u[0],b[++v]=u[1],b[++v]=d,b[++v]=p,b[++v]=g,b[++v]=u[2],b[++v]=u[3],b[++v]=m,b[++v]=p,b[++v]=g,b[++v]=u[4],b[++v]=u[5],b[++v]=m,b[++v]=f,b[++v]=g,b[++v]=u[6],b[++v]=u[7],b[++v]=d,b[++v]=f,b[++v]=g},fillRect:function(t,e,n,i,a){var r=this._stateList,s=this.transformQuad(e,n,i,a),o=(16711680&t)/16711680,_=(65280&t)/65280,l=(255&t)/255,u=r.alpha,h=this._batcher.prepareFillRect(this._renderTarget,r.blendMode,r.scissor),c=this._batcher.data;c[h]=s[0],c[++h]=s[1],c[++h]=o,c[++h]=_,c[++h]=l,c[++h]=u,c[++h]=s[2],c[++h]=s[3],c[++h]=o,c[++h]=_,c[++h]=l,c[++h]=u,c[++h]=s[4],c[++h]=s[5],c[++h]=o,c[++h]=_,c[++h]=l,c[++h]=u,c[++h]=s[6],c[++h]=s[7],c[++h]=o,c[++h]=_,c[++h]=l,c[++h]=u},multiplyAlpha:function(t){this._stateList.alpha*=t},setBlendMode:function(t){this._stateList.blendMode=t},applyScissor:function(t,e,n,i){var a=this._stateList,r=xe._scratchQuadArray;r[0]=t,r[1]=e,r[2]=t+n,r[3]=e+i,a.matrix.transformArray(r,4,r),this._inverseProjection.transformArray(r,4,r),t=r[0],e=r[1],n=r[2]-t,i=r[3]-e,n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),a.applyScissor(t,e,n,i)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(t,e){this._stateList=new ye;var n=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/t,0,0,-2*n/e,-1,n),this._inverseProjection=new mt,this._inverseProjection.set(2/t,0,0,2/e,-1,-1),this._inverseProjection.invert()},transformQuad:function(t,e,n,i){var a=t+n,r=e+i,s=xe._scratchQuadArray;return s[0]=t,s[1]=e,s[2]=a,s[3]=e,s[4]=a,s[5]=r,s[6]=t,s[7]=r,this._stateList.matrix.transformArray(s,8,s),s},__class__:xe};var ye=function(){this.next=null,this.prev=null,this.scissor=null,this.matrix=new mt,this.alpha=1,this.blendMode=H.Normal};ye.__name__="flambe.platform.html._WebGLGraphics.DrawingState",ye.prototype={applyScissor:function(t,e,n,i){if(null!=this.scissor){var a=this.scissor.x,r=a>t?a:t,s=(a=this.scissor.y,a>e?a:e),o=(a=this.scissor.x+this.scissor.width,t+n),_=a<o?a:o,l=(a=this.scissor.y+this.scissor.height,o=e+i,a<o?a:o);t=r,e=s,n=_-r,i=l-s}else this.scissor=new ft;this.scissor.set(Math.round(t),Math.round(e),Math.round(n),Math.round(i))},__class__:ye};var Se=function(t,e){var n=this;this._hasGPU=new A(!0),this.gl=e,e.canvas.addEventListener("webglcontextlost",(function(t){t.preventDefault(),R.logger.warn("WebGL context lost",null),n._hasGPU.set__(!1)}),!1),e.canvas.addEventListener("webglcontextrestore",(function(t){R.logger.warn("WebGL context restored",null),n.init(),n._hasGPU.set__(!0)}),!1),t.resize.connect(Un(this,this.onResize)),this.init()};Se.__name__="flambe.platform.html.WebGLRenderer",Se.__interfaces__=[Gt],Se.prototype={get_type:function(){return Ye.WebGL},createTextureFromImage:function(t){if(this.gl.isContextLost())return null;var e=new Ce(this,t.width,t.height);return e.uploadImageData(t),e.createTexture(t.width,t.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(t,e){return this.gl.isContextLost()||Ge.fail(),null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var t=this.gl.canvas.width,e=this.gl.canvas.height;this.batcher.resizeBackbuffer(t,e),this.graphics.onResize(t,e)},init:function(){this.batcher=new we(this.gl),this.graphics=new xe(this.batcher,null),this.onResize()},__class__:Se};var Ae=function(t,e,n){Et.call(this,t,e,n)};Ae.__name__="flambe.platform.html.WebGLTexture",Ae.__super__=Et,Ae.prototype=o(Et.prototype,{__class__:Ae});var Ce=function(t,e,n){this._graphics=null,this.framebuffer=null,gt.call(this),this._renderer=t;var i=jt.nextPowerOfTwo(e);this.width=2>i?2:i;i=jt.nextPowerOfTwo(n);this.height=2>i?2:i;var a=t.gl;this.nativeTexture=a.createTexture(),t.batcher.bindTexture(this.nativeTexture),a.texParameteri(3553,10242,33071),a.texParameteri(3553,10243,33071),a.texParameteri(3553,10240,9729),a.texParameteri(3553,10241,9729)};Ce.__name__="flambe.platform.html.WebGLTextureRoot",Ce.__interfaces__=[Qt],Ce.drawBorder=function(t,e,n){var i=t.getContext("2d",null);i.drawImage(t,e-1,0,1,n,e,0,1,n),i.drawImage(t,0,n-1,e,1,0,n,e,1)},Ce.__super__=gt,Ce.prototype=o(gt.prototype,{createTexture:function(t,e){return new Ae(this,t,e)},uploadImageData:function(t){if(Ge.that(!this._disposed,"Asset cannot be used after being disposed"),this.width!=t.width||this.height!=t.height){var e=me.createEmptyCanvas(this.width,this.height);e.getContext("2d",null).drawImage(t,0,0),Ce.drawBorder(e,t.width,t.height),t=e}this._renderer.batcher.bindTexture(this.nativeTexture);var n=this._renderer.gl;n.texImage2D(3553,0,6408,6408,5121,t)},copyFrom:function(t){this.nativeTexture=t.nativeTexture,this.framebuffer=t.framebuffer,this.width=t.width,this.height=t.height,this._graphics=t._graphics},onDisposed:function(){var t=this._renderer.batcher;t.deleteTexture(this),null!=this.framebuffer&&t.deleteFramebuffer(this),this.nativeTexture=null,this.framebuffer=null,this._graphics=null},__class__:Ce});var Te=function(t,e,n){if(n=["#ifdef GL_ES","precision mediump float;","#endif"].join("\n")+"\n"+n,this._gl=t,this._program=t.createProgram(),t.attachShader(this._program,Te.createShader(t,35633,e)),t.attachShader(this._program,Te.createShader(t,35632,n)),t.linkProgram(this._program),t.useProgram(this._program),!t.getProgramParameter(this._program,35714)){var i=["log",t.getProgramInfoLog(this._program)];R.logger.error("Error linking shader program",i)}};Te.__name__="flambe.platform.shader.ShaderGL",Te.createShader=function(t,e,n){var i=t.createShader(e);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,35713)){var a=35633==e?"vertex":"fragment",r=["log",t.getShaderInfoLog(i)];R.logger.error("Error compiling "+a+" shader",r)}return i},Te.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){Ge.fail("abstract")},getAttribLocation:function(t){var e=this._gl.getAttribLocation(this._program,t);return Ge.that(e>=0,"Missing attribute",["name",t]),e},getUniformLocation:function(t){var e=this._gl.getUniformLocation(this._program,t);return Ge.that(null!=e,"Missing uniform",["name",t]),e},__class__:Te};var Ee=function(t){Te.call(this,t,["attribute highp vec2 a_pos;","attribute mediump vec2 a_uv;","attribute lowp float a_alpha;","varying mediump vec2 v_uv;","varying lowp float v_alpha;","void main (void) {","v_uv = a_uv;","v_alpha = a_alpha;","gl_Position = vec4(a_pos, 0, 1);","}"].join("\n"),["varying mediump vec2 v_uv;","varying lowp float v_alpha;","uniform lowp sampler2D u_texture;","uniform mediump vec4 u_region;","void main (void) {","gl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;","}"].join("\n")),this.a_pos=this.getAttribLocation("a_pos"),this.a_uv=this.getAttribLocation("a_uv"),this.a_alpha=this.getAttribLocation("a_alpha"),this.u_texture=this.getUniformLocation("u_texture"),this.u_region=this.getUniformLocation("u_region"),this.setTexture(0)};Ee.__name__="flambe.platform.shader.DrawPatternGL",Ee.__super__=Te,Ee.prototype=o(Te.prototype,{setTexture:function(t){this._gl.uniform1i(this.u_texture,t)},setRegion:function(t,e,n,i){this._gl.uniform4f(this.u_region,t,e,n,i)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos),this._gl.enableVertexAttribArray(this.a_uv),this._gl.enableVertexAttribArray(this.a_alpha);var t=Float32Array.BYTES_PER_ELEMENT,e=5*t;this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,e,0*t),this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,e,2*t),this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,e,4*t)},__class__:Ee});var ke=function(t){Te.call(this,t,["attribute highp vec2 a_pos;","attribute mediump vec2 a_uv;","attribute lowp float a_alpha;","varying mediump vec2 v_uv;","varying lowp float v_alpha;","void main (void) {","v_uv = a_uv;","v_alpha = a_alpha;","gl_Position = vec4(a_pos, 0, 1);","}"].join("\n"),["varying mediump vec2 v_uv;","varying lowp float v_alpha;","uniform lowp sampler2D u_texture;","void main (void) {","gl_FragColor = texture2D(u_texture, v_uv) * v_alpha;","}"].join("\n")),this.a_pos=this.getAttribLocation("a_pos"),this.a_uv=this.getAttribLocation("a_uv"),this.a_alpha=this.getAttribLocation("a_alpha"),this.u_texture=this.getUniformLocation("u_texture"),this.setTexture(0)};ke.__name__="flambe.platform.shader.DrawTextureGL",ke.__super__=Te,ke.prototype=o(Te.prototype,{setTexture:function(t){this._gl.uniform1i(this.u_texture,t)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos),this._gl.enableVertexAttribArray(this.a_uv),this._gl.enableVertexAttribArray(this.a_alpha);var t=Float32Array.BYTES_PER_ELEMENT,e=5*t;this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,e,0*t),this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,e,2*t),this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,e,4*t)},__class__:ke});var Me=function(t){Te.call(this,t,["attribute highp vec2 a_pos;","attribute lowp vec3 a_rgb;","attribute lowp float a_alpha;","varying lowp vec4 v_color;","void main (void) {","v_color = vec4(a_rgb*a_alpha, a_alpha);","gl_Position = vec4(a_pos, 0, 1);","}"].join("\n"),["varying lowp vec4 v_color;","void main (void) {","gl_FragColor = v_color;","}"].join("\n")),this.a_pos=this.getAttribLocation("a_pos"),this.a_rgb=this.getAttribLocation("a_rgb"),this.a_alpha=this.getAttribLocation("a_alpha")};Me.__name__="flambe.platform.shader.FillRectGL",Me.__super__=Te,Me.prototype=o(Te.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos),this._gl.enableVertexAttribArray(this.a_rgb),this._gl.enableVertexAttribArray(this.a_alpha);var t=Float32Array.BYTES_PER_ELEMENT,e=6*t;this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,e,0*t),this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,e,2*t),this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,e,5*t)},__class__:Me});var Pe=function(){this._transitor=null,v.call(this),this.scenes=[],this.occludedScenes=[],this._root=new w};Pe.__name__="flambe.scene.Director",Pe.__super__=v,Pe.prototype=o(v.prototype,{get_name:function(){return"Director_15"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();var t=0,e=this.scenes;while(t<e.length){var n=e[t];++t,n.dispose()}this.scenes=[],this.occludedScenes=[],this._root.dispose()},onUpdate:function(t){null!=this._transitor&&this._transitor.update(t)&&this.completeTransition()},get_topScene:function(){var t=this.scenes.length;return t>0?this.scenes[t-1]:null},show:function(t){var e=t._compMap["Scene_17"];null!=e&&e.shown.emit()},invalidateVisibility:function(){var t=this.scenes.length;while(t>0){var e=this.scenes[--t],n=e._compMap["Scene_17"];if(null==n||n.opaque)break}this.occludedScenes=this.scenes.length>0?this.scenes.slice(t,this.scenes.length-1):[];e=this.get_topScene();null!=e&&this.show(e)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},__class__:Pe});var De=function(t,e,n,i){this._from=t,this._to=e,this._transition=n,this._onComplete=i};De.__name__="flambe.scene._Director.Transitor",De.prototype={update:function(t){return this._transition.update(t)},complete:function(){this._transition.complete(),this._onComplete()},__class__:De};var Re=function(t){null==t&&(t=!0),v.call(this),this.opaque=t,this.shown=new ze,this.hidden=new ze};Re.__name__="flambe.scene.Scene",Re.__super__=v,Re.prototype=o(v.prototype,{get_name:function(){return"Scene_17"},__class__:Re});var Le=function(){};Le.__name__="flambe.scene.Transition",Le.prototype={update:function(t){return!0},complete:function(){},__class__:Le};var Fe=function(){};Fe.__name__="flambe.script.Action",Fe.__isInterface__=!0,Fe.prototype={__class__:Fe};var Ie=function(t,e,n,i){this._value=t,this._to=e,this._seconds=n,this._easing=i};Ie.__name__="flambe.script.AnimateTo",Ie.__interfaces__=[Fe],Ie.prototype={update:function(t,e){if(null==this._tween&&(this._tween=new O(this._value._value,this._to,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(t)),this._value._behavior!=this._tween){var n=this._tween.elapsed-this._seconds;return this._tween=null,n>0?Math.max(0,t-n):0}return-1},__class__:Ie};var Be=function(t){this._fn=t};Be.__name__="flambe.script.CallFunction",Be.__interfaces__=[Fe],Be.prototype={update:function(t,e){return this._fn(),0},__class__:Be};var Ne=function(t){this._duration=t,this._elapsed=0};Ne.__name__="flambe.script.Delay",Ne.__interfaces__=[Fe],Ne.prototype={update:function(t,e){if(this._elapsed+=t,this._elapsed>=this._duration){var n=this._elapsed-this._duration;return this._elapsed=0,t-n}return-1},__class__:Ne};var Oe=function(t){this._completedActions=[],this._runningActions=null!=t?t.slice():[]};Oe.__name__="flambe.script.Parallel",Oe.__interfaces__=[Fe],Oe.prototype={update:function(t,e){var n=!0,i=0,a=0,r=this._runningActions.length;while(a<r){var s=a++,o=this._runningActions[s];if(null!=o){var _=o.update(t,e);_>=0?(this._runningActions[s]=null,this._completedActions.push(o),_>i&&(i=_)):n=!1}}return n?(this._runningActions=this._completedActions,this._completedActions=[],i):-1},__class__:Oe};var Ve=function(t,e){null==e&&(e=-1),this._action=t,this._count=e,this._remaining=e};Ve.__name__="flambe.script.Repeat",Ve.__interfaces__=[Fe],Ve.prototype={update:function(t,e){if(0==this._count)return 0;var n=this._action.update(t,e);return this._count>0&&n>=0&&0==--this._remaining?(this._remaining=this._count,n):-1},__class__:Ve};var Ue=function(){v.call(this),this.stopAll()};Ue.__name__="flambe.script.Script",Ue.__super__=v,Ue.prototype=o(v.prototype,{get_name:function(){return"Script_11"},run:function(t){var e=new Ke(t);return this._handles.push(e),e},stopAll:function(){this._handles=[]},onUpdate:function(t){var e=0;while(e<this._handles.length){var n=this._handles[e];n.removed||n.action.update(t,this.owner)>=0?this._handles.splice(e,1):++e}},__class__:Ue});var Ke=function(t){this.removed=!1,this.action=t};Ke.__name__="flambe.script._Script.Handle",Ke.__interfaces__=[g],Ke.prototype={dispose:function(){this.removed=!0,this.action=null},__class__:Ke};var Xe=function(t){this._idx=0,this._runningActions=null!=t?t.slice():[]};Xe.__name__="flambe.script.Sequence",Xe.__interfaces__=[Fe],Xe.prototype={update:function(t,e){var n=0;while(1){var i=this._runningActions[this._idx];if(null!=i){var a=i.update(t-n,e);if(!(a>=0))return-1;n+=a}if(++this._idx,this._idx>=this._runningActions.length){this._idx=0;break}if(n>t)return-1}return n},__class__:Xe};var Ye=s["flambe.subsystem.RendererType"]={__ename__:!0,__constructs__:null,Stage3D:{_hx_name:"Stage3D",_hx_index:0,__enum__:"flambe.subsystem.RendererType",toString:r},WebGL:{_hx_name:"WebGL",_hx_index:1,__enum__:"flambe.subsystem.RendererType",toString:r},Canvas:{_hx_name:"Canvas",_hx_index:2,__enum__:"flambe.subsystem.RendererType",toString:r}};Ye.__constructs__=[Ye.Stage3D,Ye.WebGL,Ye.Canvas];var Ge=function(){};Ge.__name__="flambe.util.Assert",Ge.that=function(t,e,n){t||Ge.fail(e,n)},Ge.fail=function(t,e){var n="Assertion failed!";throw null!=t&&(n="Assertion failed! "+t),null!=e&&(n=Qe.withFields(n,e)),An.thrown(n)};var He=function(){};He.__name__="flambe.util.BitSets",He.set=function(t,e,n){return n?t|e:t&~e};var We=s["flambe.util.LogLevel"]={__ename__:!0,__constructs__:null,Info:{_hx_name:"Info",_hx_index:0,__enum__:"flambe.util.LogLevel",toString:r},Warn:{_hx_name:"Warn",_hx_index:1,__enum__:"flambe.util.LogLevel",toString:r},Error:{_hx_name:"Error",_hx_index:2,__enum__:"flambe.util.LogLevel",toString:r}};We.__constructs__=[We.Info,We.Warn,We.Error];var je=function(){this.success=new k,this.error=new k,this.progressChanged=new ze,this.hasResult=!1,this._progress=0,this._total=0};je.__name__="flambe.util.Promise",je.prototype={set_result:function(t){if(this.hasResult)throw An.thrown("Promise result already assigned");return this._result=t,this.hasResult=!0,this.success.emit(t),t},get:function(t){return this.hasResult?(t(this._result),null):this.success.connect(t).once()},set_progress:function(t){return this._progress!=t&&(this._progress=t,this.progressChanged.emit()),t},set_total:function(t){return this._total!=t&&(this._total=t,this.progressChanged.emit()),t},__class__:je};var ze=function(t){T.call(this,t)};ze.__name__="flambe.util.Signal0",ze.__super__=T,ze.prototype=o(T.prototype,{connect:function(t,e){return null==e&&(e=!1),this.connectImpl(t,e)},emit:function(){var t=this;this._head==T.DISPATCHING_SENTINEL?this.defer((function(){t.emitImpl()})):this.emitImpl()},emitImpl:function(){var t=this.willEmit(),e=t;while(null!=e)e._listener(),e.stayInList||e.dispose(),e=e._next;this.didEmit(t)},__class__:ze});var qe=function(t){this.next=null,this.fn=t};qe.__name__="flambe.util._SignalBase.Task",qe.prototype={__class__:qe};var Qe=function(){};Qe.__name__="flambe.util.Strings",Qe.getFileExtension=function(t){var e=t.lastIndexOf(".");return e>0?l.substr(t,e+1,null):null},Qe.removeFileExtension=function(t){var e=t.lastIndexOf(".");return e>0?l.substr(t,0,e):t},Qe.getUrlExtension=function(t){var e=t.lastIndexOf("?");e>=0&&(t=l.substr(t,0,e));var n=t.lastIndexOf("/");return n>=0&&(t=l.substr(t,n+1,null)),Qe.getFileExtension(t)},Qe.joinPath=function(t,e){return t.length>0&&47!=t.charCodeAt(t.length-1)&&(t+="/"),t+e},Qe.withFields=function(t,e){var n=e.length;if(n>0){t+=t.length>0?" [":"[";var i=0;while(i<n){i>0&&(t+=", ");var a=e[i],r=e[i+1];if(Bn.__instanceof(r,Error)){var s=r.stack;null!=s&&(r=s)}t+=a+"="+c.string(r),i+=2}t+="]"}return t};var Je=function(){};Je.__name__="game.ButtonUtil",Je.addStates=function(t,e,n){null==n&&(n=new b);var i=!1;return n.add(t.get_pointerIn().connect((function(e){t.setScale(1.05)}))),n.add(t.get_pointerOut().connect((function(e){t.setScale(1)}))),n.add(t.get_pointerDown().connect((function(e){t.setScale(.95),i=!0}))),P.assertCalledInit(),n.add(P._platform.getPointer().up.connect((function(n){t.setScale(1),i&&n.hit==t&&(i=!1,e())}))),n};var Ze=function(t,e){q.call(this),this._width=t,this._height=e,this.scissor=new ft(0,0,this._width,this._height)};Ze.__name__="game.Container",Ze.getSize=n["game"]["Container"]["getSize"]=function(t,e,n,i){var a=e/t,r=i/n,s=0,o=0;return r<a?(o=i,s=i/a):(s=n,o=n*a),Ze._scratch.scale=s/t,Ze._scratch.x=(n-s)/2,Ze._scratch.y=(i-o)/2,Ze._scratch},Ze.__super__=q,Ze.prototype=o(q.prototype,{getNaturalWidth:function(){return this._width},getNaturalHeight:function(){return this._height},draw:function(t){t.fillRect(13421772,0,0,this._width,this._height)},setSize:function(t,e){var n=Ze.getSize(this._width,this._height,t,e);return this.setScale(n.scale),this.setXY(n.x,n.y),this},__class__:Ze});var $e=function(t,e,n){v.call(this),this.init(t,e,n)};$e.__name__="game.Loader",$e.__super__=v,$e.prototype=o(v.prototype,{get_name:function(){return"Loader_28"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},init:function(t,e,n){this._disposer=new b,this._root=new w,this._root.add(new tt(t.getTexture("loadingBack"))).add(new tn(t,e,n))},__class__:$e});var tn=function(t,e,n){v.call(this),this.init(t,e,n)};tn.__name__="game.LoaderBall",tn.__super__=v,tn.prototype=o(v.prototype,{get_name:function(){return"LoaderBall_27"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(t,e,n){this._root=new w;var i=(new q).setXY(898,786);this._root.add(i);var a=new tt(t.getTexture("ballLineWater")),r=new tt(t.getTexture("ball")).centerAnchor().setXY(75,-250);this._root.addChild((new w).add(r)),this._root.addChild((new w).add(a)),r.rotation.set_behavior(new N(-10,10,4)),i.x.set_behavior(new N(848,948,4)),i.y.set_behavior(new N(786,796,2))},__class__:tn});var en=function(){};en.__name__="game.Main",en.main=function(){P.init()},en.start=n["game"]["Main"]["start"]=function(t,e){var n=new Ze(t,e);n.set_visible(!1),P.root.add(n),P.assertCalledInit(),P._platform.getStage().resize.connect((function(){var t=n;P.assertCalledInit();var e=P._platform.getStage().get_width();P.assertCalledInit(),t.setSize(e,P._platform.getStage().get_height())})),P.assertCalledInit(),P._platform.getStage().resize.emit();var i=G.fromAssets("bootstrap");P.assertCalledInit();var a=t,r=e,s=function(t){en.onDevCafe(a,r,t)};P._platform.loadAssetPack(i).success.connect(s).once()},en.onDevCafe=function(t,e,n){var i=new $e(n,t,e);P.root.add(i);var a=P.root._compMap["Sprite_4"];(a instanceof Ze?a:null).set_visible(!0);var r=G.fromAssets("main");P.assertCalledInit(),P._platform.loadAssetPack(r).success.connect((function(n){i.dispose(),P.root.add(new fn(n,t,e)),P.root._compMap["CafeGame_2"].nextState()})).once()};var nn=function(){};nn.__name__="game.MathUtil",nn.solveTriangle=function(t,e,n){var i=nn.solveAngle(e,n,t),a=nn.solveAngle(n,t,e),r=nn.solveAngle(t,e,n);return null!=i&&null!=a&&null!=r?{a:i,b:a,c:r}:null},nn.solveAngle=function(t,e,n){var i=(t*t+e*e-n*n)/(2*t*e);return i>=-1&&.9999999>=i?Math.acos(i):1>=i?Math.sqrt((n*n-(t-e)*(t-e))/(t*e)):null},nn.reflectAngle=function(t,e){var n=Math.cos(t),i=Math.sin(t);return e?Math.atan2(i,-n):Math.atan2(-i,n)},nn.normDegrees=function(t){return(t%360+360)%360},nn.quadrant=function(t){var e=nn.normDegrees(180*t/3.141592653589793);return e>270?3:e>180?2:e>90?1:0};var an=function(t,e,n,i){v.call(this),this.init(t,e,n,i)};an.__name__="game.Meter",an.__super__=v,an.prototype=o(v.prototype,{get_name:function(){return"Meter_18"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},show:function(t){return t?this._root._compMap["Sprite_4"].anchorY.set__(0):this._root._compMap["Sprite_4"].anchorY.animateTo(0,1,B.cubeOut),this},setFill:function(t){var e=pt.clamp(t,0,1),n=this._fill.getNaturalHeight()-e*this._fill.getNaturalHeight();return this._fill.scissor.y=n,this},init:function(t,e,n,i){this._root=(new w).add((new q).setXY(e,n)),this._root._compMap["Sprite_4"].anchorY.set__(1e3);var a=(new w).add(new tt(t.getTexture("meterBack"))),r=(new w).add(this._fill=new tt(t.getTexture("timeMid"))),s=this._fill.getNaturalWidth(),o=this._fill.getNaturalHeight();this._fill.scissor=new ft(0,0,s,o);var _=(new w).add(new tt(t.getTexture(i)).setXY(-26,0));this._root.addChild(a).addChild(r).addChild(_)},__class__:an});var rn=function(t){v.call(this),this.click=new ze,this.init(t)};rn.__name__="game.PlayButton",rn.__super__=v,rn.prototype=o(v.prototype,{get_name:function(){return"PlayButton_23"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},init:function(t){var e=this;this._root=new w,this._disposer=new b;var n=new tt(t.getTexture("playButton")).centerAnchor().setXY(960,800);this._root.add(n),Je.addStates(n,(function(){e.click.emit()}),this._disposer)},__class__:rn});var sn=function(){};sn.__name__="game.SpriteUtil",sn.localXY=function(t,e,n){var i=t.getViewMatrix();return i.inverseTransform(e,n,sn.SPRITE_SCRATCH)||sn.SPRITE_SCRATCH.set(0,0),sn.SPRITE_SCRATCH};var on=function(){};on.__name__="game.cafe.ArmUtil",on.wave=function(t,e,n,i,a,r){on.calcAngles(200,-430,a,r);var s=a.top,o=a.bottom;on.calcAngles(200,-230,a,r);var _=a.top,l=a.bottom;n.rotation.set__(s),i.rotation.set__(o),e.add(new Ue),e.add(new Ue)._compMap["Script_11"].run(new Xe([new Ve(new Xe([new Oe([new Ie(n.rotation,_,.24,B.cubeIn),new Ie(i.rotation,l,.24,B.cubeIn)]),new Oe([new Ie(n.rotation,s,.3,B.cubeIn),new Ie(i.rotation,o,.3,B.cubeIn)])]),3),new Ne(.5),new Be(t)]))},on.slam=function(t,e,n,i,a,r){on.calcAngles(300,230,a,r);var s=a.top,o=a.bottom;on.calcAngles(300,-730,a,r);var _=a.top,l=a.bottom;n.rotation.set__(s),i.rotation.set__(o),e.add(new Ue),e.add(new Ue)._compMap["Script_11"].run(new Xe([new Oe([new Ie(n.rotation,_,.5,B.cubeIn),new Ie(i.rotation,l,.5,B.cubeIn)]),new Oe([new Ie(n.rotation,s,.135,B.bounceOut),new Ie(i.rotation,o,.135,B.bounceOut)]),new Ne(.5),new Be(t)]))},on.calcAngles=function(t,e,n,i){on._scratchLocal.x=t,on._scratchLocal.y=e;var a=on.getAngle(on._scratchLocal.x,on._scratchLocal.y),r=on.hasReflectAngle(nn.quadrant(a),i),s=r?-on._scratchLocal.y:on._scratchLocal.y,o=on.getAngle(on._scratchLocal.x,s),_=on._scratchLocal.distanceTo(0,0),l=549-_;if(n.canReach=l>0,n.canReach){var u=nn.solveTriangle(283,266,_);if(null!=u){var h=o-1.5708-u.a,c=u.a+u.b;r?(n.top=180*nn.reflectAngle(h,!0)/3.141592653589793,n.bottom=180*nn.reflectAngle(c,!1)/3.141592653589793):(n.top=180*h/3.141592653589793,n.bottom=180*c/3.141592653589793)}}else n.top=180*a/3.141592653589793-90,n.bottom=0},on.getAngle=function(t,e){return Math.atan2(e,t)},on.hasReflectAngle=function(t,e){var n=!1;return e?3!=t&&2!=t||(n=!0):0!=t&&1!=t||(n=!0),n};var _n=function(t){v.call(this),this.init(t)};_n.__name__="game.cafe.Background",_n.__super__=v,_n.prototype=o(v.prototype,{get_name:function(){return"Background_22"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},nextState:function(){var t=this._title._compMap["Sprite_4"];t.y.animateTo(-600,2,B.cubeOut),t.x.animateTo(1400,2,B.cubeOut),t.rotation.animateTo(-20,2,B.cubeOut),this._flamingo.anchorX.animateTo(-140,2,B.cubeOut),this._flamingo.anchorY.animateTo(60,2,B.cubeOut)},init:function(t){this._root=new w,this._root.add(new tt(t.getTexture("mainBack")));var e=t.getTexture("title");this._title=(new w).add(new tt(e).centerAnchor().setXY(390+e.get_width()/2,179+e.get_height()/2)),this._title._compMap["Sprite_4"].rotation.set_behavior(new N(-3,3,5)),this._flamingo=new tt(t.getTexture("flamingo")).setXY(1131,594),this._flamingo.x.set_behavior(new N(1101,1161,5)),this._flamingo.rotation.set_behavior(new N(-5,5,10));var n=new tt(t.getTexture("cloud")).setXY(0,54),i=new tt(t.getTexture("cloud")).setXY(1039,168),a=new tt(t.getTexture("cloud")).setXY(1340,51);n.x.set_behavior(new N(-30,30,5)),n.y.set_behavior(new N(39,69,10)),i.x.set_behavior(new N(1009,1069,5)),i.y.set_behavior(new N(153,183,10)),a.x.set_behavior(new N(1310,1370,5)),a.y.set_behavior(new N(36,66,10)),this._root.addChild((new w).add(n)).addChild((new w).add(i)).addChild((new w).add(a)).add(new ln(t)).addChild(this._title).addChild((new w).add(this._flamingo))},__class__:_n});var ln=function(t){v.call(this),this.init(t)};ln.__name__="game.cafe.BackgroundSun",ln.__super__=v,ln.prototype=o(v.prototype,{get_name:function(){return"BackgroundSun_21"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},onUpdate:function(t){var e=this._stripes.rotation;e.set__(e._value+20*t)},init:function(t){this._root=new w,this._root.add((new q).setXY(300,90)),this._root._compMap["Sprite_4"].anchorX.set_behavior(new N(-20,20,5)),this._root._compMap["Sprite_4"].anchorY.set_behavior(new N(20,0,2.5)),this._root.addChild((new w).add(this._stripes=new tt(t.getTexture("sun/sunStripes")).centerAnchor())).addChild((new w).add(this._sun=new tt(t.getTexture("sun/sun")).centerAnchor())).addChild((new w).add(new tt(t.getTexture("sun/ear")).setXY(-125,-35))).addChild((new w).add(new hn(t,-14,-50))).addChild((new w).add(new hn(t,72,-50))).add(new un(t))},__class__:ln});var un=function(t){v.call(this),this.init(t)};un.__name__="game.cafe.BackgroundSunSmile",un.__super__=v,un.prototype=o(v.prototype,{get_name:function(){return"BackgroundSunSmile_20"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(t){this._root=new w,this._root.addChild((new w).add(new tt(t.getTexture("sun/mouthSmile")).setXY(10,55)))},__class__:un});var hn=function(t,e,n){v.call(this),this.init(t,e,n)};hn.__name__="game.cafe.BackgroundSunEye",hn.__super__=v,hn.prototype=o(v.prototype,{get_name:function(){return"BackgroundSunEye_19"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(t,e,n){this._root=(new w).add((new q).setXY(e,n));var i=t.getTexture("sun/eye");this._root.addChild((new w).add(new Z(16047817,i.get_width()-4,i.get_height()-4).setXY(2,2))),this._root.addChild((new w).add(this._pupil=new tt(t.getTexture("sun/eyePupil")).setXY(38,70).centerAnchor())),this._root.addChild((new w).add(new tt(i))),this._root.addChild((new w).add(this._brow=new tt(t.getTexture("sun/eyebrow")).setXY(36,10).centerAnchor()))},__class__:hn});var cn=function(t,e){this.drink=null,v.call(this),this.liquid=e,this.init(t)};cn.__name__="game.cafe.Bar",cn.__super__=v,cn.prototype=o(v.prototype,{get_name:function(){return"Bar_12"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},onUpdate:function(t){if(P.assertCalledInit(),P._platform.getPointer().isDown()){var e=this._root._compMap["Sprite_4"];P.assertCalledInit();var n=P._platform.getPointer().get_x();P.assertCalledInit();var i=sn.localXY(e,n,P._platform.getPointer().get_y()),a=0,r=this._slots;while(a<r.length){var s=r[a];++a;var o=s.isHit(i.x,i.y);if(o)switch(s.state._value._hx_index){case 0:break;case 1:this.drink!=s&&(null!=this.drink&&this.drink.toss(),this.drink=s,this.drink.grab(i.x,i.y),this.liquid.set_visible(!0),this.liquid.setXY(i.x,i.y,this.drink.get_rotation(),230));break;case 2:break;case 3:s.moveTo(i.x,i.y),this.liquid.setXY(i.x,i.y,this.drink.get_rotation(),230);break;case 4:break}else null!=this.drink&&this.drink.moveTo(i.x,i.y)}}},init:function(t){var e=this;this._root=(new w).add(new q),this._disposer=new b,this._slots=[];var n=[{x:406,y:985},{x:573,y:1013},{x:810,y:995},{x:1200,y:1027},{x:1516,y:1007}],i=0,a=n.length;while(i<a){var r=i++,s=n[r],o=new pn(t,s.x,s.y,this),_=(new w).add(o);o.turnOff(),this._slots.push(o),this._root.addChild(_)}var l=this._disposer;P.assertCalledInit(),l.add(P._platform.getPointer().up.connect((function(t){null!=e.drink&&(e.drink.toss(),e.liquid.set_visible(!1),e.drink=null)}))),this._slots[0].show(!0),this._slots[1].show(!0),this._slots[2].show(!0),this._slots[3].show(!0),this._slots[4].show(!0)},__class__:cn});var dn=s["game.cafe.BarDrinkState"]={__ename__:!0,__constructs__:null,Destroyed:(a=function(t){return{_hx_index:0,ref:t,__enum__:"game.cafe.BarDrinkState",toString:r}},a._hx_name="Destroyed",a.__params__=["ref"],a),Idle:{_hx_name:"Idle",_hx_index:1,__enum__:"game.cafe.BarDrinkState",toString:r},Sliding:{_hx_name:"Sliding",_hx_index:2,__enum__:"game.cafe.BarDrinkState",toString:r},Active:(a=function(t){return{_hx_index:3,ref:t,__enum__:"game.cafe.BarDrinkState",toString:r}},a._hx_name="Active",a.__params__=["ref"],a),Off:{_hx_name:"Off",_hx_index:4,__enum__:"game.cafe.BarDrinkState",toString:r}};dn.__constructs__=[dn.Destroyed,dn.Idle,dn.Sliding,dn.Active,dn.Off];var pn=function(t,e,n,i){v.call(this),this._x=e,this._y=n,this._bar=i,this.state=new A(dn.Off),this.init(t)};pn.__name__="game.cafe.BarDrink",pn.__super__=v,pn.prototype=o(v.prototype,{get_name:function(){return"BarDrink_13"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},onUpdate:function(t){var e=this.state._value;switch(e._hx_index){case 0:var n=e.ref;n.time+=t,n.time>=pn.DESTROYED_DURATION&&this.show(!1);break;case 1:break;case 2:break;case 3:n=e.ref;n.time+=t,n.time>=pn.ACTIVE_DURATION&&(this._bar.drink=null,this._bar.liquid.set_visible(!1),this.toss());break;case 4:break}},isHit:function(t,e){var n=this._root._compMap["Sprite_4"],i=n.x._value-n.anchorX._value,a=n.y._value-n.anchorY._value,r=i+n.getNaturalWidth(),s=a+n.getNaturalHeight();return i<=t&&t<=r&&a<=e&&e<=s},show:function(t){var e=this,n=this._root._compMap["Sprite_4"],i=n.x._value<960;n.x.set__(i?-2e3:2e3),n.rotation.set__(0),n.y.set__(this._y),this.state.set__(dn.Sliding),t?(this.state.set__(dn.Idle),n.x.set__(this._x)):(this._root.add(new Ue),this._root.add(new Ue)._compMap["Script_11"].run(new Xe([new Ie(n.x,this._x,.666,B.cubeOut),new Be((function(){e.state.set__(dn.Idle)}))]))),n.set_visible(!0)},turnOff:function(){this.state.set__(dn.Off);var t=this._root._compMap["Sprite_4"];t.set_visible(!1)},grab:function(t,e){this.state.set__(dn.Active({time:0}));var n=this._root._compMap["Sprite_4"];n.rotation.set_behavior(new N(205,155,1)),this.moveTo(t,e)},moveTo:function(t,e){var n=this._root._compMap["Sprite_4"];n.x.set__(t),n.y.set__(e)},toss:function(){this.state.set__(dn.Destroyed({time:0}));var t=this._root._compMap["Sprite_4"],e=Math.random()>.5,n=e?-500:500,i=e?-180:180;t.x.animateTo(t.x._value+n,.3333,B.sineIn),t.y.animateTo(-300,.3333,B.sineOut),t.rotation.animateTo(i,.3333,B.sineOut)},get_rotation:function(){var t=this._root._compMap["Sprite_4"];return t.rotation._value},init:function(t){this._root=new w;var e=t.getTexture("beerStar"),n=e.get_width()/2,i=e.get_height()-50;this._root.add(new tt(e).setAnchor(n,i).setXY(this._x,this._y))},__class__:pn});var mn=function(t,e){v.call(this),this.init(t,e)};mn.__name__="game.cafe.BarTable",mn.__super__=v,mn.prototype=o(v.prototype,{get_name:function(){return"BarTable_8"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(t,e){this._root=new w;var n=t.getTexture("table");this._root.addChild((new w).add(new tt(n).setXY(-3,e-n.get_height())))},__class__:mn});var fn=function(t,e,n){this._rotation=new M(0),this._anchorY=new M(0),this._anchorX=new M(0),this._isGameplay=!1,this._elapsed=0,v.call(this),this.init(t,e,n)};fn.__name__="game.cafe.CafeGame",fn.__super__=v,fn.prototype=o(v.prototype,{get_name:function(){return"CafeGame_2"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},onUpdate:function(t){this._anchorX.update(t),this._anchorY.update(t),this._rotation.update(t),this._isGameplay&&(this._elapsed+=t,this._elapsed>5&&(this._elapsed=0,Math.random()>.5?this._thirstyArms.wave():this._thirstyArms.slam()))},init:function(t,e,n){this._anchorX.set__(1900),this._disposer=new b,this._root=new w,this._meterTime=(new w).add(new an(t,100,180,"timeFront").setFill(.4)),this._meterDrink=(new w).add(new an(t,1760,180,"drinkFront")),this._root.add(new q).add(new _n(t)).add(new rn(t)).addChild((new w).add(this._thirstyPerson=new wn(t,e,n))).add(new mn(t,n)).addChild((new w).add(this._thirstyArms=new vn(t,e,n))).add(this._liquid=new gn(t)).add(this._barDrinks=new cn(t,this._liquid)).addChild(this._meterTime).addChild(this._meterDrink),this._thirstyPerson.bindTo(this._anchorX,this._anchorY,this._rotation),this._thirstyArms.bindTo(this._anchorX,this._anchorY,this._rotation),this._disposer.add(this._root._compMap["PlayButton_23"].click.connect(Un(this,this.nextState)).once())},nextState:function(){var t=this;this._root._compMap["Background_22"].nextState(),this._anchorY.set_behavior(new N(5,0,3)),this._isGameplay=!0,this._root._compMap["PlayButton_23"].dispose(),this._meterTime._compMap["Meter_18"].show(!1),this._meterDrink._compMap["Meter_18"].show(!1),this._root.add(new Ue),this._root.add(new Ue)._compMap["Script_11"].run(new Xe([new Ie(this._anchorX,-200,1,B.cubeOut),new Be((function(){t._anchorX.set_behavior(new N(-200,200,2))}))]))},__class__:fn});var gn=function(t){v.call(this),this.init(t)};gn.__name__="game.cafe.Liquid",gn.__super__=v,gn.prototype=o(v.prototype,{get_name:function(){return"Liquid_3"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},setXY:function(t,e,n,i){var a=this._root._compMap["Sprite_4"],r=a instanceof Q?a:null,s=3.141592653589793*n/180,o=i*Math.cos(s-1.5708)+t,_=i*Math.sin(s-1.5708)+e;r.setXY(o,_),r.angle.set__(180*nn.reflectAngle(s,!0)/3.141592653589793)},set_visible:function(t){var e=this._root._compMap["Sprite_4"];return(e instanceof Q?e:null).set_visible(t)},init:function(t){this._root=new w;var e=new j(t,"puke/puke");this._root.add(new Q(e).setRotation(90))},__class__:gn});var vn=function(t,e,n){v.call(this),this.init(t,e,n)};vn.__name__="game.cafe.ThirstyArms",vn.__super__=v,vn.prototype=o(v.prototype,{get_name:function(){return"ThirstyArms_10"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},bindTo:function(t,e,n){this._root._compMap["Sprite_4"].anchorX.set_behavior(new I(t,null)),this._root._compMap["Sprite_4"].anchorY.set_behavior(new I(e,null)),this._root._compMap["Sprite_4"].rotation.set_behavior(new I(n,null))},wave:function(){return this._right._compMap["ThirstyArm_9"].wave(),this},slam:function(){return this._right._compMap["ThirstyArm_9"].slam(),this},init:function(t,e,n){this._root=(new w).add((new q).setXY(e/2,n-420)),this._left=(new w).add(new bn(t,-220,180,!1)),this._right=(new w).add(new bn(t,240,180,!0)),this._root.addChild(this._right).addChild(this._left)},__class__:vn});var bn=function(t,e,n,i){this._angles={top:0,bottom:0,canReach:!1},this._idleAnim=new M(0),this._isDown=!1,this._viewY=0,this._viewX=0,this.isStale=!1,v.call(this),this._isFlipped=i,this.init(t,e,n)};bn.__name__="game.cafe.ThirstyArm",bn.__super__=v,bn.prototype=o(v.prototype,{get_name:function(){return"ThirstyArm_9"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},onUpdate:function(t){this._isDown?this.reaching():(this._idleAnim.update(t),this.idleing())},wave:function(){var t=this;this.isStale=!0;var e=this._upper._compMap["Sprite_4"],n=this._lower._compMap["Sprite_4"];return on.wave((function(){t.isStale=!1}),this._root,e,n,this._angles,this._isFlipped),this},slam:function(){var t=this;this.isStale=!0;var e=this._upper._compMap["Sprite_4"],n=this._lower._compMap["Sprite_4"];return on.slam((function(){t.isStale=!1}),this._root,e,n,this._angles,this._isFlipped),this},reaching:function(){if(!this.isStale){var t=this._root._compMap["Sprite_4"],e=this._upper._compMap["Sprite_4"],n=this._lower._compMap["Sprite_4"],i=sn.localXY(t,this._viewX,this._viewY);on.calcAngles(i.x,i.y,this._angles,this._isFlipped),e.setRotation(this._angles.top),n.setRotation(this._angles.bottom)}},idleing:function(){var t=this._upper._compMap["Sprite_4"],e=this._lower._compMap["Sprite_4"];on.calcAngles(0,this._idleAnim._value,this._angles,this._isFlipped),t.setRotation(this._angles.top),e.setRotation(this._angles.bottom)},init:function(t,e,n){var i=this;if(this._disposer=new b,this._root=(new w).add((new q).setXY(e,n)),this._upper=(new w).add(new tt(t.getTexture("body/armTop")).setAnchor(46.5,0)),this._lower=(new w).add(new tt(t.getTexture("body/armBottom")).setXY(46.5,281).setAnchor(39.5,30)),this._hand=(new w).add((new q).setXY(39.5,298)),this._hand.addChild((new w).add(new tt(t.getTexture("body/hand")).setAnchor(52,80))),this._idleAnim.set_behavior(new N(-500,-400,.5)),this._root.addChild(this._upper),this._upper.addChild(this._lower),this._lower.addChild(this._hand),this._lower.addChild(this._elbowPoint=(new w).add(new q)),!this._isFlipped){var a=this._disposer;P.assertCalledInit(),a.add(P._platform.getPointer().down.connect((function(t){i._viewX=t.viewX,i._viewY=t.viewY,i._isDown=!0})));a=this._disposer;P.assertCalledInit(),a.add(P._platform.getPointer().move.connect((function(t){i._isDown&&(i._viewX=t.viewX,i._viewY=t.viewY)})));a=this._disposer;P.assertCalledInit(),a.add(P._platform.getPointer().up.connect((function(t){i._isDown&&(i._isDown=!1,i._viewX=t.viewX,i._viewY=t.viewY)})))}},__class__:bn});var wn=function(t,e,n){v.call(this),this.init(t,e,n)};wn.__name__="game.cafe.ThirstyPerson",wn.__super__=v,wn.prototype=o(v.prototype,{get_name:function(){return"ThirstyPerson_7"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},bindTo:function(t,e,n){this._root._compMap["Sprite_4"].anchorX.set_behavior(new I(t,null)),this._root._compMap["Sprite_4"].anchorY.set_behavior(new I(e,null)),this._root._compMap["Sprite_4"].rotation.set_behavior(new I(n,null))},init:function(t,e,n){this._root=(new w).add((new q).setXY(e/2,860)),this._torso=(new w).add(new yn(t)),this._head=(new w).add(new xn(t)),this._root.addChild(this._torso).addChild(this._head)},__class__:wn});var xn=function(t){v.call(this),this.init(t)};xn.__name__="game.cafe.ThirstyPersonHead",xn.__super__=v,xn.prototype=o(v.prototype,{get_name:function(){return"ThirstyPersonHead_6"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(t){this._root=(new w).add(new q),this._head=(new w).add(new tt(t.getTexture("body/head")).setXY(0,-275).centerAnchor()),this._root.addChild(this._head),this._root._compMap["Sprite_4"].anchorX.set_behavior(new N(-2,2,2)),this._root._compMap["Sprite_4"].anchorY.set_behavior(new N(0,10,3)),this._root._compMap["Sprite_4"].rotation.set_behavior(new N(-5,5,5))},__class__:xn});var yn=function(t){v.call(this),this.init(t)};yn.__name__="game.cafe.ThirstyPersonTorso",yn.__super__=v,yn.prototype=o(v.prototype,{get_name:function(){return"ThirstyPersonTorso_5"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(t){this._root=(new w).add(new q),this._torso=(new w).add(new tt(t.getTexture("body/body")).centerAnchor()),this._root.addChild(this._torso)},__class__:yn});var Sn=function(){};Sn.__name__="haxe.IMap",Sn.__isInterface__=!0;var An=function(t,e,n){Error.call(this,t),this.message=t,this.__previousException=e,this.__nativeException=null!=n?n:this};An.__name__="haxe.Exception",An.caught=function(t){return t instanceof An?t:t instanceof Error?new An(t.message,null,t):new Cn(t,null,t)},An.thrown=function(t){if(t instanceof An)return t.get_native();if(t instanceof Error)return t;var e=new Cn(t);return e},An.__super__=Error,An.prototype=o(Error.prototype,{unwrap:function(){return this.__nativeException},get_native:function(){return this.__nativeException},__class__:An});var Cn=function(t,e,n){An.call(this,String(t),e,n),this.value=t};Cn.__name__="haxe.ValueException",Cn.__super__=An,Cn.prototype=o(An.prototype,{unwrap:function(){return this.value},__class__:Cn});var Tn=function(){this.h={}};Tn.__name__="haxe.ds.IntMap",Tn.__interfaces__=[Sn],Tn.prototype={remove:function(t){return!!this.h.hasOwnProperty(t)&&(delete this.h[t],!0)},__class__:Tn};var En=function(){this.h=Object.create(null)};En.__name__="haxe.ds.StringMap",En.__interfaces__=[Sn],En.prototype={iterator:function(){return new Mn(this.h)},__class__:En};var kn=function(t){this.h=t,this.keys=Object.keys(t),this.length=this.keys.length,this.current=0};kn.__name__="haxe.ds._StringMap.StringMapKeyIterator",kn.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.keys[this.current++]},__class__:kn};var Mn=function(t){this.h=t,this.keys=Object.keys(t),this.length=this.keys.length,this.current=0};Mn.__name__="haxe.ds._StringMap.StringMapValueIterator",Mn.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.h[this.keys[this.current++]]},__class__:Mn};var Pn=function(){};Pn.__name__="haxe.io.Bytes";var Dn=function(t){this.current=0,this.array=t};Dn.__name__="haxe.iterators.ArrayIterator",Dn.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:Dn};var Rn=function(){};Rn.__name__="haxe.rtti.Meta",Rn.getType=function(t){var e=Rn.getMeta(t);return null==e||null==e.obj?{}:e.obj},Rn.getMeta=function(t){return t.__meta__};var Ln=function(t,e,n){this.xml=e,this.message=t,this.position=n,this.lineNumber=1,this.positionAtLine=0;var i=0;while(i<n){var a=i++,r=e.charCodeAt(a);10==r?(this.lineNumber++,this.positionAtLine=0):13!=r&&this.positionAtLine++}};Ln.__name__="haxe.xml.XmlParserException",Ln.prototype={toString:function(){var t=Bn.getClass(this);return t.__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:Ln};var Fn=function(){};Fn.__name__="haxe.xml.Parser",Fn.parse=function(t,e){null==e&&(e=!1);var n=f.createDocument();return Fn.doParse(t,e,0,n),n},Fn.doParse=function(t,e,n,i){null==n&&(n=0);var a=null,r=1,s=1,o=null,_=0,u=0,h=0,p=new d,g=1,v=-1;while(n<t.length){var b=t.charCodeAt(n);switch(r){case 0:switch(b){case 9:case 10:case 13:case 32:break;default:r=s;continue}break;case 1:if(60!=b){_=n,r=13;continue}r=0,s=2;break;case 2:switch(b){case 33:if(91==t.charCodeAt(n+1)){if(n+=2,"CDATA["!=l.substr(t,n,6).toUpperCase())throw An.thrown(new Ln("Expected <![CDATA[",t,n));n+=5,r=17,_=n+1}else if(68==t.charCodeAt(n+1)||100==t.charCodeAt(n+1)){if("OCTYPE"!=l.substr(t,n+2,6).toUpperCase())throw An.thrown(new Ln("Expected <!DOCTYPE",t,n));n+=8,r=16,_=n+1}else{if(45!=t.charCodeAt(n+1)||45!=t.charCodeAt(n+2))throw An.thrown(new Ln("Expected \x3c!--",t,n));n+=2,r=15,_=n+1}break;case 47:if(null==i)throw An.thrown(new Ln("Expected node name",t,n));_=n+1,r=0,s=10;break;case 63:r=14,_=n;break;default:r=3,_=n;continue}break;case 3:if(!(b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||58==b||46==b||95==b||45==b)){if(n==_)throw An.thrown(new Ln("Expected node name",t,n));a=f.createElement(l.substr(t,_,n-_)),i.addChild(a),++u,r=0,s=4;continue}break;case 4:switch(b){case 47:r=11;break;case 62:r=9;break;default:r=5,_=n;continue}break;case 5:if(!(b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||58==b||46==b||95==b||45==b)){if(_==n)throw An.thrown(new Ln("Expected attribute name",t,n));var w=l.substr(t,_,n-_);if(o=w,a.exists(o))throw An.thrown(new Ln("Duplicate attribute ["+o+"]",t,n));r=0,s=6;continue}break;case 6:if(61!=b)throw An.thrown(new Ln("Expected =",t,n));r=0,s=7;break;case 7:switch(b){case 34:case 39:p=new d,r=8,_=n+1,v=b;break;default:throw An.thrown(new Ln('Expected "',t,n))}break;case 8:switch(b){case 38:var x=n-_;p.b+=null==x?l.substr(t,_,null):l.substr(t,_,x),r=18,g=8,_=n+1;break;case 60:case 62:if(e)throw An.thrown(new Ln("Invalid unescaped "+String.fromCodePoint(b)+" in attribute value",t,n));if(b==v){var y=n-_;p.b+=null==y?l.substr(t,_,null):l.substr(t,_,y);var S=p.b;p=new d,a.set(o,S),r=0,s=4}break;default:if(b==v){var A=n-_;p.b+=null==A?l.substr(t,_,null):l.substr(t,_,A);var C=p.b;p=new d,a.set(o,C),r=0,s=4}}break;case 9:n=Fn.doParse(t,e,n,a),_=n,r=1;break;case 10:if(!(b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||58==b||46==b||95==b||45==b)){if(_==n)throw An.thrown(new Ln("Expected node name",t,n));var T=l.substr(t,_,n-_);if(null==i||0!=i.nodeType)throw An.thrown(new Ln("Unexpected </"+T+">, tag is not open",t,n));if(i.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":m.toString(i.nodeType)));if(T!=i.nodeName){if(i.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":m.toString(i.nodeType)));throw An.thrown(new Ln("Expected </"+i.nodeName+">",t,n))}r=0,s=12;continue}break;case 11:if(62!=b)throw An.thrown(new Ln("Expected >",t,n));r=1;break;case 12:if(62==b)return 0==u&&i.addChild(f.createPCData("")),n;throw An.thrown(new Ln("Expected >",t,n));case 13:if(60==b){var E=n-_;p.b+=null==E?l.substr(t,_,null):l.substr(t,_,E);var k=f.createPCData(p.b);p=new d,i.addChild(k),++u,r=0,s=2}else if(38==b){var M=n-_;p.b+=null==M?l.substr(t,_,null):l.substr(t,_,M),r=18,g=13,_=n+1}break;case 14:if(63==b&&62==t.charCodeAt(n+1)){++n;var P=l.substr(t,_+1,n-_-2);i.addChild(f.createProcessingInstruction(P)),++u,r=1}break;case 15:45==b&&45==t.charCodeAt(n+1)&&62==t.charCodeAt(n+2)&&(i.addChild(f.createComment(l.substr(t,_,n-_))),++u,n+=2,r=1);break;case 16:91==b?++h:93==b?--h:62==b&&0==h&&(i.addChild(f.createDocType(l.substr(t,_,n-_))),++u,r=1);break;case 17:if(93==b&&93==t.charCodeAt(n+1)&&62==t.charCodeAt(n+2)){var D=f.createCData(l.substr(t,_,n-_));i.addChild(D),++u,n+=2,r=1}break;case 18:if(59==b){var R=l.substr(t,_,n-_);if(35==R.charCodeAt(0)){var L=120==R.charCodeAt(1)?c.parseInt("0"+l.substr(R,1,R.length-1)):c.parseInt(l.substr(R,1,R.length-1));p.b+=String.fromCodePoint(L)}else if(Object.prototype.hasOwnProperty.call(Fn.escapes.h,R))p.b+=c.string(Fn.escapes.h[R]);else{if(e)throw An.thrown(new Ln("Undefined entity: "+R,t,n));p.b+=c.string("&"+R+";")}_=n+1,r=g}else if(!(b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||58==b||46==b||95==b||45==b)&&35!=b){if(e)throw An.thrown(new Ln("Invalid character in entity: "+String.fromCodePoint(b),t,n));p.b+=String.fromCodePoint(38);var F=n-_;p.b+=null==F?l.substr(t,_,null):l.substr(t,_,F),--n,_=n+1,r=g}break}++n}if(1==r&&(_=n,r=13),13==r){if(0==i.nodeType){if(i.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":m.toString(i.nodeType)));throw An.thrown(new Ln("Unclosed node <"+i.nodeName+">",t,n))}if(n!=_||0==u){x=n-_;p.b+=null==x?l.substr(t,_,null):l.substr(t,_,x),i.addChild(f.createPCData(p.b)),++u}return n}if(!e&&18==r&&13==g){p.b+=String.fromCodePoint(38);x=n-_;return p.b+=null==x?l.substr(t,_,null):l.substr(t,_,x),i.addChild(f.createPCData(p.b)),++u,n}throw An.thrown(new Ln("Unexpected end",t,n))};var In=function(t){this.output=new d,this.pretty=t};In.__name__="haxe.xml.Printer",In.print=function(t,e){null==e&&(e=!1);var n=new In(e);return n.writeNode(t,""),n.output.b},In.prototype={writeNode:function(t,e){switch(t.nodeType){case 0:if(this.output.b+=c.string(e+"<"),t.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":m.toString(t.nodeType)));this.output.b+=c.string(t.nodeName);var n=t.attributes();while(n.hasNext()){var i=n.next();this.output.b+=c.string(" "+i+'="');var a=p.htmlEscape(t.get(i),!0);this.output.b+=c.string(a),this.output.b+='"'}if(this.hasChildren(t)){if(this.output.b+=">",this.pretty&&(this.output.b+="\n"),t.nodeType!=f.Document&&t.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element or Document but found "+(null==t.nodeType?"null":m.toString(t.nodeType)));var r=t.children,s=0;while(s<r.length){var o=r[s++];this.writeNode(o,this.pretty?e+"\t":e)}if(this.output.b+=c.string(e+"</"),t.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":m.toString(t.nodeType)));this.output.b+=c.string(t.nodeName),this.output.b+=">",this.pretty&&(this.output.b+="\n")}else this.output.b+="/>",this.pretty&&(this.output.b+="\n");break;case 1:if(t.nodeType==f.Document||t.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":m.toString(t.nodeType)));var _=t.nodeValue;if(0!=_.length){a=e+p.htmlEscape(_);this.output.b+=c.string(a),this.pretty&&(this.output.b+="\n")}break;case 2:if(this.output.b+=c.string(e+"<![CDATA["),t.nodeType==f.Document||t.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":m.toString(t.nodeType)));this.output.b+=c.string(t.nodeValue),this.output.b+="]]>",this.pretty&&(this.output.b+="\n");break;case 3:if(t.nodeType==f.Document||t.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":m.toString(t.nodeType)));var l=t.nodeValue,u=new RegExp("[\n\r\t]+","g".split("u").join(""));l=l.replace(u,""),l="\x3c!--"+l+"--\x3e",this.output.b+=null==e?"null":""+e,this.output.b+=c.string(p.trim(l)),this.pretty&&(this.output.b+="\n");break;case 4:if(t.nodeType==f.Document||t.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":m.toString(t.nodeType)));this.output.b+=c.string("<!DOCTYPE "+t.nodeValue+">"),this.pretty&&(this.output.b+="\n");break;case 5:if(t.nodeType==f.Document||t.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":m.toString(t.nodeType)));this.output.b+=c.string("<?"+t.nodeValue+"?>"),this.pretty&&(this.output.b+="\n");break;case 6:if(t.nodeType!=f.Document&&t.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element or Document but found "+(null==t.nodeType?"null":m.toString(t.nodeType)));r=t.children,s=0;while(s<r.length){o=r[s++];this.writeNode(o,e)}break}},hasChildren:function(t){if(t.nodeType!=f.Document&&t.nodeType!=f.Element)throw An.thrown("Bad node type, expected Element or Document but found "+(null==t.nodeType?"null":m.toString(t.nodeType)));var e=t.children,n=0;while(n<e.length){var i=e[n++];switch(i.nodeType){case 0:case 1:return!0;case 2:case 3:if(i.nodeType==f.Document||i.nodeType==f.Element)throw An.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":m.toString(i.nodeType)));if(0!=p.ltrim(i.nodeValue).length)return!0;break;default:}}return!1},__class__:In};var Bn=function(){};Bn.__name__="js.Boot",Bn.getClass=function(t){if(null==t)return null;if(t instanceof Array)return Array;var e=t.__class__;if(null!=e)return e;var n=Bn.__nativeClassName(t);return null!=n?Bn.__resolveNativeClass(n):null},Bn.__string_rec=function(t,e){if(null==t)return"null";if(e.length>=5)return"<...>";var n=typeof t;switch("function"==n&&(t.__name__||t.__ename__)&&(n="object"),n){case"function":return"<function>";case"object":if(t.__enum__){var i=s[t.__enum__],a=i.__constructs__[t._hx_index],r=a._hx_name;return a.__params__?(e+="\t",r+"("+function(n){var i,r=[],s=0,o=a.__params__;while(1){if(!(s<o.length))break;var _=o[s];s+=1,r.push(Bn.__string_rec(t[_],e))}return i=r,i}().join(",")+")"):r}if(t instanceof Array){var o="[";e+="\t";var _=0,l=t.length;while(_<l){var u=_++;o+=(u>0?",":"")+Bn.__string_rec(t[u],e)}return o+="]",o}var h;try{h=t.toString}catch(_){return"???"}if(null!=h&&h!=Object.toString&&"function"==typeof h){var c=t.toString();if("[object Object]"!=c)return c}o="{\n";e+="\t";var d=null!=t.hasOwnProperty,p=null;for(p in t)d&&!t.hasOwnProperty(p)||"prototype"!=p&&"__class__"!=p&&"__super__"!=p&&"__interfaces__"!=p&&"__properties__"!=p&&(2!=o.length&&(o+=", \n"),o+=e+p+" : "+Bn.__string_rec(t[p],e));return e=e.substring(1),o+="\n"+e+"}",o;case"string":return t;default:return String(t)}},Bn.__interfLoop=function(t,e){while(1){if(null==t)return!1;if(t==e)return!0;var n=t.__interfaces__;if(null!=n){var i=0,a=n.length;while(i<a){var r=i++,s=n[r];if(s==e||Bn.__interfLoop(s,e))return!0}}t=t.__super__}},Bn.__instanceof=function(t,e){if(null==e)return!1;switch(e){case Array:return t instanceof Array;case Gn:return"boolean"==typeof t;case Xn:return null!=t;case Yn:return"number"==typeof t;case Kn:return"number"==typeof t&&(0|t)===t;case String:return"string"==typeof t;default:if(null==t)return!1;if("function"==typeof e){if(Bn.__downcastCheck(t,e))return!0}else if("object"==typeof e&&Bn.__isNativeObj(e)&&t instanceof e)return!0;return e==Hn&&null!=t.__name__||(e==Wn&&null!=t.__ename__||null!=t.__enum__&&s[t.__enum__]==e)}},Bn.__downcastCheck=function(t,e){return t instanceof e||!!e.__isInterface__&&Bn.__interfLoop(Bn.getClass(t),e)},Bn.__nativeClassName=function(t){var e=Bn.__toStr.call(t).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},Bn.__isNativeObj=function(t){return null!=Bn.__nativeClassName(t)},Bn.__resolveNativeClass=function(t){return i[t]};var Nn=function(){};Nn.__name__="js.Browser",Nn.getLocalStorage=function(){try{var t=window.localStorage;if(t.getItem(""),0==t.length){var e="_hx_"+Math.random();t.setItem(e,e),t.removeItem(e)}return t}catch(n){return null}};var On=function(){};function Vn(t){return t instanceof Array?new Dn(t):t.iterator()}function Un(t,e){return null==e?null:(null==e.__id__&&(e.__id__=i.$haxeUID++),null==t.hx__closures__?t.hx__closures__={}:n=t.hx__closures__[e.__id__],null==n&&(n=e.bind(t),t.hx__closures__[e.__id__]=n),n);var n}On.__name__="js.html._CanvasElement.CanvasUtil",On.getContextWebGL=function(t,e){var n=t.getContext("webgl",e);if(null!=n)return n;n=t.getContext("experimental-webgl",e);return null!=n?n:null},i.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(l.now=performance.now.bind(performance)),null==String.fromCodePoint&&(String.fromCodePoint=function(t){return t<65536?String.fromCharCode(t):String.fromCharCode(55232+(t>>10))+String.fromCharCode(56320+(1023&t))}),String.prototype.__class__=String,String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var Kn={},Xn={},Yn=Number,Gn=Boolean,Hn={},Wn={};Bn.__toStr={}.toString,f.Element=0,f.PCData=1,f.CData=2,f.Comment=3,f.DocType=4,f.ProcessingInstruction=5,f.Document=6,S.instance=new S,T.DISPATCHING_SENTINEL=new C(null,null),P.root=new w,P.uncaughtError=new k,P.hidden=new A(!1),P.volume=new M(1),P._platform=S.instance,P._calledInit=!1,R.logger=new D(P._platform.createLogHandler("flambe")),G.__meta__={obj:{assets:[{main:[{name:"sun/sunStripes.png",md5:"2376226fe50a1fbf1450efe3deb713eb",bytes:14829},{name:"sun/mouthSmile.png",md5:"8a10b0cd842ed62fd3c755ec7d276bd1",bytes:1703},{name:"sun/eyebrow.png",md5:"e43b0bda8b52d0f73d27115ddaabbbac",bytes:469},{name:"sun/eyePupil.png",md5:"4dbeaf65cb862045f5ea8680ae5bb1ed",bytes:721},{name:"sun/ear.png",md5:"676aea963c0243b9e80a5a0e1fd20175",bytes:2430},{name:"sun/eye.png",md5:"722cb9af440c6a56896feee178edf3ab",bytes:1671},{name:"sun/sun.png",md5:"e4383a12b4058cc87a533b5b6edd1286",bytes:9654},{name:"sun/mouthOpen.png",md5:"d12e4144cf38ceeade58f71957339f60",bytes:775},{name:"beerStar.png",md5:"ceef9b8a475b27e2a3b335c200ce0b29",bytes:4346},{name:"title.png",md5:"070c12f83ea9fbad95327c9aece99404",bytes:63211},{name:"drinkFront.png",md5:"e855cee92718a5f3e1a7392fe916248a",bytes:5459},{name:"puke/puke3.png",md5:"07ba5a37dab2888a67e1b7692fd72c21",bytes:1089},{name:"puke/puke2.png",md5:"daad143db789be7b54b10796d0e005ce",bytes:1083},{name:"puke/puke.pex",md5:"f600e9e5653c4129accb99fb77b643c5",bytes:2310},{name:"puke/puke0.png",md5:"deab95c4d3e88793e9f9bcd259a81fd5",bytes:1082},{name:"puke/puke1.png",md5:"9e0748665121ad543db166bf8b7aca2e",bytes:987},{name:"puke/puke4.png",md5:"bbdc45a06af3da59f6c549dce21af3f9",bytes:994},{name:"flamingo.png",md5:"2215f45f1f4f8954e195585438cc5878",bytes:12184},{name:"runner/body/arm.png",md5:"f491e2180d91926ccafe33445414945c",bytes:426},{name:"runner/body/body.png",md5:"4f0504a7a90f6a3429c23f746501de23",bytes:4206},{name:"runner/body/shirt.png",md5:"0ee767fecccb3b0aad5f62fc0eb202a7",bytes:438},{name:"runner/body/hand.png",md5:"da8f907dcf0d654e7d165818124c4c2a",bytes:381},{name:"runner/body/shoe.png",md5:"44266ca38efdc09be6e41cddb89b0059",bytes:437},{name:"runner/body/pantBack.png",md5:"999ff88cea7ee0884f1c5de5a2ee12ca",bytes:509},{name:"runner/body/leg.png",md5:"44c573cbf09e8243d7382a04223398b6",bytes:322},{name:"runner/body/shorts.png",md5:"e95c35104d543827c3bbccbe02d317a5",bytes:280},{name:"runner/body/head.png",md5:"325901dbe772c9a57e4d7468e9c1a289",bytes:4436},{name:"runner/body/pantFront.png",md5:"6138687919e7ca48b872cf8e5113a9c9",bytes:559},{name:"body/body.png",md5:"516e0c3af06ff71b31e06dcc90a4a394",bytes:26311},{name:"body/hand.png",md5:"f94695c8dff2a439b80170db7d13dc89",bytes:4155},{name:"body/armTop.png",md5:"9bd02fa9176b8a4d792b8f7208d3b4a1",bytes:3778},{name:"body/head.png",md5:"49a23eb1a6333fcdae47acf74a37bf49",bytes:17496},{name:"body/armBottom.png",md5:"b3aad89486708d64f8aa7e87c60236a6",bytes:3548},{name:"beerTriangle.png",md5:"b1676d257e6cb0ae7976fe3352982da5",bytes:4164},{name:"timeFront.png",md5:"3bb88b9787aa298723d68ffbdaacf896",bytes:5440},{name:"meterBack.png",md5:"1071f150be61c78706c1520ba6dd4624",bytes:3822},{name:"cloud.png",md5:"0610986236c0e18abf4773458c535d6e",bytes:2009},{name:"timeMid.png",md5:"e3f8c1ea4767d449c3b14adff9f1430d",bytes:3732},{name:"mainBack.png",md5:"fbd6bd9c5b9f149f2bfe9eb1d1f6340e",bytes:34518},{name:"beerCircle.png",md5:"7ddd7543b0232f56ccf6ad13a3d6ce16",bytes:4229},{name:"text/phone.png",md5:"082f1b25c7408b0c48965f4c618a61f8",bytes:928},{name:"text/text4.png",md5:"74cf25d8a4cd67ec8f10fafbf07544b5",bytes:12523},{name:"text/text1.png",md5:"76c8410d802446c10b6626cf11f71449",bytes:15866},{name:"text/text2.png",md5:"62023c4dc38a98d09e649a4b50a74025",bytes:21883},{name:"text/text3.png",md5:"64704ce215bd597c6f44c5f7a25c993a",bytes:23732},{name:"table.png",md5:"6c73b3a15bd70669fb4bc10d01c63740",bytes:15485},{name:"playButton.png",md5:"687c8dd6c4745aa7ae865a3c410871a9",bytes:3665}],"background.png":[],bootstrap:[{name:"ball.png",md5:"cfbdbcf4cb3e3c4526b0746b49f2d805",bytes:26236},{name:"silence.mp3",md5:"607808d15b383bdf65355454bf314632",bytes:8950},{name:"ballLineWater.png",md5:"3aba2ce74b7d98656e300cbf6fe297ec",bytes:852},{name:"loadingBack.png",md5:"35effb32203feba71403df4a79c89468",bytes:71726},{name:"play.png",md5:"0bae891f519e596a553e1dc9fec9140f",bytes:3805}],".DS_Store":[]}]}},G._supportsCrossOrigin=function(t){var e,n;if(i.navigator.userAgent.indexOf("Linux; U; Android")>=0)n=!1;else{var a=new XMLHttpRequest;n=null!=a.withCredentials}return n||R.logger.warn("This browser does not support cross-domain asset loading, any Manifest.remoteBase setting will be ignored.",null),e=n,e}(),q._scratchPoint=new z,yt._sharedEvent=new ot,At._sharedEvent=new ut,Tt._sharedEvent=new ct,$t.CANVAS_TEXTURES=function(t){var e,n=new _("(iPhone|iPod|iPad)","");return e=n.match(window.navigator.userAgent),e}(),ne._mediaRefCount=0,ne._detectBlobSupport=!0,me.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"],me.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&new _("Mobile(/.*)? Safari","").match(i.navigator.userAgent),be._detectSupport=!0,xe._scratchMatrix=new mt,Ze._scratch={x:0,y:0,scale:1},sn.SPRITE_SCRATCH=new z,on._scratchLocal=new z,pn.DESTROYED_DURATION=2,pn.ACTIVE_DURATION=4,Fn.escapes=function(t){var e,n=new En;return n.h["lt"]="<",n.h["gt"]=">",n.h["amp"]="&",n.h["quot"]='"',n.h["apos"]="'",e=n,e}(),en.main()}).call(this,n("c8ba"))},"56d7":function(t,e,n){"use strict";n.r(e);var i=n("2b0e"),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[t.ui?e(t.ui.def,t._b({tag:"component",staticClass:"ui",style:{width:t.gameWidth+"px"}},"component",t.uiprops,!1)):t._e(),e("canvas",{ref:"canvas"})],1)},r=[],s={name:"App",data(){return{gameWidth:1920,gameHeight:1080,stack:[]}},computed:{ui(){const t=this.stack.length-1;return this.stack[t]},uiprops(){return{...this.ui.props}}},mounted(){window.flambe={canvas:this.$refs.canvas};const t=n("5085");this.stack=t.flambe.System.get_web().stack;const e=t.game.Container.getSize;window.addEventListener("resize",this.layoutScale.bind(this,e)),this.layoutScale(e),t.game.Main.start(this.gameWidth,this.gameHeight)},methods:{layoutScale(t){var e=t(this.gameWidth,this.gameHeight,window.innerWidth,window.innerHeight);document.documentElement.style.setProperty("--layout-scale",e.scale),document.documentElement.style.setProperty("--layout-x",e.x+"px"),document.documentElement.style.setProperty("--layout-y",e.y+"px")}}},o=s,_=(n("ca51"),n("2877")),l=Object(_["a"])(o,a,r,!1,null,null,null),u=l.exports;i["a"].config.productionTip=!1,new i["a"]({render:t=>t(u)}).$mount("#app")},ca51:function(t,e,n){"use strict";n("2af0")}});
//# sourceMappingURL=app.5d593cbf.js.map