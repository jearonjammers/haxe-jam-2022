(function(e){function t(t){for(var i,s,o=t[0],_=t[1],h=t[2],u=0,c=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&c.push(a[s][0]),a[s]=0;for(i in _)Object.prototype.hasOwnProperty.call(_,i)&&(e[i]=_[i]);l&&l(t);while(c.length)c.shift()();return r.push.apply(r,h||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var _=n[o];0!==a[_]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/haxe-jam-2022/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],_=o.push.bind(o);o.push=t,o=o.slice();for(var h=0;h<o.length;h++)t(o[h]);var l=_;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2af0":function(e,t,n){},5085:function(e,t,n){"use strict";(function(t){var n=e.exports,i=t;i.$hx_scope=i.$hx_scope||{};n["flambe"]=n["flambe"]||{},n["game"]=n["game"]||{},n["game"]["Container"]=n["game"]["Container"]||{},n["game"]["Main"]=n["game"]["Main"]||{};var a,r=function(){return ui.__string_rec(this,"")},s=s||{};function o(e,t){var n=Object.create(e);for(var i in t)n[i]=t[i];return t.toString!==Object.prototype.toString&&(n.toString=t.toString),n}var _=function(e,t){this.r=new RegExp(e,t.split("u").join(""))};_.__name__="EReg",_.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},matched:function(e){if(null!=this.r.m&&e>=0&&e<this.r.m.length)return this.r.m[e];throw $n.thrown("EReg::matched")},matchedPos:function(){if(null==this.r.m)throw $n.thrown("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},__class__:_};var h=function(){};h.__name__="HxOverrides",h.cca=function(e,t){var n=e.charCodeAt(t);if(n==n)return n},h.substr=function(e,t,n){if(null==n)n=e.length;else if(n<0){if(0!=t)return"";n=e.length+n}return e.substr(t,n)},h.remove=function(e,t){var n=e.indexOf(t);return-1!=n&&(e.splice(n,1),!0)},h.now=function(){return Date.now()};var l=function(){};l.__name__="Lambda",l.array=function(e){var t=[],n=pi(e);while(n.hasNext()){var i=n.next();t.push(i)}return t},l.count=function(e,t){var n=0;if(null==t){var i=pi(e);while(i.hasNext())i.next(),++n}else{var a=pi(e);while(a.hasNext()){var r=a.next();t(r)&&++n}}return n},Math.__name__="Math";var u=function(){};u.__name__="Reflect",u.field=function(e,t){try{return e[t]}catch(n){return null}};var c=function(){};c.__name__="Std",c.string=function(e){return ui.__string_rec(e,"")},c.parseInt=function(e){if(null!=e){var t=0,n=e.length;while(t<n){var i=t++,a=e.charCodeAt(i);if(a<=8||a>=14&&32!=a&&45!=a){var r=e.charCodeAt(i+1),s=parseInt(e,120==r||88==r?16:10);return isNaN(s)?null:s}}}return null};var d=function(){this.b=""};d.__name__="StringBuf",d.prototype={__class__:d};var p=function(){};p.__name__="StringTools",p.htmlEscape=function(e,t){var n="",i=0,a=e;while(i<a.length){e=a;var r=i++,s=e.charCodeAt(r);s>=55296&&s<=56319&&(s=s-55232<<10|1023&e.charCodeAt(r+1));var o=s;o>=65536&&++i;var _=o;switch(_){case 34:n+=t?"&quot;":String.fromCodePoint(_);break;case 38:n+="&amp;";break;case 39:n+=t?"&#039;":String.fromCodePoint(_);break;case 60:n+="&lt;";break;case 62:n+="&gt;";break;default:n+=String.fromCodePoint(_)}}return n},p.startsWith=function(e,t){return e.length>=t.length&&0==e.lastIndexOf(t,0)},p.isSpace=function(e,t){var n=h.cca(e,t);return n>8&&n<14||32==n},p.ltrim=function(e){var t=e.length,n=0;while(n<t&&p.isSpace(e,n))++n;return n>0?h.substr(e,n,t-n):e},p.rtrim=function(e){var t=e.length,n=0;while(n<t&&p.isSpace(e,t-n-1))++n;return n>0?h.substr(e,0,t-n):e},p.trim=function(e){return p.ltrim(p.rtrim(e))},p.replace=function(e,t,n){return e.split(t).join(n)};var m={toString:function(e){switch(e){case 0:return"Element";case 1:return"PCData";case 2:return"CData";case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"}}},f=function(e){this.nodeType=e,this.children=[],this.attributeMap=new ni};f.__name__="Xml",f.parse=function(e){return hi.parse(e)},f.createElement=function(e){var t=new f(f.Element);if(t.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":m.toString(t.nodeType)));return t.nodeName=e,t},f.createPCData=function(e){var t=new f(f.PCData);if(t.nodeType==f.Document||t.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":m.toString(t.nodeType)));return t.nodeValue=e,t},f.createCData=function(e){var t=new f(f.CData);if(t.nodeType==f.Document||t.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":m.toString(t.nodeType)));return t.nodeValue=e,t},f.createComment=function(e){var t=new f(f.Comment);if(t.nodeType==f.Document||t.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":m.toString(t.nodeType)));return t.nodeValue=e,t},f.createDocType=function(e){var t=new f(f.DocType);if(t.nodeType==f.Document||t.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":m.toString(t.nodeType)));return t.nodeValue=e,t},f.createProcessingInstruction=function(e){var t=new f(f.ProcessingInstruction);if(t.nodeType==f.Document||t.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":m.toString(t.nodeType)));return t.nodeValue=e,t},f.createDocument=function(){return new f(f.Document)},f.prototype={get:function(e){if(this.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));return this.attributeMap.h[e]},set:function(e,t){if(this.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));this.attributeMap.h[e]=t},exists:function(e){if(this.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));return Object.prototype.hasOwnProperty.call(this.attributeMap.h,e)},attributes:function(){if(this.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));return new ii(this.attributeMap.h)},elements:function(){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));var e=[],t=0,n=this.children;while(t<n.length){var i=n[t];++t,i.nodeType==f.Element&&e.push(i)}return new si(e)},firstElement:function(){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));var e=0,t=this.children;while(e<t.length){var n=t[e];if(++e,n.nodeType==f.Element)return n}return null},addChild:function(e){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));null!=e.parent&&e.parent.removeChild(e),this.children.push(e),e.parent=this},removeChild:function(e){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":m.toString(this.nodeType)));return!!h.remove(this.children,e)&&(e.parent=null,!0)},toString:function(){return li.print(this)},__class__:f};var g=function(){};g.__name__="flambe.util.Disposable",g.__isInterface__=!0,g.prototype={__class__:g};var v=function(){this._flags=0,this.next=null,this.owner=null};v.__name__="flambe.Component",v.__interfaces__=[g],v.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(e){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:v};var b=function(){v.call(this),this._disposables=[]};b.__name__="flambe.Disposer",b.__super__=v,b.prototype=o(v.prototype,{get_name:function(){return"Disposer_30"},add:function(e){return this._disposables.push(e),this},onRemoved:function(){this.freeDisposables()},dispose:function(){v.prototype.dispose.call(this),this.freeDisposables()},freeDisposables:function(){var e=this._disposables;this._disposables=[];var t=0;while(t<e.length){var n=e[t];++t,n.dispose()}},__class__:b});var w=function(){this.firstComponent=null,this.next=null,this.firstChild=null,this.parent=null,this._compMap={}};w.__name__="flambe.Entity",w.__interfaces__=[g],w.prototype={add:function(e){null!=e.owner&&e.owner.remove(e);var t=e.get_name(),n=this._compMap[t];null!=n&&this.remove(n),this._compMap[t]=e;var i=null,a=this.firstComponent;while(null!=a)i=a,a=a.next;return null!=i?i.next=e:this.firstComponent=e,e.owner=this,e.next=null,e.onAdded(),this},remove:function(e){var t=null,n=this.firstComponent;while(null!=n){var i=n.next;if(n==e)return null==t?this.firstComponent=i:(t.owner=this,t.next=i),delete this._compMap[n.get_name()],0!=(1&n._flags)&&(n.onStop(),n._flags&=-2),n.onRemoved(),n.owner=null,n.next=null,!0;t=n,n=i}return!1},addChild:function(e,t){if(null==t&&(t=!0),null!=e.parent&&e.parent.removeChild(e),e.parent=this,t){var n=null,i=this.firstChild;while(null!=i)n=i,i=i.next;null!=n?n.next=e:this.firstChild=e}else e.next=this.firstChild,this.firstChild=e;return this},removeChild:function(e){var t=null,n=this.firstChild;while(null!=n){var i=n.next;if(n==e)return null==t?this.firstChild=i:t.next=i,n.parent=null,void(n.next=null);t=n,n=i}},disposeChildren:function(){while(null!=this.firstChild)this.firstChild.dispose()},dispose:function(){null!=this.parent&&this.parent.removeChild(this);while(null!=this.firstComponent)this.firstComponent.dispose();this.disposeChildren()},toString:function(){return this.toStringImpl("")},toStringImpl:function(e){var t="",n=this.firstComponent;while(null!=n)t+=n.get_name(),null!=n.next&&(t+=", "),n=n.next;t+="\n";var i=String.fromCodePoint(9492),a=String.fromCodePoint(9500),r=String.fromCodePoint(9472),s=String.fromCodePoint(9474);n=this.firstChild;while(null!=n){var o=null==n.next;t+=e+(o?i:a)+r+r+" ",t+=n.toStringImpl(e+(o?" ":s)+"   "),n=n.next}return t},__class__:w};var y=function(){};y.__name__="flambe.util.PackageLog";var x=function(){};x.__name__="flambe.platform.Platform",x.__isInterface__=!0,x.prototype={__class__:x};var S=function(){};S.__name__="flambe.platform.html.HtmlPlatform",S.__interfaces__=[x],S.prototype={init:function(){var e=this;xt.fixAndroidMath();var t=null;try{t=window.flambe.canvas}catch(b){}Jt.that(null!=t,"Could not find a Flambe canvas! Are you embedding with flambe.js?"),t.setAttribute("tabindex","0"),t.style.outlineStyle="none",t.style.webkitTapHighlightColor="transparent",this._stage=new wt(t),this._pointer=new Be,this._mouse=new gt(this._pointer,t),this._renderer=this.createRenderer(t),this.mainLoop=new $e,this.musicPlaying=!1,this._canvas=t,this._container=t.parentElement,this._container.style.overflow="hidden",this._container.style.position="relative",this._container.style.msTouchAction="none";var n=0,a=function(i){if(!(i.timeStamp-n<1e3)){var a=t.getBoundingClientRect(),r=e.getX(i,a),s=e.getY(i,a);switch(i.type){case"mousedown":i.target==t&&(i.preventDefault(),e._mouse.submitDown(r,s,i.button),t.focus());break;case"mousemove":e._mouse.submitMove(r,s);break;case"mouseup":e._mouse.submitUp(r,s,i.button);break;case"DOMMouseScroll":case"mousewheel":var o="mousewheel"==i.type?i.wheelDelta/40:-i.detail;e._mouse.submitScroll(r,s,o)&&i.preventDefault();break}}};window.addEventListener("mousedown",a,!1),window.addEventListener("mousemove",a,!1),window.addEventListener("mouseup",a,!1),t.addEventListener("mousewheel",a,!1),t.addEventListener("DOMMouseScroll",a,!1),t.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1);var r="undefined"!=typeof window.ontouchstart,s="msMaxTouchPoints"in window.navigator&&window.navigator.msMaxTouchPoints>1;if(r||s){var o=new Le(this._pointer,r?4:i.navigator.msMaxTouchPoints);this._touch=o;var _=function(t){var i=r?t.changedTouches:[t],a=t.target.getBoundingClientRect();switch(n=t.timeStamp,t.type){case"MSPointerMove":case"pointermove":case"touchmove":t.preventDefault();var s=0;while(s<i.length){var _=i[s];++s;var h=e.getX(_,a),l=e.getY(_,a),u=0|(r?_.identifier:_.pointerId);o.submitMove(u,h,l)}break;case"MSPointerUp":case"pointerup":case"touchcancel":case"touchend":s=0;while(s<i.length){_=i[s];++s;h=e.getX(_,a),l=e.getY(_,a),u=0|(r?_.identifier:_.pointerId);o.submitUp(u,h,l)}break;case"MSPointerDown":case"pointerdown":case"touchstart":t.preventDefault(),xt.SHOULD_HIDE_MOBILE_BROWSER&&xt.hideMobileBrowser();s=0;while(s<i.length){_=i[s];++s;h=e.getX(_,a),l=e.getY(_,a),u=0|(r?_.identifier:_.pointerId);o.submitDown(u,h,l)}break}};r?(t.addEventListener("touchstart",_,!1),t.addEventListener("touchmove",_,!1),t.addEventListener("touchend",_,!1),t.addEventListener("touchcancel",_,!1)):(t.addEventListener("MSPointerDown",_,!1),t.addEventListener("MSPointerMove",_,!1),t.addEventListener("MSPointerUp",_,!1))}else this._touch=new Ge;var h=window.onerror;window.onerror=function(e,t,n){return P.uncaughtError.emit(e),null!=h&&h(e,t,n)};var l=xt.loadExtension("hidden",window.document);if(null!=l.value){var c=function(e){P.hidden.set__(u.field(window.document,l.field))};c(null),window.document.addEventListener(l.prefix+"visibilitychange",c,!1)}else{var d=function(e){P.hidden.set__("pagehide"==e.type)};window.addEventListener("pageshow",d,!1),window.addEventListener("pagehide",d,!1)}P.hidden.get_changed().connect((function(t,n){t||(e._skipFrame=!0)})),this._skipFrame=!1,this._lastUpdate=Date.now();var p=xt.loadExtension("requestAnimationFrame").value;if(null!=p){var m=window.performance,f=null!=m&&xt.polyfill("now",m);f?this._lastUpdate=m.now():D.logger.warn("No monotonic timer support, falling back to the system date",null);var g=null;g=function(n){e.update(f?m.now():n),p(g,t)},p(g,t)}else D.logger.warn("No requestAnimationFrame support, falling back to setInterval",null),window.setInterval((function(){e.update(Date.now())}),16);new Oe(this),this._catapult=lt.canUse()?new lt:null;var v=["renderer",this._renderer.get_type()];D.logger.info("Initialized HTML platform",v)},loadAssetPack:function(e){return new ht(this,e).promise},getStage:function(){return this._stage},getStorage:function(){if(null==this._storage){var e=ci.getLocalStorage();null!=e?this._storage=new yt(e):(D.logger.warn("localStorage is unavailable, falling back to unpersisted storage",null),this._storage=new We)}return this._storage},getLocale:function(){var e=i.navigator.language;return null==e&&(e=i.navigator.userLanguage),e},createLogHandler:function(e){return pt.isSupported()?new pt(e):null},getTime:function(){return Date.now()/1e3},getCatapultClient:function(){return this._catapult},update:function(e){var t=(e-this._lastUpdate)/1e3;this._lastUpdate=e,P.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(t),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getMouse:function(){return this._mouse},getTouch:function(){return this._touch},getKeyboard:function(){var e=this;if(null==this._keyboard){this._keyboard=new Me;var t=function(t){switch(t.type){case"keydown":e._keyboard.submitDown(t.keyCode)&&t.preventDefault();break;case"keyup":e._keyboard.submitUp(t.keyCode);break}};this._canvas.addEventListener("keydown",t,!1),this._canvas.addEventListener("keyup",t,!1)}return this._keyboard},getWeb:function(){return null==this._web&&(this._web=new kt),this._web},getExternal:function(){return null==this._external&&(this._external=new ct),this._external},getMotion:function(){return null==this._motion&&(this._motion=new ft),this._motion},getRenderer:function(){return this._renderer},getX:function(e,t){return(e.clientX-t.left)*this._stage.get_width()/t.width},getY:function(e,t){return(e.clientY-t.top)*this._stage.get_height()/t.height},createRenderer:function(e){try{var t=di.getContextWebGL(e,{depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=t){if(!xt.detectSlowDriver(t))return new Pt(this._stage,t);D.logger.warn("Detected a slow WebGL driver, falling back to canvas",null)}}catch(n){}return new st(e)},__class__:S};var k=function(e,t){this._value=e,this._changed=null!=t?new T(t):null};k.__name__="flambe.util.Value",k.prototype={watch:function(e){return e(this._value,this._value),this.get_changed().connect(e)},set__:function(e){var t=this._value;return e!=t&&(this._value=e,null!=this._changed&&this._changed.emit(e,t)),e},get_changed:function(){return null==this._changed&&(this._changed=new T),this._changed},toString:function(){return""+c.string(this._value)},__class__:k};var C=function(e,t){this._next=null,this._signal=e,this._listener=t,this.stayInList=!0};C.__name__="flambe.util.SignalConnection",C.__interfaces__=[g],C.prototype={once:function(){return this.stayInList=!1,this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:C};var A=function(e){this._head=null!=e?new C(this,e):null,this._deferredTasks=null};A.__name__="flambe.util.SignalBase",A.prototype={connectImpl:function(e,t){var n=this,i=new C(this,e);return this._head==A.DISPATCHING_SENTINEL?this.defer((function(){n.listAdd(i,t)})):this.listAdd(i,t),i},disconnect:function(e){var t=this;this._head==A.DISPATCHING_SENTINEL?this.defer((function(){t.listRemove(e)})):this.listRemove(e)},defer:function(e){var t=null,n=this._deferredTasks;while(null!=n)t=n,n=n.next;var i=new nn(e);null!=t?t.next=i:this._deferredTasks=i},willEmit:function(){Jt.that(this._head!=A.DISPATCHING_SENTINEL);var e=this._head;return this._head=A.DISPATCHING_SENTINEL,e},didEmit:function(e){this._head=e;var t=this._deferredTasks;this._deferredTasks=null;while(null!=t)t.fn(),t=t.next},listAdd:function(e,t){if(t)e._next=this._head,this._head=e;else{var n=null,i=this._head;while(null!=i)n=i,i=i._next;null!=n?n._next=e:this._head=e}},listRemove:function(e){var t=null,n=this._head;while(null!=n){if(n==e){var i=n._next;return void(null==t?this._head=i:t._next=i)}t=n,n=n._next}},__class__:A};var T=function(e){A.call(this,e)};T.__name__="flambe.util.Signal2",T.__super__=A,T.prototype=o(A.prototype,{connect:function(e,t){return null==t&&(t=!1),this.connectImpl(e,t)},emit:function(e,t){var n=this;this._head==A.DISPATCHING_SENTINEL?this.defer((function(){n.emitImpl(e,t)})):this.emitImpl(e,t)},emitImpl:function(e,t){var n=this.willEmit(),i=n;while(null!=i)i._listener(e,t),i.stayInList||i.dispose(),i=i._next;this.didEmit(n)},__class__:T});var E=function(e){A.call(this,e)};E.__name__="flambe.util.Signal1",E.__super__=A,E.prototype=o(A.prototype,{connect:function(e,t){return null==t&&(t=!1),this.connectImpl(e,t)},emit:function(e){var t=this;this._head==A.DISPATCHING_SENTINEL?this.defer((function(){t.emitImpl(e)})):this.emitImpl(e)},emitImpl:function(e){var t=this.willEmit(),n=t;while(null!=n)n._listener(e),n.stayInList||n.dispose(),n=n._next;this.didEmit(t)},__class__:E});var M=function(e,t){this._behavior=null,k.call(this,e,t)};M.__name__="flambe.animation.AnimatedFloat",M.__super__=k,M.prototype=o(k.prototype,{set__:function(e){return this._behavior=null,k.prototype.set__.call(this,e)},update:function(e){null!=this._behavior&&(k.prototype.set__.call(this,this._behavior.update(e)),this._behavior.isComplete()&&(this._behavior=null))},animateTo:function(e,t,n){this.set_behavior(new O(this._value,e,t,n))},set_behavior:function(e){return this._behavior=e,this.update(0),e},__class__:M});var P=n["flambe"]["System"]=function(){};P.__name__="flambe.System",P.init=function(){P._calledInit||(P._platform.init(),P._calledInit=!0)},P.loadAssetPack=function(e){return P.assertCalledInit(),P._platform.loadAssetPack(e)},P.createLogger=function(e){return new R(P._platform.createLogHandler(e))},P.get_time=function(){return P.assertCalledInit(),P._platform.getTime()},P.get_stage=function(){return P.assertCalledInit(),P._platform.getStage()},P.get_storage=function(){return P.assertCalledInit(),P._platform.getStorage()},P.get_pointer=function(){return P.assertCalledInit(),P._platform.getPointer()},P.get_mouse=function(){return P.assertCalledInit(),P._platform.getMouse()},P.get_touch=function(){return P.assertCalledInit(),P._platform.getTouch()},P.get_keyboard=function(){return P.assertCalledInit(),P._platform.getKeyboard()},P.get_web=function(){return P.assertCalledInit(),P._platform.getWeb()},P.get_external=function(){return P.assertCalledInit(),P._platform.getExternal()},P.get_locale=function(){return P.assertCalledInit(),P._platform.getLocale()},P.get_motion=function(){return P.assertCalledInit(),P._platform.getMotion()},P.get_renderer=function(){return P.assertCalledInit(),P._platform.getRenderer()},P.assertCalledInit=function(){Jt.that(P._calledInit,"You must call System.init() first")};var R=function(e){this._handler=e};R.__name__="flambe.util.Logger",R.prototype={info:function(e,t){this.log($t.Info,e,t)},warn:function(e,t){this.log($t.Warn,e,t)},error:function(e,t){this.log($t.Error,e,t)},log:function(e,t,n){null!=this._handler&&(null==t&&(t=""),null!=n&&(t=an.withFields(t,n)),this._handler.log(e,t))},__class__:R};var D=function(){};D.__name__="flambe.Log",D.__super__=y,D.prototype=o(y.prototype,{__class__:D});var B=function(e){null==e&&(e=1),this._realDt=0,v.call(this),this.scale=new M(e)};B.__name__="flambe.SpeedAdjuster",B.__super__=v,B.prototype=o(v.prototype,{get_name:function(){return"SpeedAdjuster_33"},onUpdate:function(e){this._realDt>0&&(e=this._realDt,this._realDt=0),this.scale.update(e)},__class__:B});var F=function(){};F.__name__="flambe.animation.Behavior",F.__isInterface__=!0,F.prototype={__class__:F};var I=function(e,t){this._target=e,this._fn=t};I.__name__="flambe.animation.Binding",I.__interfaces__=[F],I.prototype={update:function(e){var t=this._target._value;return null!=this._fn?this._fn(t):t},isComplete:function(){return!1},__class__:I};var L=function(){};L.__name__="flambe.animation.Ease",L.linear=function(e){return e},L.cubeIn=function(e){return e*e*e},L.cubeOut=function(e){return 1+--e*e*e},L.sineIn=function(e){return 1-Math.cos(1.5707963267948966*e)},L.sineOut=function(e){return Math.sin(1.5707963267948966*e)},L.bounceOut=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-.5454545454545454)*(e-.5454545454545454)+.75:e<.9090909090909091?7.5625*(e-.8181818181818182)*(e-.8181818181818182)+.9375:7.5625*(e-.9545454545454546)*(e-.9545454545454546)+.984375},L.expoOut=function(e){return 1-Math.pow(2,-10*e)},L.backOut=function(e){return 1- --e*e*(-2.70158*e-1.70158)};var N=function(e,t,n,i,a){null==a&&(a=0),null==i&&(i=0),null==n&&(n=1),this.start=e,this.end=t,this.cycles=i,this.speed=new M(n),this._count=1.5707963267948966+a*(3.141592653589793/n),this._distance=.5*(e-t),this._center=t+this._distance};N.__name__="flambe.animation.Sine",N.__interfaces__=[F],N.prototype={update:function(e){return this.speed.update(e),this._count+=e*(3.141592653589793/this.speed._value),this.isComplete()?this._center+3.141592653589793*this._distance:this._center+Math.sin(this._count)*this._distance},isComplete:function(){return this.cycles>0&&(this._count-1.5707963267948966)/3.141592653589793*.5>=this.cycles},__class__:N};var O=function(e,t,n,i){this._from=e,this._to=t,this._duration=n,this.elapsed=0,this._easing=null!=i?i:L.linear};O.__name__="flambe.animation.Tween",O.__interfaces__=[F],O.prototype={update:function(e){return this.elapsed+=e,this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:O};var Y=function(){};Y.__name__="flambe.asset.Asset",Y.__isInterface__=!0,Y.__interfaces__=[g],Y.prototype={__class__:Y};var X=s["flambe.asset.AssetFormat"]={__ename__:!0,__constructs__:null,WEBP:{_hx_name:"WEBP",_hx_index:0,__enum__:"flambe.asset.AssetFormat",toString:r},JXR:{_hx_name:"JXR",_hx_index:1,__enum__:"flambe.asset.AssetFormat",toString:r},PNG:{_hx_name:"PNG",_hx_index:2,__enum__:"flambe.asset.AssetFormat",toString:r},JPG:{_hx_name:"JPG",_hx_index:3,__enum__:"flambe.asset.AssetFormat",toString:r},GIF:{_hx_name:"GIF",_hx_index:4,__enum__:"flambe.asset.AssetFormat",toString:r},DDS:{_hx_name:"DDS",_hx_index:5,__enum__:"flambe.asset.AssetFormat",toString:r},PVR:{_hx_name:"PVR",_hx_index:6,__enum__:"flambe.asset.AssetFormat",toString:r},PKM:{_hx_name:"PKM",_hx_index:7,__enum__:"flambe.asset.AssetFormat",toString:r},MP3:{_hx_name:"MP3",_hx_index:8,__enum__:"flambe.asset.AssetFormat",toString:r},M4A:{_hx_name:"M4A",_hx_index:9,__enum__:"flambe.asset.AssetFormat",toString:r},OPUS:{_hx_name:"OPUS",_hx_index:10,__enum__:"flambe.asset.AssetFormat",toString:r},OGG:{_hx_name:"OGG",_hx_index:11,__enum__:"flambe.asset.AssetFormat",toString:r},WAV:{_hx_name:"WAV",_hx_index:12,__enum__:"flambe.asset.AssetFormat",toString:r},Data:{_hx_name:"Data",_hx_index:13,__enum__:"flambe.asset.AssetFormat",toString:r}};X.__constructs__=[X.WEBP,X.JXR,X.PNG,X.JPG,X.GIF,X.DDS,X.PVR,X.PKM,X.MP3,X.M4A,X.OPUS,X.OGG,X.WAV,X.Data];var U=function(e,t,n,i){this.name=e,this.url=t,this.format=n,this.bytes=i};U.__name__="flambe.asset.AssetEntry",U.prototype={__class__:U};var V=function(){};V.__name__="flambe.asset.AssetPack",V.__isInterface__=!0,V.__interfaces__=[g],V.prototype={__class__:V};var K=function(){};K.__name__="flambe.asset.File",K.__isInterface__=!0,K.__interfaces__=[Y],K.prototype={__class__:K};var W=function(){this._remoteBase=null,this._localBase=null,this._entries=[]};W.__name__="flambe.asset.Manifest",W.fromAssets=function(e,t){null==t&&(t=!0);var n=u.field(oi.getType(W).assets[0],e);if(null==n){if(t)throw $n.thrown(an.withFields("Missing asset pack",["name",e]));return null}var i=new W;i.set_localBase("assets");var a=0;while(a<n.length){var r=n[a];++a;var s=r.name,o=e+"/"+s+"?v="+c.string(r.md5),_=W.inferFormat(s);_!=X.Data&&(s=an.removeFileExtension(s)),i.add(s,o,r.bytes,_)}return i},W.inferFormat=function(e){var t=an.getUrlExtension(e);if(null!=t)switch(t.toLowerCase()){case"dds":return X.DDS;case"gif":return X.GIF;case"jpeg":case"jpg":return X.JPG;case"jxr":case"wdp":return X.JXR;case"m4a":return X.M4A;case"mp3":return X.MP3;case"ogg":return X.OGG;case"opus":return X.OPUS;case"pkm":return X.PKM;case"png":return X.PNG;case"pvr":return X.PVR;case"wav":return X.WAV;case"webp":return X.WEBP}else D.logger.warn("No file extension for asset, it will be loaded as data",["url",e]);return X.Data},W.prototype={add:function(e,t,n,i){null==n&&(n=0),null==i&&(i=W.inferFormat(t));var a=new U(e,t,i,n);return this._entries.push(a),a},iterator:function(){return new si(this._entries)},getFullURL:function(e){var t=null!=this.get_remoteBase()&&W._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=t?an.joinPath(t,e.url):e.url},get_localBase:function(){return this._localBase},set_localBase:function(e){return null!=e&&Jt.that(!p.startsWith(e,"http://")&&!p.startsWith(e,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://"),this._localBase=e},get_remoteBase:function(){return this._remoteBase},__class__:W};var G=s["flambe.display.BlendMode"]={__ename__:!0,__constructs__:null,Normal:{_hx_name:"Normal",_hx_index:0,__enum__:"flambe.display.BlendMode",toString:r},Add:{_hx_name:"Add",_hx_index:1,__enum__:"flambe.display.BlendMode",toString:r},Multiply:{_hx_name:"Multiply",_hx_index:2,__enum__:"flambe.display.BlendMode",toString:r},Screen:{_hx_name:"Screen",_hx_index:3,__enum__:"flambe.display.BlendMode",toString:r},Mask:{_hx_name:"Mask",_hx_index:4,__enum__:"flambe.display.BlendMode",toString:r},Copy:{_hx_name:"Copy",_hx_index:5,__enum__:"flambe.display.BlendMode",toString:r}};G.__constructs__=[G.Normal,G.Add,G.Multiply,G.Screen,G.Mask,G.Copy];var H=s["flambe.display.EmitterType"]={__ename__:!0,__constructs__:null,Gravity:{_hx_name:"Gravity",_hx_index:0,__enum__:"flambe.display.EmitterType",toString:r},Radial:{_hx_name:"Radial",_hx_index:1,__enum__:"flambe.display.EmitterType",toString:r}};H.__constructs__=[H.Gravity,H.Radial];var j=function(e,t){this._file=e.getFile(t+".pex");var n=f.parse(this._file.toString()),i=0,a=0,r=t.lastIndexOf("/"),s=r>=0?h.substr(t,0,r+1):"";this.textures=[];var o=n.firstElement().elements();while(o.hasNext()){var _=o.next();if(_.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==_.nodeType?"null":m.toString(_.nodeType)));switch(_.nodeName.toLowerCase()){case"angle":this.angle=j.getFloat(_,"value");break;case"anglevariance":this.angleVariance=j.getFloat(_,"value");break;case"blendfuncdestination":a=0|j.getFloat(_,"value");break;case"blendfuncsource":i=0|j.getFloat(_,"value");break;case"duration":this.duration=j.getFloat(_,"value");break;case"emittertype":this.type=0==(0|j.getFloat(_,"value"))?H.Gravity:H.Radial;break;case"finishcolor":this.alphaEnd=j.getFloat(_,"alpha");break;case"finishcolorvariance":this.alphaEndVariance=j.getFloat(_,"alpha");break;case"finishparticlesize":this.sizeEnd=j.getFloat(_,"value");break;case"finishparticlesizevariance":this.sizeEndVariance=j.getFloat(_,"value");break;case"gravity":this.gravityX=j.getFloat(_,"x"),this.gravityY=j.getFloat(_,"y");break;case"maxparticles":this.maxParticles=0|j.getFloat(_,"value");break;case"maxradius":this.maxRadius=j.getFloat(_,"value");break;case"maxradiusvariance":this.maxRadiusVariance=j.getFloat(_,"value");break;case"minradius":this.minRadius=j.getFloat(_,"value");break;case"particlelifespan":this.lifespan=j.getFloat(_,"value");break;case"particlelifespanvariance":this.lifespanVariance=j.getFloat(_,"value");break;case"radialacceleration":this.radialAccel=j.getFloat(_,"value");break;case"radialaccelvariance":this.radialAccelVariance=j.getFloat(_,"value");break;case"rotatepersecond":this.rotatePerSecond=j.getFloat(_,"value");break;case"rotatepersecondvariance":this.rotatePerSecondVariance=j.getFloat(_,"value");break;case"rotationend":this.rotationEnd=j.getFloat(_,"value");break;case"rotationendvariance":this.rotationEndVariance=j.getFloat(_,"value");break;case"rotationstart":this.rotationStart=j.getFloat(_,"value");break;case"rotationstartvariance":this.rotationStartVariance=j.getFloat(_,"value");break;case"sourcepositionvariance":this.emitXVariance=j.getFloat(_,"x"),this.emitYVariance=j.getFloat(_,"y");break;case"speed":this.speed=j.getFloat(_,"value");break;case"speedvariance":this.speedVariance=j.getFloat(_,"value");break;case"startcolor":this.alphaStart=j.getFloat(_,"alpha");break;case"startcolorvariance":this.alphaStartVariance=j.getFloat(_,"alpha");break;case"startparticlesize":this.sizeStart=j.getFloat(_,"value");break;case"startparticlesizevariance":this.sizeStartVariance=j.getFloat(_,"value");break;case"tangentialacceleration":this.tangentialAccel=j.getFloat(_,"value");break;case"tangentialaccelvariance":this.tangentialAccelVariance=j.getFloat(_,"value");break;case"texture":this.textures=[e.getTexture(s+an.removeFileExtension(_.get("name"))+"0"),e.getTexture(s+an.removeFileExtension(_.get("name"))+"1"),e.getTexture(s+an.removeFileExtension(_.get("name"))+"2"),e.getTexture(s+an.removeFileExtension(_.get("name"))+"3"),e.getTexture(s+an.removeFileExtension(_.get("name"))+"4")];break}}this.lifespan<=0&&(this.lifespan=this.duration),1==i&&1==a?this.blendMode=G.Add:1==i&&771==a?this.blendMode=null:0==i&&0==a||D.logger.warn("Unsupported particle blend functions",["emitter",t,"source",i,"dest",a])};j.__name__="flambe.display.EmitterMold",j.getFloat=function(e,t){return parseFloat(e.get(t))},j.prototype={__class__:j};var z=function(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t};z.__name__="flambe.math.Point",z.prototype={set:function(e,t){this.x=e,this.y=t},distanceTo:function(e,t){return Math.sqrt(this.distanceToSquared(e,t))},distanceToSquared:function(e,t){var n=this.x-e,i=this.y-t;return n*n+i*i},toString:function(){return"("+this.x+","+this.y+")"},__class__:z};var q=function(){this._cosCache=0,this._sinCache=0,this._parentViewMatrixUpdateCount=0,this._viewMatrixUpdateCount=0,this._viewMatrix=null,this.scissor=null,this.blendMode=null;var e=this;v.call(this),this._flags|=182,this._localMatrix=new xe;var t=function(t,n){e._flags|=24};this.x=new M(0,t),this.y=new M(0,t),this.rotation=new M(0,(function(t,n){e._flags|=152})),this.scaleX=new M(1,t),this.scaleY=new M(1,t),this.anchorX=new M(0,t),this.anchorY=new M(0,t),this.alpha=new M(1),this.disablePixelSnapping()};q.__name__="flambe.display.Sprite",q.hitTest=function(e,t,n){var i=e._compMap["Sprite_2"];if(null!=i){if(6!=(6&i._flags))return null;i.getLocalMatrix().inverseTransform(t,n,q._scratchPoint)&&(t=q._scratchPoint.x,n=q._scratchPoint.y);var a=i.scissor;if(null!=a&&!a.contains(t,n))return null}var r=q.hitTestBackwards(e.firstChild,t,n);return null!=r?r:null!=i&&i.containsLocal(t,n)?i:null},q.render=function(e,t){var n=e._compMap["Sprite_2"];if(null!=n){var i=n.alpha._value;if(0==(2&n._flags)||i<=0)return;t.save(),i<1&&t.multiplyAlpha(i),null!=n.blendMode&&t.setBlendMode(n.blendMode);var a=n.getLocalMatrix(),r=a.m02,s=a.m12;0!=(32&n._flags)&&(r=Math.round(r),s=Math.round(s)),t.transform(a.m00,a.m10,a.m01,a.m11,r,s);var o=n.scissor;null!=o&&t.applyScissor(o.x,o.y,o.width,o.height),n.draw(t)}var _=e._compMap["Director_31"];if(null!=_){var h=_.occludedScenes,l=0;while(l<h.length){var u=h[l];++l,q.render(u,t)}}var c=e.firstChild;while(null!=c){var d=c.next;q.render(c,t),c=d}null!=n&&t.restore()},q.hitTestBackwards=function(e,t,n){if(null!=e){var i=q.hitTestBackwards(e.next,t,n);return null!=i?i:q.hitTest(e,t,n)}return null},q.__super__=v,q.prototype=o(v.prototype,{get_name:function(){return"Sprite_2"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(e,t){return e>=0&&e<this.getNaturalWidth()&&t>=0&&t<this.getNaturalHeight()},getLocalMatrix:function(){if(0!=(8&this._flags)){if(this._flags&=-9,0!=(128&this._flags)){this._flags&=-129;var e=3.141592653589793*this.rotation._value/180;this._sinCache=Math.sin(e),this._cosCache=Math.cos(e)}var t=this.scaleX._value,n=this.scaleY._value;this._localMatrix.set(this._cosCache*t,this._sinCache*t,-this._sinCache*n,this._cosCache*n,this.x._value,this.y._value),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value)}return this._localMatrix},getViewMatrix:function(){if(this.isViewMatrixDirty()){var e=this.getParentSprite();this._viewMatrix=null!=e?xe.multiply(e.getViewMatrix(),this.getLocalMatrix(),this._viewMatrix):this.getLocalMatrix().clone(this._viewMatrix),this._flags&=-17,null!=e&&(this._parentViewMatrixUpdateCount=e._viewMatrixUpdateCount),++this._viewMatrixUpdateCount}return this._viewMatrix},setAnchor:function(e,t){return this.anchorX.set__(e),this.anchorY.set__(t),this},centerAnchor:function(){return this.anchorX.set__(this.getNaturalWidth()/2),this.anchorY.set__(this.getNaturalHeight()/2),this},setXY:function(e,t){return this.x.set__(e),this.y.set__(t),this},setRotation:function(e){return this.rotation.set__(e),this},setScale:function(e){return this.scaleX.set__(e),this.scaleY.set__(e),this},disablePixelSnapping:function(){return this.set_pixelSnapping(!1),this},onAdded:function(){0!=(64&this._flags)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(e){this.x.update(e),this.y.update(e),this.rotation.update(e),this.scaleX.update(e),this.scaleY.update(e),this.alpha.update(e),this.anchorX.update(e),this.anchorY.update(e)},draw:function(e){},isViewMatrixDirty:function(){if(0!=(16&this._flags))return!0;var e=this.getParentSprite();return null!=e&&(this._parentViewMatrixUpdateCount!=e._viewMatrixUpdateCount||e.isViewMatrixDirty())},getParentSprite:function(){if(null==this.owner)return null;var e=this.owner.parent;while(null!=e){var t=e._compMap["Sprite_2"];if(null!=t)return t;e=e.parent}return null},get_pointerDown:function(){return null==this._pointerDown&&(this._pointerDown=new E),this._pointerDown},get_pointerIn:function(){return null==this._pointerIn&&(this._pointerIn=new E),this._pointerIn},get_pointerOut:function(){return null==this._pointerOut&&(this._pointerOut=new E),this._pointerOut},connectHover:function(){var e=this;null==this._hoverConnection&&(P.assertCalledInit(),this._hoverConnection=P._platform.getPointer().move.connect((function(t){var n=t.hit;while(null!=n){if(n==e)return;n=n.getParentSprite()}null!=e._pointerOut&&0!=(64&e._flags)&&e._pointerOut.emit(t),e._flags&=-65,null!=e._hoverConnection&&(e._hoverConnection.dispose(),e._hoverConnection=null)})))},set_visible:function(e){return this._flags=Zt.set(this._flags,2,e),e},set_pixelSnapping:function(e){return this._flags=Zt.set(this._flags,32,e),e},onPointerDown:function(e){this.onHover(e),null!=this._pointerDown&&this._pointerDown.emit(e)},onPointerMove:function(e){this.onHover(e),null!=this._pointerMove&&this._pointerMove.emit(e)},onHover:function(e){0==(64&this._flags)&&(this._flags|=64,null==this._pointerIn&&null==this._pointerOut||(null!=this._pointerIn&&this._pointerIn.emit(e),this.connectHover()))},onPointerUp:function(e){1==e.source._hx_index&&(null!=this._pointerOut&&0!=(64&this._flags)&&this._pointerOut.emit(e),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)),null!=this._pointerUp&&this._pointerUp.emit(e)},__class__:q});var Q=function(e){this._totalElapsed=0,this._emitElapsed=0,this.enabled=!0,this.numParticles=0,q.call(this),this.textures=e.textures,this.blendMode=e.blendMode,this.type=e.type,this.alphaEnd=new M(e.alphaEnd),this.alphaEndVariance=new M(e.alphaEndVariance),this.alphaStart=new M(e.alphaStart),this.alphaStartVariance=new M(e.alphaStartVariance),this.angle=new M(e.angle),this.angleVariance=new M(e.angleVariance),this.duration=e.duration,this.emitXVariance=new M(e.emitXVariance),this.emitYVariance=new M(e.emitYVariance),this.gravityX=new M(e.gravityX),this.gravityY=new M(e.gravityY),this.maxRadius=new M(e.maxRadius),this.maxRadiusVariance=new M(e.maxRadiusVariance),this.minRadius=new M(e.minRadius),this.lifespan=new M(e.lifespan),this.lifespanVariance=new M(e.lifespanVariance),this.radialAccel=new M(e.radialAccel),this.radialAccelVariance=new M(e.radialAccelVariance),this.rotatePerSecond=new M(e.rotatePerSecond),this.rotatePerSecondVariance=new M(e.rotatePerSecondVariance),this.rotationEnd=new M(e.rotationEnd),this.rotationEndVariance=new M(e.rotationEndVariance),this.rotationStart=new M(e.rotationStart),this.rotationStartVariance=new M(e.rotationStartVariance),this.sizeEnd=new M(e.sizeEnd),this.sizeEndVariance=new M(e.sizeEndVariance),this.sizeStart=new M(e.sizeStart),this.sizeStartVariance=new M(e.sizeStartVariance),this.speed=new M(e.speed),this.speedVariance=new M(e.speedVariance),this.tangentialAccel=new M(e.tangentialAccel),this.tangentialAccelVariance=new M(e.tangentialAccelVariance),this.emitX=new M(0),this.emitY=new M(0),this._particles=new Array(e.maxParticles);var t=0,n=this._particles.length;while(t<n)this._particles[t]=new J,++t};Q.__name__="flambe.display.EmitterSprite",Q.random=function(e,t){return 0!=t&&(e+=t*(2*Math.random()-1)),e},Q.__super__=q,Q.prototype=o(q.prototype,{onUpdate:function(e){q.prototype.onUpdate.call(this,e),this.alphaEnd.update(e),this.alphaEndVariance.update(e),this.alphaStart.update(e),this.alphaStartVariance.update(e),this.angle.update(e),this.angleVariance.update(e),this.emitX.update(e),this.emitXVariance.update(e),this.emitY.update(e),this.emitYVariance.update(e),this.gravityX.update(e),this.gravityY.update(e),this.lifespan.update(e),this.lifespanVariance.update(e),this.maxRadius.update(e),this.maxRadiusVariance.update(e),this.minRadius.update(e),this.radialAccel.update(e),this.radialAccelVariance.update(e),this.rotatePerSecond.update(e),this.rotatePerSecondVariance.update(e),this.rotationEnd.update(e),this.rotationEndVariance.update(e),this.rotationStart.update(e),this.rotationStartVariance.update(e),this.sizeEnd.update(e),this.sizeEndVariance.update(e),this.sizeStart.update(e),this.sizeStartVariance.update(e),this.speed.update(e),this.speedVariance.update(e),this.tangentialAccel.update(e),this.tangentialAccelVariance.update(e);var t=this.type==H.Gravity,n=0;while(n<this.numParticles){var i=this._particles[n];if(i.life>e){if(t){i.x+=i.velX*e,i.y+=i.velY*e;var a=this.gravityX._value,r=-this.gravityY._value;if(0!=i.radialAccel||0!=i.tangentialAccel){var s=i.x-i.emitX,o=i.y-i.emitY,_=Math.sqrt(s*s+o*o),h=s/_,l=o/_;a+=h*i.radialAccel,r+=l*i.radialAccel;var u=-l;a+=u*i.tangentialAccel,r+=h*i.tangentialAccel}i.velX+=a*e,i.velY+=r*e}else{i.radialRotation+=i.velRadialRotation*e;var c=i.radialRadius+=i.velRadialRadius*e;i.x=this.emitX._value-Math.cos(i.radialRotation)*c,i.y=this.emitY._value-Math.sin(i.radialRotation)*c,c<this.minRadius._value&&(i.life=0)}i.scale+=i.velScale*e,i.rotation+=i.velRotation*e,i.alpha+=i.velAlpha*e,i.life-=e,++n}else--this.numParticles,n!=this.numParticles&&(this._particles[n]=this._particles[this.numParticles],this._particles[this.numParticles]=i)}if(this.enabled)if(this.duration>0&&(this._totalElapsed+=e,this._totalElapsed>=this.duration))this.enabled=!1;else{var d=this.lifespan._value/this._particles.length;this._emitElapsed+=e;while(this._emitElapsed>=d){if(this.numParticles<this._particles.length){i=this._particles[this.numParticles];this.initParticle(i)&&++this.numParticles}this._emitElapsed-=d}}},draw:function(e){var t=-this.textures[0].get_width()/2,n=0,i=this.numParticles;while(n<i){var a=this._particles[n];e.save(),e.translate(a.x,a.y),a.alpha<1&&e.multiplyAlpha(a.alpha),0!=a.rotation&&e.rotate(a.rotation),1!=a.scale&&e.scale(a.scale,a.scale);var r=this.textures[n%this.textures.length];e.drawTexture(r,t,t),e.restore(),++n}},initParticle:function(e){if(e.life=Q.random(this.lifespan._value,this.lifespanVariance._value),e.life<=0)return!1;e.emitX=this.emitX._value,e.emitY=this.emitY._value;var t=-3.141592653589793*Q.random(this.angle._value,this.angleVariance._value)/180,n=Q.random(this.speed._value,this.speedVariance._value);if(e.velX=n*Math.cos(t),e.velY=n*Math.sin(t),e.radialAccel=Q.random(this.radialAccel._value,this.radialAccelVariance._value),e.tangentialAccel=Q.random(this.tangentialAccel._value,this.tangentialAccelVariance._value),e.radialRadius=Q.random(this.maxRadius._value,this.maxRadiusVariance._value),e.velRadialRadius=-e.radialRadius/e.life,e.radialRotation=t,e.velRadialRotation=3.141592653589793*Q.random(this.rotatePerSecond._value,this.rotatePerSecondVariance._value)/180,this.type==H.Gravity)e.x=Q.random(this.emitX._value,this.emitXVariance._value),e.y=Q.random(this.emitY._value,this.emitYVariance._value);else{var i=e.radialRadius;e.x=this.emitX._value-Math.cos(e.radialRotation)*i,e.y=this.emitY._value-Math.sin(e.radialRotation)*i}var a=this.textures[0].get_width(),r=Q.random(this.sizeStart._value,this.sizeStartVariance._value)/a,s=Q.random(this.sizeEnd._value,this.sizeEndVariance._value)/a;e.scale=r,e.velScale=(s-r)/e.life;var o=Q.random(this.rotationStart._value,this.rotationStartVariance._value),_=Q.random(this.rotationEnd._value,this.rotationEndVariance._value);e.rotation=o,e.velRotation=(_-o)/e.life;var h=Q.random(this.alphaStart._value,this.alphaStartVariance._value),l=Q.random(this.alphaEnd._value,this.alphaEndVariance._value);return e.alpha=h,e.velAlpha=(l-h)/e.life,!0},__class__:Q});var J=function(){this.life=0,this.velAlpha=0,this.alpha=0,this.velRotation=0,this.rotation=0,this.velScale=0,this.scale=0,this.tangentialAccel=0,this.radialAccel=0,this.velRadialRotation=0,this.radialRotation=0,this.velRadialRadius=0,this.radialRadius=0,this.velY=0,this.y=0,this.velX=0,this.x=0,this.emitY=0,this.emitX=0};J.__name__="flambe.display._EmitterSprite.Particle",J.prototype={__class__:J};var Z=function(e,t,n){q.call(this),this.color=e,this.width=new M(t),this.height=new M(n)};Z.__name__="flambe.display.FillSprite",Z.__super__=q,Z.prototype=o(q.prototype,{draw:function(e){e.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(e){q.prototype.onUpdate.call(this,e),this.width.update(e),this.height.update(e)},__class__:Z});var $=function(e){this._kernings=null,this.xAdvance=0,this.yOffset=0,this.xOffset=0,this.page=null,this.height=0,this.width=0,this.y=0,this.x=0,this.charCode=e};$.__name__="flambe.display.Glyph",$.prototype={draw:function(e,t,n){this.width>0&&e.drawSubTexture(this.page,t+this.xOffset,n+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(e){return null!=this._kernings?0|this._kernings.h[e]:0},setKerning:function(e,t){null==this._kernings&&(this._kernings=new ti),this._kernings.h[e]=t},__class__:$};var ee=function(e,t){this.name=t,this._pack=e,this._file=e.getFile(t+".fnt"),this.reload(),this._lastReloadCount=this._file.get_reloadCount()._value};ee.__name__="flambe.display.Font",ee.prototype={layoutText:function(e,t,n,i,a){return null==a&&(a=0),null==i&&(i=0),null==n&&(n=0),null==t&&(t=te.Left),new ne(this,e,t,n,i,a)},checkReload:function(){var e=this._file.get_reloadCount()._value;return this._lastReloadCount!=e&&(this._lastReloadCount=e,this.reload()),e},reload:function(){this._glyphs=new ti,this._glyphs.h[ee.NEWLINE.charCode]=ee.NEWLINE;var e=new ie(this._file.toString()),t={},n=this.name.lastIndexOf("/"),i=n>=0?h.substr(this.name,0,n+1):"",a=e.keywords();while(a.hasNext()){var r=a.next();switch(r){case"char":var s=null,o=e.pairs();while(o.hasNext()){var _=o.next();switch(_.key){case"height":s.height=_.getInt();break;case"id":s=new $(_.getInt());break;case"page":s.page=t[_.getInt()];break;case"width":s.width=_.getInt();break;case"x":s.x=_.getInt();break;case"xadvance":s.xAdvance=_.getInt();break;case"xoffset":s.xOffset=_.getInt();break;case"y":s.y=_.getInt();break;case"yoffset":s.yOffset=_.getInt();break}}this._glyphs.h[s.charCode]=s;break;case"common":var l=e.pairs();while(l.hasNext()){var u=l.next();"lineHeight"==u.key&&(this.lineHeight=u.getInt())}break;case"info":var c=e.pairs();while(c.hasNext()){var d=c.next();"size"==d.key&&(this.size=d.getInt())}break;case"kerning":var p=null,m=0,f=0,g=e.pairs();while(g.hasNext()){var v=g.next();switch(v.key){case"amount":f=v.getInt();break;case"first":var b=this._glyphs,w=v.getInt();p=b.h[w];break;case"second":m=v.getInt();break}}null!=p&&0!=f&&p.setKerning(m,f);break;case"page":var y=0,x=null,S=e.pairs();while(S.hasNext()){var k=S.next();switch(k.key){case"file":x=k.getString();break;case"id":y=k.getInt();break}}t[y]=this._pack.getTexture(i+an.removeFileExtension(x));break}}},__class__:ee};var te=s["flambe.display.TextAlign"]={__ename__:!0,__constructs__:null,Left:{_hx_name:"Left",_hx_index:0,__enum__:"flambe.display.TextAlign",toString:r},Center:{_hx_name:"Center",_hx_index:1,__enum__:"flambe.display.TextAlign",toString:r},Right:{_hx_name:"Right",_hx_index:2,__enum__:"flambe.display.TextAlign",toString:r}};te.__constructs__=[te.Left,te.Center,te.Right];var ne=function(e,t,n,i,a,r){this.lines=0;var s=this;this._font=e,this._glyphs=[],this._offsets=[],this._lineOffset=Math.round(e.lineHeight+r),this.bounds=new Se;var o=[],_=t.length,h=0;while(h<_){var l=h++,u=t.charCodeAt(l),c=e._glyphs.h[u];null!=c?this._glyphs.push(c):D.logger.warn("Requested a missing character from font",["font",e.name,"charCode",u])}var d=-1,p=0,m=0,f=e._glyphs.h[10],g=function(){var e=s.bounds.width;s.bounds.width=e>p?e:p,s.bounds.height+=m,o[s.lines]=p,p=0,m=0,++s.lines};l=0;while(l<this._glyphs.length){c=this._glyphs[l];this._offsets[l]=Math.round(p);var v=i>0&&p+c.width>i;if(v||c==f)v&&(d>=0?(this._glyphs[d]=f,p=this._offsets[d],l=d):this._glyphs.splice(l,0,f)),d=-1,m=this._lineOffset,g();else{32==c.charCode&&(d=l),p+=c.xAdvance+a;var b=c.height+c.yOffset;if(m>b||(m=b),l+1<this._glyphs.length){var w=this._glyphs[l+1];p+=c.getKerning(w.charCode)}}++l}g();var y=0,x=ne.getAlignOffset(n,o[0],i),S=179769313486231e294,k=-179769313486231e294,C=0;l=0,_=this._glyphs.length;while(l<_){c=this._glyphs[l];10==c.charCode&&(y+=this._lineOffset,++C,x=ne.getAlignOffset(n,o[C],i)),this._offsets[l]+=x;var A=y+c.yOffset;S<A||(S=A);b=A+c.height;k>b||(k=b),++l}this.bounds.x=ne.getAlignOffset(n,this.bounds.width,i),this.bounds.y=S,this.bounds.height=k-S};ne.__name__="flambe.display.TextLayout",ne.getAlignOffset=function(e,t,n){switch(e._hx_index){case 0:return 0;case 1:return Math.round((n-t)/2);case 2:return n-t}},ne.prototype={draw:function(e){var t=0,n=0,i=this._glyphs.length;while(n<i){var a=this._glyphs[n];if(10==a.charCode)t+=this._lineOffset;else{var r=this._offsets[n];a.draw(e,r,t)}++n}},__class__:ne};var ie=function(e){this._configText=e,this._keywordPattern=new _("([A-Za-z]+)(.*)",""),this._pairPattern=new _('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};ie.__name__="flambe.display._Font.ConfigParser",ie.advance=function(e,t){var n=t.matchedPos();return h.substr(e,n.pos+n.len,e.length)},ie.prototype={keywords:function(){var e=this,t=this._configText;return{next:function(){return t=ie.advance(t,e._keywordPattern),e._pairText=e._keywordPattern.matched(2),e._keywordPattern.matched(1)},hasNext:function(){return e._keywordPattern.match(t)}}},pairs:function(){var e=this,t=this._pairText;return{next:function(){return t=ie.advance(t,e._pairPattern),new ae(e._pairPattern.matched(1),e._pairPattern.matched(2))},hasNext:function(){return e._pairPattern.match(t)}}},__class__:ie};var ae=function(e,t){this.key=e,this._value=t};ae.__name__="flambe.display._Font.ConfigPair",ae.prototype={getInt:function(){return c.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:h.substr(this._value,1,this._value.length-2)},__class__:ae};var re=function(){};re.__name__="flambe.display.Graphics",re.__isInterface__=!0,re.prototype={__class__:re};var se=function(e){q.call(this),this.texture=e};se.__name__="flambe.display.ImageSprite",se.__super__=q,se.prototype=o(q.prototype,{draw:function(e){null!=this.texture&&e.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:se});var oe=s["flambe.display.Orientation"]={__ename__:!0,__constructs__:null,Portrait:{_hx_name:"Portrait",_hx_index:0,__enum__:"flambe.display.Orientation",toString:r},Landscape:{_hx_name:"Landscape",_hx_index:1,__enum__:"flambe.display.Orientation",toString:r}};oe.__constructs__=[oe.Portrait,oe.Landscape];var _e=function(){};_e.__name__="flambe.display.Texture",_e.__isInterface__=!0,_e.__interfaces__=[Y],_e.prototype={__class__:_e};var he=function(){};he.__name__="flambe.display.SubTexture",he.__isInterface__=!0,he.__interfaces__=[_e];var le=function(e,t){null==t&&(t=""),this._lastReloadCount=-1,this._layout=null;var n=this;q.call(this),this._font=e,this._text=t,this._align=te.Left,this._flags|=256;var i=function(e,t){n._flags|=256};this.wrapWidth=new M(0,i),this.letterSpacing=new M(0,i),this.lineSpacing=new M(0,i)};le.__name__="flambe.display.TextSprite",le.__super__=q,le.prototype=o(q.prototype,{draw:function(e){this.updateLayout(),this._layout.draw(e)},getNaturalWidth:function(){return this.updateLayout(),this.wrapWidth._value>0?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var e=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),t=this._layout.bounds.height;return e>t?e:t},containsLocal:function(e,t){return this.updateLayout(),this._layout.bounds.contains(e,t)},set_text:function(e){return e!=this._text&&(this._text=e,this._flags|=256),e},updateLayout:function(){var e=this._font.checkReload();e!=this._lastReloadCount&&(this._lastReloadCount=e,this._flags|=256),0!=(256&this._flags)&&(this._flags&=-257,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(e){q.prototype.onUpdate.call(this,e),this.wrapWidth.update(e),this.letterSpacing.update(e),this.lineSpacing.update(e)},__class__:le});var ue=function(){this.init(0,0,0)};ue.__name__="flambe.input.Acceleration",ue.prototype={init:function(e,t,n){this.x=e,this.y=t,this.z=n},__class__:ue};var ce=function(){this.init(0,0,0)};ce.__name__="flambe.input.Attitude",ce.prototype={init:function(e,t,n){this.pitch=e,this.roll=t,this.azimuth=n},__class__:ce};var de=s["flambe.input.Key"]={__ename__:!0,__constructs__:null,A:{_hx_name:"A",_hx_index:0,__enum__:"flambe.input.Key",toString:r},B:{_hx_name:"B",_hx_index:1,__enum__:"flambe.input.Key",toString:r},C:{_hx_name:"C",_hx_index:2,__enum__:"flambe.input.Key",toString:r},D:{_hx_name:"D",_hx_index:3,__enum__:"flambe.input.Key",toString:r},E:{_hx_name:"E",_hx_index:4,__enum__:"flambe.input.Key",toString:r},F:{_hx_name:"F",_hx_index:5,__enum__:"flambe.input.Key",toString:r},G:{_hx_name:"G",_hx_index:6,__enum__:"flambe.input.Key",toString:r},H:{_hx_name:"H",_hx_index:7,__enum__:"flambe.input.Key",toString:r},I:{_hx_name:"I",_hx_index:8,__enum__:"flambe.input.Key",toString:r},J:{_hx_name:"J",_hx_index:9,__enum__:"flambe.input.Key",toString:r},K:{_hx_name:"K",_hx_index:10,__enum__:"flambe.input.Key",toString:r},L:{_hx_name:"L",_hx_index:11,__enum__:"flambe.input.Key",toString:r},M:{_hx_name:"M",_hx_index:12,__enum__:"flambe.input.Key",toString:r},N:{_hx_name:"N",_hx_index:13,__enum__:"flambe.input.Key",toString:r},O:{_hx_name:"O",_hx_index:14,__enum__:"flambe.input.Key",toString:r},P:{_hx_name:"P",_hx_index:15,__enum__:"flambe.input.Key",toString:r},Q:{_hx_name:"Q",_hx_index:16,__enum__:"flambe.input.Key",toString:r},R:{_hx_name:"R",_hx_index:17,__enum__:"flambe.input.Key",toString:r},S:{_hx_name:"S",_hx_index:18,__enum__:"flambe.input.Key",toString:r},T:{_hx_name:"T",_hx_index:19,__enum__:"flambe.input.Key",toString:r},U:{_hx_name:"U",_hx_index:20,__enum__:"flambe.input.Key",toString:r},V:{_hx_name:"V",_hx_index:21,__enum__:"flambe.input.Key",toString:r},W:{_hx_name:"W",_hx_index:22,__enum__:"flambe.input.Key",toString:r},X:{_hx_name:"X",_hx_index:23,__enum__:"flambe.input.Key",toString:r},Y:{_hx_name:"Y",_hx_index:24,__enum__:"flambe.input.Key",toString:r},Z:{_hx_name:"Z",_hx_index:25,__enum__:"flambe.input.Key",toString:r},Number0:{_hx_name:"Number0",_hx_index:26,__enum__:"flambe.input.Key",toString:r},Number1:{_hx_name:"Number1",_hx_index:27,__enum__:"flambe.input.Key",toString:r},Number2:{_hx_name:"Number2",_hx_index:28,__enum__:"flambe.input.Key",toString:r},Number3:{_hx_name:"Number3",_hx_index:29,__enum__:"flambe.input.Key",toString:r},Number4:{_hx_name:"Number4",_hx_index:30,__enum__:"flambe.input.Key",toString:r},Number5:{_hx_name:"Number5",_hx_index:31,__enum__:"flambe.input.Key",toString:r},Number6:{_hx_name:"Number6",_hx_index:32,__enum__:"flambe.input.Key",toString:r},Number7:{_hx_name:"Number7",_hx_index:33,__enum__:"flambe.input.Key",toString:r},Number8:{_hx_name:"Number8",_hx_index:34,__enum__:"flambe.input.Key",toString:r},Number9:{_hx_name:"Number9",_hx_index:35,__enum__:"flambe.input.Key",toString:r},Numpad0:{_hx_name:"Numpad0",_hx_index:36,__enum__:"flambe.input.Key",toString:r},Numpad1:{_hx_name:"Numpad1",_hx_index:37,__enum__:"flambe.input.Key",toString:r},Numpad2:{_hx_name:"Numpad2",_hx_index:38,__enum__:"flambe.input.Key",toString:r},Numpad3:{_hx_name:"Numpad3",_hx_index:39,__enum__:"flambe.input.Key",toString:r},Numpad4:{_hx_name:"Numpad4",_hx_index:40,__enum__:"flambe.input.Key",toString:r},Numpad5:{_hx_name:"Numpad5",_hx_index:41,__enum__:"flambe.input.Key",toString:r},Numpad6:{_hx_name:"Numpad6",_hx_index:42,__enum__:"flambe.input.Key",toString:r},Numpad7:{_hx_name:"Numpad7",_hx_index:43,__enum__:"flambe.input.Key",toString:r},Numpad8:{_hx_name:"Numpad8",_hx_index:44,__enum__:"flambe.input.Key",toString:r},Numpad9:{_hx_name:"Numpad9",_hx_index:45,__enum__:"flambe.input.Key",toString:r},NumpadAdd:{_hx_name:"NumpadAdd",_hx_index:46,__enum__:"flambe.input.Key",toString:r},NumpadDecimal:{_hx_name:"NumpadDecimal",_hx_index:47,__enum__:"flambe.input.Key",toString:r},NumpadDivide:{_hx_name:"NumpadDivide",_hx_index:48,__enum__:"flambe.input.Key",toString:r},NumpadEnter:{_hx_name:"NumpadEnter",_hx_index:49,__enum__:"flambe.input.Key",toString:r},NumpadMultiply:{_hx_name:"NumpadMultiply",_hx_index:50,__enum__:"flambe.input.Key",toString:r},NumpadSubtract:{_hx_name:"NumpadSubtract",_hx_index:51,__enum__:"flambe.input.Key",toString:r},F1:{_hx_name:"F1",_hx_index:52,__enum__:"flambe.input.Key",toString:r},F2:{_hx_name:"F2",_hx_index:53,__enum__:"flambe.input.Key",toString:r},F3:{_hx_name:"F3",_hx_index:54,__enum__:"flambe.input.Key",toString:r},F4:{_hx_name:"F4",_hx_index:55,__enum__:"flambe.input.Key",toString:r},F5:{_hx_name:"F5",_hx_index:56,__enum__:"flambe.input.Key",toString:r},F6:{_hx_name:"F6",_hx_index:57,__enum__:"flambe.input.Key",toString:r},F7:{_hx_name:"F7",_hx_index:58,__enum__:"flambe.input.Key",toString:r},F8:{_hx_name:"F8",_hx_index:59,__enum__:"flambe.input.Key",toString:r},F9:{_hx_name:"F9",_hx_index:60,__enum__:"flambe.input.Key",toString:r},F10:{_hx_name:"F10",_hx_index:61,__enum__:"flambe.input.Key",toString:r},F11:{_hx_name:"F11",_hx_index:62,__enum__:"flambe.input.Key",toString:r},F12:{_hx_name:"F12",_hx_index:63,__enum__:"flambe.input.Key",toString:r},F13:{_hx_name:"F13",_hx_index:64,__enum__:"flambe.input.Key",toString:r},F14:{_hx_name:"F14",_hx_index:65,__enum__:"flambe.input.Key",toString:r},F15:{_hx_name:"F15",_hx_index:66,__enum__:"flambe.input.Key",toString:r},Left:{_hx_name:"Left",_hx_index:67,__enum__:"flambe.input.Key",toString:r},Up:{_hx_name:"Up",_hx_index:68,__enum__:"flambe.input.Key",toString:r},Right:{_hx_name:"Right",_hx_index:69,__enum__:"flambe.input.Key",toString:r},Down:{_hx_name:"Down",_hx_index:70,__enum__:"flambe.input.Key",toString:r},Alt:{_hx_name:"Alt",_hx_index:71,__enum__:"flambe.input.Key",toString:r},Backquote:{_hx_name:"Backquote",_hx_index:72,__enum__:"flambe.input.Key",toString:r},Backslash:{_hx_name:"Backslash",_hx_index:73,__enum__:"flambe.input.Key",toString:r},Backspace:{_hx_name:"Backspace",_hx_index:74,__enum__:"flambe.input.Key",toString:r},CapsLock:{_hx_name:"CapsLock",_hx_index:75,__enum__:"flambe.input.Key",toString:r},Comma:{_hx_name:"Comma",_hx_index:76,__enum__:"flambe.input.Key",toString:r},Command:{_hx_name:"Command",_hx_index:77,__enum__:"flambe.input.Key",toString:r},Control:{_hx_name:"Control",_hx_index:78,__enum__:"flambe.input.Key",toString:r},Delete:{_hx_name:"Delete",_hx_index:79,__enum__:"flambe.input.Key",toString:r},End:{_hx_name:"End",_hx_index:80,__enum__:"flambe.input.Key",toString:r},Enter:{_hx_name:"Enter",_hx_index:81,__enum__:"flambe.input.Key",toString:r},Equals:{_hx_name:"Equals",_hx_index:82,__enum__:"flambe.input.Key",toString:r},Escape:{_hx_name:"Escape",_hx_index:83,__enum__:"flambe.input.Key",toString:r},Home:{_hx_name:"Home",_hx_index:84,__enum__:"flambe.input.Key",toString:r},Insert:{_hx_name:"Insert",_hx_index:85,__enum__:"flambe.input.Key",toString:r},LeftBracket:{_hx_name:"LeftBracket",_hx_index:86,__enum__:"flambe.input.Key",toString:r},Minus:{_hx_name:"Minus",_hx_index:87,__enum__:"flambe.input.Key",toString:r},PageDown:{_hx_name:"PageDown",_hx_index:88,__enum__:"flambe.input.Key",toString:r},PageUp:{_hx_name:"PageUp",_hx_index:89,__enum__:"flambe.input.Key",toString:r},Period:{_hx_name:"Period",_hx_index:90,__enum__:"flambe.input.Key",toString:r},Quote:{_hx_name:"Quote",_hx_index:91,__enum__:"flambe.input.Key",toString:r},RightBracket:{_hx_name:"RightBracket",_hx_index:92,__enum__:"flambe.input.Key",toString:r},Semicolon:{_hx_name:"Semicolon",_hx_index:93,__enum__:"flambe.input.Key",toString:r},Shift:{_hx_name:"Shift",_hx_index:94,__enum__:"flambe.input.Key",toString:r},Slash:{_hx_name:"Slash",_hx_index:95,__enum__:"flambe.input.Key",toString:r},Space:{_hx_name:"Space",_hx_index:96,__enum__:"flambe.input.Key",toString:r},Tab:{_hx_name:"Tab",_hx_index:97,__enum__:"flambe.input.Key",toString:r},Menu:{_hx_name:"Menu",_hx_index:98,__enum__:"flambe.input.Key",toString:r},Search:{_hx_name:"Search",_hx_index:99,__enum__:"flambe.input.Key",toString:r},Unknown:(a=function(e){return{_hx_index:100,keyCode:e,__enum__:"flambe.input.Key",toString:r}},a._hx_name="Unknown",a.__params__=["keyCode"],a)};de.__constructs__=[de.A,de.B,de.C,de.D,de.E,de.F,de.G,de.H,de.I,de.J,de.K,de.L,de.M,de.N,de.O,de.P,de.Q,de.R,de.S,de.T,de.U,de.V,de.W,de.X,de.Y,de.Z,de.Number0,de.Number1,de.Number2,de.Number3,de.Number4,de.Number5,de.Number6,de.Number7,de.Number8,de.Number9,de.Numpad0,de.Numpad1,de.Numpad2,de.Numpad3,de.Numpad4,de.Numpad5,de.Numpad6,de.Numpad7,de.Numpad8,de.Numpad9,de.NumpadAdd,de.NumpadDecimal,de.NumpadDivide,de.NumpadEnter,de.NumpadMultiply,de.NumpadSubtract,de.F1,de.F2,de.F3,de.F4,de.F5,de.F6,de.F7,de.F8,de.F9,de.F10,de.F11,de.F12,de.F13,de.F14,de.F15,de.Left,de.Up,de.Right,de.Down,de.Alt,de.Backquote,de.Backslash,de.Backspace,de.CapsLock,de.Comma,de.Command,de.Control,de.Delete,de.End,de.Enter,de.Equals,de.Escape,de.Home,de.Insert,de.LeftBracket,de.Minus,de.PageDown,de.PageUp,de.Period,de.Quote,de.RightBracket,de.Semicolon,de.Shift,de.Slash,de.Space,de.Tab,de.Menu,de.Search,de.Unknown];var pe=function(){this.init(0,null)};pe.__name__="flambe.input.KeyboardEvent",pe.prototype={init:function(e,t){this.id=e,this.key=t},__class__:pe};var me=s["flambe.input.MouseButton"]={__ename__:!0,__constructs__:null,Left:{_hx_name:"Left",_hx_index:0,__enum__:"flambe.input.MouseButton",toString:r},Middle:{_hx_name:"Middle",_hx_index:1,__enum__:"flambe.input.MouseButton",toString:r},Right:{_hx_name:"Right",_hx_index:2,__enum__:"flambe.input.MouseButton",toString:r},Unknown:(a=function(e){return{_hx_index:3,buttonCode:e,__enum__:"flambe.input.MouseButton",toString:r}},a._hx_name="Unknown",a.__params__=["buttonCode"],a)};me.__constructs__=[me.Left,me.Middle,me.Right,me.Unknown];var fe=s["flambe.input.MouseCursor"]={__ename__:!0,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"flambe.input.MouseCursor",toString:r},Button:{_hx_name:"Button",_hx_index:1,__enum__:"flambe.input.MouseCursor",toString:r},None:{_hx_name:"None",_hx_index:2,__enum__:"flambe.input.MouseCursor",toString:r}};fe.__constructs__=[fe.Default,fe.Button,fe.None];var ge=function(){this.init(0,0,0,null)};ge.__name__="flambe.input.MouseEvent",ge.prototype={init:function(e,t,n,i){this.id=e,this.viewX=t,this.viewY=n,this.button=i},__class__:ge};var ve=s["flambe.input.EventSource"]={__ename__:!0,__constructs__:null,Mouse:(a=function(e){return{_hx_index:0,event:e,__enum__:"flambe.input.EventSource",toString:r}},a._hx_name="Mouse",a.__params__=["event"],a),Touch:(a=function(e){return{_hx_index:1,point:e,__enum__:"flambe.input.EventSource",toString:r}},a._hx_name="Touch",a.__params__=["point"],a)};ve.__constructs__=[ve.Mouse,ve.Touch];var be=function(){this.init(0,0,0,null,null)};be.__name__="flambe.input.PointerEvent",be.prototype={init:function(e,t,n,i,a){this.id=e,this.viewX=t,this.viewY=n,this.hit=i,this.source=a,this._stopped=!1},__class__:be};var we=function(e){this.id=e,this._source=ve.Touch(this)};we.__name__="flambe.input.TouchPoint",we.prototype={init:function(e,t){this.viewX=e,this.viewY=t},__class__:we};var ye=function(){};ye.__name__="flambe.math.FMath",ye.clamp=function(e,t,n){return e<t?t:e>n?n:e};var xe=function(){this.identity()};xe.__name__="flambe.math.Matrix",xe.multiply=function(e,t,n){null==n&&(n=new xe);var i=e.m00*t.m00+e.m01*t.m10,a=e.m00*t.m01+e.m01*t.m11,r=e.m00*t.m02+e.m01*t.m12+e.m02;return n.m00=i,n.m01=a,n.m02=r,i=e.m10*t.m00+e.m11*t.m10,a=e.m10*t.m01+e.m11*t.m11,r=e.m10*t.m02+e.m11*t.m12+e.m12,n.m10=i,n.m11=a,n.m12=r,n},xe.prototype={set:function(e,t,n,i,a,r){this.m00=e,this.m01=n,this.m02=a,this.m10=t,this.m11=i,this.m12=r},identity:function(){this.set(1,0,0,1,0,0)},translate:function(e,t){this.m02+=this.m00*e+this.m01*t,this.m12+=this.m11*t+this.m10*e},invert:function(){var e=this.determinant();return 0!=e&&(this.set(this.m11/e,-this.m01/e,-this.m10/e,this.m00/e,(this.m01*this.m12-this.m11*this.m02)/e,(this.m10*this.m02-this.m00*this.m12)/e),!0)},transformArray:function(e,t,n){var i=0;while(i<t){var a=e[i],r=e[i+1];n[i++]=a*this.m00+r*this.m01+this.m02,n[i++]=a*this.m10+r*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(e,t,n){var i=this.determinant();return 0!=i&&(e-=this.m02,t-=this.m12,n.x=(e*this.m11-t*this.m01)/i,n.y=(t*this.m00-e*this.m10)/i,!0)},clone:function(e){return null==e&&(e=new xe),e.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12),e},toString:function(){return this.m00+" "+this.m01+" "+this.m02+" \\ "+this.m10+" "+this.m11+" "+this.m12},__class__:xe};var Se=function(e,t,n,i){null==i&&(i=0),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.set(e,t,n,i)};Se.__name__="flambe.math.Rectangle",Se.prototype={set:function(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i},contains:function(e,t){if(e-=this.x,this.width>=0){if(e<0||e>this.width)return!1}else if(e>0||e<this.width)return!1;if(t-=this.y,this.height>=0){if(t<0||t>this.height)return!1}else if(t>0||t<this.height)return!1;return!0},clone:function(e){return null==e&&(e=new Se),e.set(this.x,this.y,this.width,this.height),e},equals:function(e){return this.x==e.x&&this.y==e.y&&this.width==e.width&&this.height==e.height},toString:function(){return"("+this.x+","+this.y+" "+this.width+"x"+this.height+")"},__class__:Se};var ke=function(){this._reloadCount=null,this._disposed=!1};ke.__name__="flambe.platform.BasicAsset",ke.__interfaces__=[Y],ke.prototype={reload:function(e){this.dispose(),this._disposed=!1,this.copyFrom(e);var t=this.get_reloadCount();t.set__(t._value+1)},dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},copyFrom:function(e){Jt.fail()},onDisposed:function(){Jt.fail()},get_reloadCount:function(){return null==this._reloadCount&&(this._reloadCount=new k(0)),this._reloadCount},__class__:ke};var Ce=function(e,t){var n=this;this.manifest=t,this._platform=e,this.promise=new en,this._bytesLoaded=new ni,this._pack=new Ae(t,this);var i=l.array(t);if(0==i.length)this.handleSuccess();else{var a=new ni,r=0;while(r<i.length){var s=i[r];++r;var o=a.h[s.name];null==o&&(o=[],a.h[s.name]=o),o.push(s)}this._assetsRemaining=l.count(a);var _=a.h,h=Object.keys(_),u=h.length,d=0;while(d<u){o=[_[h[d++]]];this.pickBestEntry(o[0],function(e){return function(i){if(null!=i){var a=t.getFullURL(i);try{n.loadEntry(a,i)}catch(r){var s=$n.caught(r).unwrap();n.handleError(i,"Unexpected error: "+c.string(s))}var o=n.promise;o.set_total(o._total+i.bytes)}else{var _=e[0][0];Ce.isAudio(_.format)?(D.logger.warn("Could not find a supported audio format to load",["name",_.name]),n.handleLoad(_,Xe.getInstance())):n.handleError(_,"Could not find a supported format to load")}}}(o))}}var p=this._platform.getCatapultClient();null!=p&&p.add(this)};Ce.__name__="flambe.platform.BasicAssetPackLoader",Ce.removeUrlParams=function(e){var t=e.indexOf("?");return t>0?h.substr(e,0,t):e},Ce.isAudio=function(e){switch(e._hx_index){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}},Ce.prototype={reload:function(e){var t=this,n=Ce.removeUrlParams(e),i=null,a=this.manifest._entries,r=0;while(r<a.length){var s=a[r++];if(n==Ce.removeUrlParams(s.url)){i=s;break}}null!=i&&this.getAssetFormats((function(n){if(n.indexOf(i.format)>=0){var a=new U(i.name,e,i.format,0);t.loadEntry(t.manifest.getFullURL(a),a)}}))},onDisposed:function(){var e=this._platform.getCatapultClient();null!=e&&e.remove(this)},pickBestEntry:function(e,t){var n=function(n){var i=0;while(i<n.length){var a=n[i];++i;var r=0;while(r<e.length){var s=e[r];if(++r,s.format==a)return void t(s)}}t(null)};this.getAssetFormats(n)},loadEntry:function(e,t){Jt.fail()},getAssetFormats:function(e){Jt.fail()},handleLoad:function(e,t){if(!this._pack.disposed){var n;switch(this.handleProgress(e,e.bytes),e.format._hx_index){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:n=this._pack.sounds;break;case 13:n=this._pack.files;break}var i=n.h[e.name];null!=i?(D.logger.info("Reloaded asset",["url",e.url]),i.reload(t)):(n.h[e.name]=t,this._assetsRemaining-=1,0==this._assetsRemaining&&this.handleSuccess())}},handleProgress:function(e,t){this._bytesLoaded.h[e.name]=t;var n=0,i=this._bytesLoaded.h,a=Object.keys(i),r=a.length,s=0;while(s<r){var o=i[a[s++]];n+=o}this.promise.set_progress(n)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(e,t){D.logger.warn("Error loading asset pack",["error",t,"url",e.url]),this.promise.error.emit(an.withFields(t,["url",e.url]))},handleTextureError:function(e){this.handleError(e,"Failed to create texture. Is the GPU context unavailable?")},__class__:Ce};var Ae=function(e,t){this.disposed=!1,this._manifest=e,this.loader=t,this.textures=new ni,this.sounds=new ni,this.files=new ni};Ae.__name__="flambe.platform._BasicAssetPackLoader.BasicAssetPack",Ae.__interfaces__=[V],Ae.warnOnExtension=function(e){var t=an.getFileExtension(e);if(null!=t&&3==t.length){var n='Requested asset "'+e+'" should not have a file extension, did you mean "'+an.removeFileExtension(e)+'"?';D.logger.warn(n,null)}},Ae.prototype={getTexture:function(e,t){null==t&&(t=!0),Jt.that(!this.disposed,"AssetPack cannot be used after being disposed"),Ae.warnOnExtension(e);var n=this.textures.h[e];if(null==n&&t)throw $n.thrown(an.withFields("Missing texture",["name",e]));return n},getFile:function(e,t){null==t&&(t=!0),Jt.that(!this.disposed,"AssetPack cannot be used after being disposed");var n=this.files.h[e];if(null==n&&t)throw $n.thrown(an.withFields("Missing file",["name",e]));return n},dispose:function(){if(!this.disposed){this.disposed=!0;var e=this.textures.h,t=Object.keys(e),n=t.length,i=0;while(i<n){var a=e[t[i++]];a.dispose()}this.textures=null;e=this.sounds.h;var r=Object.keys(e),s=r.length,o=0;while(o<s){var _=e[r[o++]];_.dispose()}this.sounds=null;e=this.files.h;var h=Object.keys(e),l=h.length,u=0;while(u<l){var c=e[h[u++]];c.dispose()}this.files=null,this.loader.onDisposed()}},__class__:Ae};var Te=function(e){ke.call(this),this._content=e};Te.__name__="flambe.platform.BasicFile",Te.__interfaces__=[K],Te.__super__=ke,Te.prototype=o(ke.prototype,{toString:function(){return Jt.that(!this._disposed,"Asset cannot be used after being disposed"),this._content},copyFrom:function(e){this._content=e._content},onDisposed:function(){this._content=null},__class__:Te});var Ee=function(){};Ee.__name__="flambe.subsystem.KeyboardSystem",Ee.__isInterface__=!0,Ee.prototype={__class__:Ee};var Me=function(){this.down=new E,this.up=new E,this.backButton=new tn,this._keyStates=new ti};Me.__name__="flambe.platform.BasicKeyboard",Me.__interfaces__=[Ee],Me.prototype={isDown:function(e){return this._keyStates.h.hasOwnProperty(Ze.toKeyCode(e))},submitDown:function(e){return 16777238==e?null!=this.backButton._head&&(this.backButton.emit(),!0):(this._keyStates.h.hasOwnProperty(e)||(this._keyStates.h[e]=!0,Me._sharedEvent.init(Me._sharedEvent.id+1,Ze.toKey(e)),this.down.emit(Me._sharedEvent)),!0)},submitUp:function(e){this._keyStates.h.hasOwnProperty(e)&&(this._keyStates.remove(e),Me._sharedEvent.init(Me._sharedEvent.id+1,Ze.toKey(e)),this.up.emit(Me._sharedEvent))},__class__:Me};var Pe=function(){};Pe.__name__="flambe.subsystem.MouseSystem",Pe.__isInterface__=!0;var Re=function(e){this._pointer=e,this._source=ve.Mouse(Re._sharedEvent),this.down=new E,this.move=new E,this.up=new E,this.scroll=new E,this._x=0,this._y=0,this._cursor=fe.Default,this._buttonStates=new ti};Re.__name__="flambe.platform.BasicMouse",Re.__interfaces__=[Pe],Re.prototype={submitDown:function(e,t,n){this._buttonStates.h.hasOwnProperty(n)||(this._buttonStates.h[n]=!0,this.prepare(e,t,tt.toButton(n)),this._pointer.submitDown(e,t,this._source),this.down.emit(Re._sharedEvent))},submitMove:function(e,t){this.prepare(e,t,null),this._pointer.submitMove(e,t,this._source),this.move.emit(Re._sharedEvent)},submitUp:function(e,t,n){this._buttonStates.h.hasOwnProperty(n)&&(this._buttonStates.remove(n),this.prepare(e,t,tt.toButton(n)),this._pointer.submitUp(e,t,this._source),this.up.emit(Re._sharedEvent))},submitScroll:function(e,t,n){return this._x=e,this._y=t,null!=this.scroll._head&&(this.scroll.emit(n),!0)},prepare:function(e,t,n){this._x=e,this._y=t,Re._sharedEvent.init(Re._sharedEvent.id+1,e,t,n)},__class__:Re};var De=function(){};De.__name__="flambe.subsystem.PointerSystem",De.__isInterface__=!0,De.prototype={__class__:De};var Be=function(e,t,n){null==n&&(n=!1),null==t&&(t=0),null==e&&(e=0),this.down=new E,this.move=new E,this.up=new E,this._x=e,this._y=t,this._isDown=n};Be.__name__="flambe.platform.BasicPointer",Be.__interfaces__=[De],Be.prototype={get_x:function(){return this._x},get_y:function(){return this._y},isDown:function(){return this._isDown},submitDown:function(e,t,n){if(!this._isDown){this.submitMove(e,t,n),this._isDown=!0;var i=[],a=q.hitTest(P.root,e,t);if(null!=a){var r=a.owner;while(1){var s=r._compMap["Sprite_2"];if(null!=s&&i.push(s),r=r.parent,null==r)break}}this.prepare(e,t,a,n);var o=0;while(o<i.length){s=i[o];if(++o,s.onPointerDown(Be._sharedEvent),Be._sharedEvent._stopped)return}this.down.emit(Be._sharedEvent)}},submitMove:function(e,t,n){if(e!=this._x||t!=this._y){var i=[],a=q.hitTest(P.root,e,t);if(null!=a){var r=a.owner;while(1){var s=r._compMap["Sprite_2"];if(null!=s&&i.push(s),r=r.parent,null==r)break}}this.prepare(e,t,a,n);var o=0;while(o<i.length){s=i[o];if(++o,s.onPointerMove(Be._sharedEvent),Be._sharedEvent._stopped)return}this.move.emit(Be._sharedEvent)}},submitUp:function(e,t,n){if(this._isDown){this.submitMove(e,t,n),this._isDown=!1;var i=[],a=q.hitTest(P.root,e,t);if(null!=a){var r=a.owner;while(1){var s=r._compMap["Sprite_2"];if(null!=s&&i.push(s),r=r.parent,null==r)break}}this.prepare(e,t,a,n);var o=0;while(o<i.length){s=i[o];if(++o,s.onPointerUp(Be._sharedEvent),Be._sharedEvent._stopped)return}this.up.emit(Be._sharedEvent)}},prepare:function(e,t,n,i){this._x=e,this._y=t,Be._sharedEvent.init(Be._sharedEvent.id+1,e,t,n,i)},__class__:Be};var Fe=function(e,t,n){this._y=0,this._x=0,this._parent=null,this.rootY=0,this.rootX=0,ke.call(this),this.root=e,this._width=t,this._height=n};Fe.__name__="flambe.platform.BasicTexture",Fe.__interfaces__=[he],Fe.__super__=ke,Fe.prototype=o(ke.prototype,{copyFrom:function(e){this.root._disposed=!1,this.root.copyFrom(e.root),this._width=e._width,this._height=e._height,Jt.that(this.rootX==e.rootX&&this.rootY==e.rootY&&this._x==e._x&&this._y==e._y)},onDisposed:function(){null==this._parent&&this.root.dispose()},get_reloadCount:function(){return this.root.get_reloadCount()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:Fe});var Ie=function(){};Ie.__name__="flambe.subsystem.TouchSystem",Ie.__isInterface__=!0;var Le=function(e,t){null==t&&(t=4),this._pointer=e,this._maxPoints=t,this._pointMap=new ti,this._points=[],this.down=new E,this.move=new E,this.up=new E};Le.__name__="flambe.platform.BasicTouch",Le.__interfaces__=[Ie],Le.prototype={submitDown:function(e,t,n){if(!this._pointMap.h.hasOwnProperty(e)){var i=new we(e);i.init(t,n),this._pointMap.h[e]=i,this._points.push(i),null==this._pointerTouch&&(this._pointerTouch=i,this._pointer.submitDown(t,n,i._source)),this.down.emit(i)}},submitMove:function(e,t,n){var i=this._pointMap.h[e];null!=i&&(i.init(t,n),this._pointerTouch==i&&this._pointer.submitMove(t,n,i._source),this.move.emit(i))},submitUp:function(e,t,n){var i=this._pointMap.h[e];null!=i&&(i.init(t,n),this._pointMap.remove(e),h.remove(this._points,i),this._pointerTouch==i&&(this._pointerTouch=null,this._pointer.submitUp(t,n,i._source)),this.up.emit(i))},__class__:Le};var Ne=function(){this._loaders=[]};Ne.__name__="flambe.platform.CatapultClient",Ne.prototype={add:function(e){"assets"==e.manifest.get_localBase()&&this._loaders.push(e)},remove:function(e){h.remove(this._loaders,e)},onError:function(e){D.logger.warn("Unable to connect to Catapult",["cause",e])},onMessage:function(e){var t=JSON.parse(e);switch(t.type){case"file_changed":var n=t.name+"?v="+t.md5;n=p.replace(n,"\\","/");var i=0,a=this._loaders;while(i<a.length){var r=a[i];++i,r.reload(n)}break;case"restart":this.onRestart();break}},onRestart:function(){Jt.fail()},__class__:Ne};var Oe=function(e){var t=this;this._platform=e,e.getKeyboard().down.connect((function(n){n.key==de.O&&e.getKeyboard().isDown(de.Control)&&t.toggleOverdrawGraphics()&&D.logger.info("Enabled overdraw visualizer, press Ctrl-O again to disable",null)}))};Oe.__name__="flambe.platform.DebugLogic",Oe.prototype={toggleOverdrawGraphics:function(){var e=this._platform.getRenderer();if(null!=this._savedGraphics)e.graphics=this._savedGraphics,this._savedGraphics=null;else if(null!=e.graphics)return this._savedGraphics=e.graphics,e.graphics=new nt(this._savedGraphics),!0;return!1},__class__:Oe};var Ye=function(){};Ye.__name__="flambe.sound.Sound",Ye.__isInterface__=!0,Ye.__interfaces__=[Y];var Xe=function(){ke.call(this),this._playback=new Ve(this)};Xe.__name__="flambe.platform.DummySound",Xe.__interfaces__=[Ye],Xe.getInstance=function(){return null==Xe._instance&&(Xe._instance=new Xe),Xe._instance},Xe.__super__=ke,Xe.prototype=o(ke.prototype,{copyFrom:function(e){},onDisposed:function(){},__class__:Xe});var Ue=function(){};Ue.__name__="flambe.sound.Playback",Ue.__isInterface__=!0,Ue.__interfaces__=[g];var Ve=function(e){this._sound=e,this.volume=new M(0),this._complete=new k(!0)};Ve.__name__="flambe.platform.DummyPlayback",Ve.__interfaces__=[Ue],Ve.prototype={dispose:function(){},__class__:Ve};var Ke=function(){};Ke.__name__="flambe.subsystem.StorageSystem",Ke.__isInterface__=!0;var We=function(){this.clear()};We.__name__="flambe.platform.DummyStorage",We.__interfaces__=[Ke],We.prototype={clear:function(){this._hash=new ni},__class__:We};var Ge=function(){this.down=new E,this.move=new E,this.up=new E};Ge.__name__="flambe.platform.DummyTouch",Ge.__interfaces__=[Ie],Ge.prototype={__class__:Ge};var He=function(){this._entries=[]};He.__name__="flambe.platform.EventGroup",He.__interfaces__=[g],He.prototype={addListener:function(e,t,n){e.addEventListener(t,n,!1),this._entries.push(new je(e,t,n))},addDisposingListener:function(e,t,n){var i=this;this.addListener(e,t,(function(e){i.dispose(),n(e)}))},dispose:function(){var e=0,t=this._entries;while(e<t.length){var n=t[e];++e,n.dispatcher.removeEventListener(n.type,n.listener,!1)}this._entries=[]},__class__:He};var je=function(e,t,n){this.dispatcher=e,this.type=t,this.listener=n};je.__name__="flambe.platform._EventGroup.Entry",je.prototype={__class__:je};var ze=function(e){E.call(this,e),this.hasListenersValue=new k(null!=this._head)};ze.__name__="flambe.platform.HeavySignal1",ze.__super__=E,ze.prototype=o(E.prototype,{connect:function(e,t){null==t&&(t=!1);var n=E.prototype.connect.call(this,e,t);return this.hasListenersValue.set__(null!=this._head),n},disconnect:function(e){E.prototype.disconnect.call(this,e),this.hasListenersValue.set__(null!=this._head)},didEmit:function(e){E.prototype.didEmit.call(this,e),this.hasListenersValue.set__(null!=this._head)},__class__:ze});var qe=function(){};qe.__name__="flambe.platform.InternalGraphics",qe.__isInterface__=!0,qe.__interfaces__=[re],qe.prototype={__class__:qe};var Qe=function(){};Qe.__name__="flambe.subsystem.RendererSystem",Qe.__isInterface__=!0,Qe.prototype={__class__:Qe};var Je=function(){};Je.__name__="flambe.platform.InternalRenderer",Je.__isInterface__=!0,Je.__interfaces__=[Qe],Je.prototype={__class__:Je};var Ze=function(){};Ze.__name__="flambe.platform.KeyCodes",Ze.toKey=function(e){switch(e){case 8:return de.Backspace;case 9:return de.Tab;case 13:return de.Enter;case 15:return de.Command;case 16:return de.Shift;case 17:return de.Control;case 18:return de.Alt;case 20:return de.CapsLock;case 27:return de.Escape;case 32:return de.Space;case 33:return de.PageUp;case 34:return de.PageDown;case 35:return de.End;case 36:return de.Home;case 37:return de.Left;case 38:return de.Up;case 39:return de.Right;case 40:return de.Down;case 45:return de.Insert;case 46:return de.Delete;case 48:return de.Number0;case 49:return de.Number1;case 50:return de.Number2;case 51:return de.Number3;case 52:return de.Number4;case 53:return de.Number5;case 54:return de.Number6;case 55:return de.Number7;case 56:return de.Number8;case 57:return de.Number9;case 65:return de.A;case 66:return de.B;case 67:return de.C;case 68:return de.D;case 69:return de.E;case 70:return de.F;case 71:return de.G;case 72:return de.H;case 73:return de.I;case 74:return de.J;case 75:return de.K;case 76:return de.L;case 77:return de.M;case 78:return de.N;case 79:return de.O;case 80:return de.P;case 81:return de.Q;case 82:return de.R;case 83:return de.S;case 84:return de.T;case 85:return de.U;case 86:return de.V;case 87:return de.W;case 88:return de.X;case 89:return de.Y;case 90:return de.Z;case 96:return de.Numpad0;case 97:return de.Numpad1;case 98:return de.Numpad2;case 99:return de.Numpad3;case 100:return de.Numpad4;case 101:return de.Numpad5;case 102:return de.Numpad6;case 103:return de.Numpad7;case 104:return de.Numpad8;case 105:return de.Numpad9;case 106:return de.NumpadMultiply;case 107:return de.NumpadAdd;case 108:return de.NumpadEnter;case 109:return de.NumpadSubtract;case 110:return de.NumpadDecimal;case 111:return de.NumpadDivide;case 112:return de.F1;case 113:return de.F2;case 114:return de.F3;case 115:return de.F4;case 116:return de.F5;case 117:return de.F6;case 118:return de.F7;case 119:return de.F8;case 120:return de.F9;case 121:return de.F10;case 122:return de.F11;case 123:return de.F12;case 186:return de.Semicolon;case 187:return de.Equals;case 188:return de.Comma;case 189:return de.Minus;case 190:return de.Period;case 191:return de.Slash;case 192:return de.Backquote;case 219:return de.LeftBracket;case 220:return de.Backslash;case 221:return de.RightBracket;case 222:return de.Quote;case 16777234:return de.Menu;case 16777247:return de.Search}return de.Unknown(e)},Ze.toKeyCode=function(e){switch(e._hx_index){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return e.keyCode}};var $e=function(){this._tickables=[]};$e.__name__="flambe.platform.MainLoop",$e.updateEntity=function(e,t){var n=e._compMap["SpeedAdjuster_33"];if(null!=n&&(n._realDt=t,t*=n.scale._value,t<=0))n.onUpdate(t);else{var i=e.firstComponent;while(null!=i){var a=i.next;0==(1&i._flags)&&(i._flags|=1,i.onStart()),i.onUpdate(t),i=a}i=e.firstChild;while(null!=i){a=i.next;$e.updateEntity(i,t),i=a}}},$e.prototype={update:function(e){if(e<=0)D.logger.warn("Zero or negative time elapsed since the last frame!",["dt",e]);else{e>1&&(e=1);var t=0;while(t<this._tickables.length){var n=this._tickables[t];null==n||n.update(e)?this._tickables.splice(t,1):++t}P.volume.update(e),$e.updateEntity(P.root,e)}},render:function(e){var t=e.graphics;null!=t&&(e.willRender(),q.render(P.root,t),e.didRender())},__class__:$e};var et=function(){};et.__name__="flambe.platform.MathUtil",et.nextPowerOfTwo=function(e){var t=1;while(t<e)t<<=1;return t};var tt=function(){};tt.__name__="flambe.platform.MouseCodes",tt.toButton=function(e){switch(e){case 0:return me.Left;case 1:return me.Middle;case 2:return me.Right}return me.Unknown(e)};var nt=function(e){this._impl=e};nt.__name__="flambe.platform.OverdrawGraphics",nt.__interfaces__=[qe],nt.prototype={save:function(){this._impl.save()},translate:function(e,t){this._impl.translate(e,t)},scale:function(e,t){this._impl.scale(e,t)},rotate:function(e){this._impl.rotate(e)},transform:function(e,t,n,i,a,r){this._impl.transform(e,t,n,i,a,r)},multiplyAlpha:function(e){},setBlendMode:function(e){},applyScissor:function(e,t,n,i){this._impl.applyScissor(e,t,n,i)},restore:function(){this._impl.restore()},drawTexture:function(e,t,n){this.drawRegion(t,n,e.get_width(),e.get_height())},drawSubTexture:function(e,t,n,i,a,r,s){this.drawRegion(t,n,r,s)},fillRect:function(e,t,n,i,a){this.drawRegion(t,n,i,a)},willRender:function(){this._impl.willRender(),this._impl.save(),this._impl.setBlendMode(G.Add)},didRender:function(){this._impl.restore(),this._impl.didRender()},onResize:function(e,t){this._impl.onResize(e,t)},drawRegion:function(e,t,n,i){this._impl.fillRect(1052680,e,t,n,i)},__class__:nt};var it=function(){};it.__name__="flambe.platform.TextureRoot",it.__isInterface__=!0;var at=function(){};at.__name__="flambe.platform.Tickable",at.__isInterface__=!0,at.prototype={__class__:at};var rt=function(e,t){this._firstDraw=!1,this._canvasCtx=e.getContext("2d",{alpha:t})};rt.__name__="flambe.platform.html.CanvasGraphics",rt.__interfaces__=[qe],rt.prototype={save:function(){this._canvasCtx.save()},translate:function(e,t){this._canvasCtx.translate(0|e,0|t)},scale:function(e,t){this._canvasCtx.scale(e,t)},rotate:function(e){this._canvasCtx.rotate(3.141592653589793*e/180)},transform:function(e,t,n,i,a,r){this._canvasCtx.transform(e,t,n,i,a,r)},restore:function(){this._canvasCtx.restore()},drawTexture:function(e,t,n){this.drawSubTexture(e,t,n,0,0,e.get_width(),e.get_height())},drawSubTexture:function(e,t,n,i,a,r,s){if(this._firstDraw)return this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(e,t,n,i,a,r,s),void(this._canvasCtx.globalCompositeOperation="source-over");var o=e,_=o.root;Jt.that(!_._disposed,"Asset cannot be used after being disposed"),this._canvasCtx.drawImage(_.image,o.rootX+i|0,o.rootY+a|0,0|r,0|s,0|t,0|n,0|r,0|s)},fillRect:function(e,t,n,i,a){if(this._firstDraw)return this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(e,t,n,i,a),void(this._canvasCtx.globalCompositeOperation="source-over");var r=(16777215&e).toString(16);while(r.length<6)r="0"+r;this._canvasCtx.fillStyle="#"+r,this._canvasCtx.fillRect(0|t,0|n,0|i,0|a)},multiplyAlpha:function(e){this._canvasCtx.globalAlpha*=e},setBlendMode:function(e){var t;switch(e._hx_index){case 0:t="source-over";break;case 1:t="lighter";break;case 2:t="multiply";break;case 3:t="screen";break;case 4:t="destination-in";break;case 5:t="copy";break}this._canvasCtx.globalCompositeOperation=t},applyScissor:function(e,t,n,i){this._canvasCtx.beginPath(),this._canvasCtx.rect(0|e,0|t,0|n,0|i),this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(e,t){},__class__:rt};var st=function(e){this.graphics=new rt(e,!0),this._hasGPU=new k(!0)};st.__name__="flambe.platform.html.CanvasRenderer",st.__interfaces__=[Je],st.prototype={get_type:function(){return Qt.Canvas},createTextureFromImage:function(e){var t=new _t(st.CANVAS_TEXTURES?xt.createCanvas(e):e);return t.createTexture(t.width,t.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(e,t){return Jt.fail(),null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:st};var ot=function(e,t,n){Fe.call(this,e,t,n)};ot.__name__="flambe.platform.html.CanvasTexture",ot.__super__=Fe,ot.prototype=o(Fe.prototype,{__class__:ot});var _t=function(e){this._graphics=null,this.updateCount=0,ke.call(this),this.image=e,this.width=e.width,this.height=e.height};_t.__name__="flambe.platform.html.CanvasTextureRoot",_t.__interfaces__=[it],_t.__super__=ke,_t.prototype=o(ke.prototype,{createTexture:function(e,t){return new ot(this,e,t)},copyFrom:function(e){this.image=e.image,this._graphics=e._graphics,++this.updateCount},onDisposed:function(){this.image=null,this._graphics=null},__class__:_t});var ht=function(e,t){Ce.call(this,e,t)};ht.__name__="flambe.platform.html.HtmlAssetPackLoader",ht.detectImageFormats=function(e){var t=[X.PNG,X.JPG,X.GIF],n=2,i=function(){n-=1,0==n&&e(t)},a=window.document.createElement("img");a.onload=a.onerror=function(e){1==a.width&&t.unshift(X.WEBP),i()},a.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var r=window.document.createElement("img");r.onload=r.onerror=function(e){1==r.width&&t.unshift(X.JXR),i()},r.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="},ht.detectAudioFormats=function(){var e=window.document.createElement("audio");if(null==e||null==e.canPlayType)return D.logger.warn("Audio is not supported at all in this browser!",null),[];var t=new _("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),n=i.navigator.userAgent;if(!At.get_supported()&&t.match(n))return D.logger.warn("HTML5 audio is blacklisted for this browser",["userAgent",n]),[];var a=[{format:X.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:X.MP3,mimeType:"audio/mpeg"},{format:X.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:X.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:X.WAV,mimeType:"audio/wav"}],r=[],s=0;while(s<a.length){var o=a[s];++s;var h="";try{h=e.canPlayType(o.mimeType)}catch(l){}""!=h&&r.push(o.format)}return r},ht.supportsBlob=function(){if(ht._detectBlobSupport){if(ht._detectBlobSupport=!1,new _("\\bSilk\\b","").match(i.navigator.userAgent))return!1;if(null==window.Blob)return!1;var e=new XMLHttpRequest;if(e.open("GET",".",!0),""!=e.responseType)return!1;if(e.responseType="blob","blob"!=e.responseType)return!1;ht._URL=xt.loadExtension("URL").value}return null!=ht._URL&&null!=ht._URL.createObjectURL},ht.__super__=Ce,ht.prototype=o(Ce.prototype,{loadEntry:function(e,t){var n=this;switch(t.format._hx_index){case 0:case 1:case 2:case 3:case 4:var i=window.document.createElement("img"),a=new He;a.addDisposingListener(i,"load",(function(a){(i.width>1024||i.height>1024)&&D.logger.warn("Images larger than 1024px on a side will prevent GPU acceleration on some platforms (iOS)",["url",e,"width",i.width,"height",i.height]),ht.supportsBlob()&&ht._URL.revokeObjectURL(i.src);var r=n._platform.getRenderer().createTextureFromImage(i);null!=r?n.handleLoad(t,r):n.handleTextureError(t)})),a.addDisposingListener(i,"error",(function(e){n.handleError(t,"Failed to load image")})),ht.supportsBlob()?this.download(e,t,"blob",(function(e){i.src=ht._URL.createObjectURL(e)})):i.src=e;break;case 5:case 6:case 7:this.download(e,t,"arraybuffer",(function(e){var i=n._platform.getRenderer().createCompressedTexture(t.format,null);null!=i?n.handleLoad(t,i):n.handleTextureError(t)}));break;case 8:case 9:case 10:case 11:case 12:if(At.get_supported())this.download(e,t,"arraybuffer",(function(i){At.ctx.decodeAudioData(i,(function(e){n.handleLoad(t,new At(e))}),(function(){D.logger.warn("Couldn't decode Web Audio, ignoring this asset",["url",e]),n.handleLoad(t,Xe.getInstance())}))}));else{var r=window.document.createElement("audio");r.preload="auto";var s=++ht._mediaRefCount;null==ht._mediaElements&&(ht._mediaElements=new ti),ht._mediaElements.h[s]=r;a=new He;a.addDisposingListener(r,"canplaythrough",(function(e){ht._mediaElements.remove(s),n.handleLoad(t,new vt(r))})),a.addDisposingListener(r,"error",(function(i){ht._mediaElements.remove(s);var a=r.error.code;3==a||4==a?(D.logger.warn("Couldn't decode HTML5 audio, ignoring this asset",["url",e,"code",a]),n.handleLoad(t,Xe.getInstance())):n.handleError(t,"Failed to load audio: "+r.error.code)})),a.addListener(r,"progress",(function(e){if(r.buffered.length>0&&r.duration>0){var i=r.buffered.end(0)/r.duration;n.handleProgress(t,i*t.bytes|0)}})),r.src=e,r.load()}break;case 13:this.download(e,t,"text",(function(e){n.handleLoad(t,new Te(e))}));break}},getAssetFormats:function(e){var t=this;null==ht._supportedFormats&&(ht._supportedFormats=new en,ht.detectImageFormats((function(e){ht._supportedFormats.set_result(t._platform.getRenderer().getCompressedTextureFormats().concat(e).concat(ht.detectAudioFormats()).concat([X.Data]))}))),ht._supportedFormats.get(e)},download:function(e,t,n,i){var a=this,r=null,s=null,o=0,_=!1,h=function(){_&&(_=!1,window.clearInterval(o))},l=3,u=function(){return l-=1,l>=0&&(D.logger.warn("Retrying asset download",["url",t.url]),s(),!0)};s=function(){h(),null!=r&&r.abort(),r=new XMLHttpRequest,r.open("GET",e,!0),r.responseType=n;var s=0;r.onprogress=function(e){_||(_=!0,o=window.setInterval((function(){4!=r.readyState&&Date.now()-s>5e3&&(u()||(h(),a.handleError(t,"Download stalled")))}),1e3)),s=Date.now(),a.handleProgress(t,e.loaded)},r.onerror=function(e){0==r.status&&u()||(h(),a.handleError(t,"HTTP error "+r.status))},r.onload=function(e){var t=r.response;null==t&&(t=r.responseText),h(),i(t)},r.send()},s()},__class__:ht});var lt=function(){var e=this;Ne.call(this),this._socket=new WebSocket("ws://"+i.location.host),this._socket.onerror=function(t){e.onError("unknown")},this._socket.onopen=function(e){D.logger.info("Catapult connected",null)},this._socket.onmessage=function(t){e.onMessage(t.data)}};lt.__name__="flambe.platform.html.HtmlCatapultClient",lt.canUse=function(){return!1},lt.__super__=Ne,lt.prototype=o(Ne.prototype,{onRestart:function(){window.top.location.reload()},__class__:lt});var ut=function(){};ut.__name__="flambe.subsystem.ExternalSystem",ut.__isInterface__=!0;var ct=function(){};ct.__name__="flambe.platform.html.HtmlExternal",ct.__interfaces__=[ut],ct.prototype={__class__:ct};var dt=function(){};dt.__name__="flambe.util.LogHandler",dt.__isInterface__=!0,dt.prototype={__class__:dt};var pt=function(e){this._tagPrefix=e+": "};pt.__name__="flambe.platform.html.HtmlLogHandler",pt.__interfaces__=[dt],pt.isSupported=function(){return"object"==typeof console&&null!=console.info},pt.prototype={log:function(e,t){switch(t=this._tagPrefix+t,e._hx_index){case 0:console.info(t);break;case 1:console.warn(t);break;case 2:console.error(t);break}},__class__:pt};var mt=function(){};mt.__name__="flambe.subsystem.MotionSystem",mt.__isInterface__=!0;var ft=function(){var e=this,t=new ze;this.acceleration=t;var n=new ze;this.accelerationIncludingGravity=n;var i=new ze;if(this.attitude=i,this.get_accelerationSupported()){this._sharedAcceleration=new ue,this._sharedAccelerationIncludingGravity=new ue;var a=null,r=function(i,r){null!=t._head||null!=n._head?null==a&&(a=new He,a.addListener(window,"devicemotion",mi(e,e.onDeviceMotion))):null!=a&&(a.dispose(),a=null)};t.hasListenersValue.get_changed().connect(r),n.hasListenersValue.get_changed().connect(r)}if(this.get_attitudeSupported()){this._sharedAttitude=new ce;var s=null;i.hasListenersValue.get_changed().connect((function(t,n){t?(s=new He,s.addListener(window,"deviceorientation",mi(e,e.onDeviceOrientation))):(s.dispose(),s=null)}))}};ft.__name__="flambe.platform.html.HtmlMotion",ft.__interfaces__=[mt],ft.initAcceleration=function(e,t){switch(window.orientation){case-90:e.init(t.y,-t.x,t.z);break;case 0:e.init(t.x,t.y,t.z);break;case 90:e.init(-t.y,t.x,t.z);break;case 180:e.init(-t.x,-t.y,t.z);break}},ft.prototype={get_accelerationSupported:function(){return null!=window.DeviceMotionEvent},onDeviceMotion:function(e){null!=e.acceleration&&(ft.initAcceleration(this._sharedAcceleration,e.acceleration),this.acceleration.emit(this._sharedAcceleration)),null!=e.accelerationIncludingGravity&&(ft.initAcceleration(this._sharedAccelerationIncludingGravity,e.accelerationIncludingGravity),this.accelerationIncludingGravity.emit(this._sharedAccelerationIncludingGravity))},get_attitudeSupported:function(){return null!=window.DeviceOrientationEvent},onDeviceOrientation:function(e){switch(window.orientation){case-90:this._sharedAttitude.init(e.gamma,-e.beta,e.alpha);break;case 0:this._sharedAttitude.init(e.beta,e.gamma,e.alpha);break;case 90:this._sharedAttitude.init(-e.gamma,e.beta,e.alpha);break;case 180:this._sharedAttitude.init(-e.beta,-e.gamma,e.alpha);break}this.attitude.emit(this._sharedAttitude)},__class__:ft};var gt=function(e,t){Re.call(this,e),this._canvas=t};gt.__name__="flambe.platform.html.HtmlMouse",gt.__super__=Re,gt.prototype=o(Re.prototype,{__class__:gt});var vt=function(e){ke.call(this),this.audioElement=e};vt.__name__="flambe.platform.html.HtmlSound",vt.__interfaces__=[Ye],vt.__super__=ke,vt.prototype=o(ke.prototype,{copyFrom:function(e){this.audioElement=e.audioElement},onDisposed:function(){this.audioElement=null},__class__:vt});var bt=function(){};bt.__name__="flambe.subsystem.StageSystem",bt.__isInterface__=!0,bt.prototype={__class__:bt};var wt=function(e){var t=this;this._canvas=e,this.resize=new tn,this.scaleFactor=wt.computeScaleFactor(),1!=this.scaleFactor&&(D.logger.info("Reversing device DPI scaling",["scaleFactor",this.scaleFactor]),xt.setVendorStyle(this._canvas,"transform-origin","top left"),xt.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")")),xt.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",(function(e){xt.callLater(mi(t,t.hideMobileBrowser),200)}),!1),this.hideMobileBrowser()),window.addEventListener("resize",mi(this,this.onWindowResize),!1),this.onWindowResize(null),this.orientation=new k(null),null!=window.orientation&&(window.addEventListener("orientationchange",mi(this,this.onOrientationChange),!1),this.onOrientationChange(null)),this.fullscreen=new k(!1),xt.addVendorListener(window.document,"fullscreenchange",(function(e){t.updateFullscreen()}),!1),xt.addVendorListener(window.document,"fullscreenerror",(function(e){D.logger.warn("Error when requesting fullscreen",null)}),!1),this.updateFullscreen()};wt.__name__="flambe.platform.html.HtmlStage",wt.__interfaces__=[bt],wt.computeScaleFactor=function(){var e=window.devicePixelRatio;null==e&&(e=1);var t=window.document.createElement("canvas"),n=t.getContext("2d",null),i=xt.loadExtension("backingStorePixelRatio",n).value;null==i&&(i=1);var a=e/i,r=window.screen.width,s=window.screen.height;return a*r>1136||a*s>1136?1:a},wt.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(e){var t=this._canvas.parentElement,n=t.getBoundingClientRect();this.resizeCanvas(n.width,n.height)},resizeCanvas:function(e,t){var n=this.scaleFactor*e,i=this.scaleFactor*t;return(this._canvas.width!=n||this._canvas.height!=i)&&(this._canvas.width=0|n,this._canvas.height=0|i,this.resize.emit(),!0)},hideMobileBrowser:function(){var e=this,t=window.document.documentElement.style,n=c.string(window.innerHeight+100);t.height=n+"px";n=c.string(window.innerWidth);t.width=n+"px",t.overflow="visible",xt.callLater((function(){xt.hideMobileBrowser(),xt.callLater((function(){var n=c.string(window.innerHeight);t.height=n+"px",e.onWindowResize(null)}),100)}))},onOrientationChange:function(e){var t=xt.orientation(window.orientation);this.orientation.set__(t)},updateFullscreen:function(){var e=xt.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value;this.fullscreen.set__(1==e)},__class__:wt};var yt=function(e){this._storage=e};yt.__name__="flambe.platform.html.HtmlStorage",yt.__interfaces__=[Ke],yt.prototype={__class__:yt};var xt=function(){};xt.__name__="flambe.platform.html.HtmlUtil",xt.callLater=function(e,t){null==t&&(t=0),window.setTimeout(e,t)},xt.hideMobileBrowser=function(){window.scrollTo(1,0)},xt.loadExtension=function(e,t){null==t&&(t=window);var n=u.field(t,e);if(null!=n)return{prefix:"",field:e,value:n};var i=e.charAt(0).toUpperCase()+h.substr(e,1,null),a=0,r=xt.VENDOR_PREFIXES;while(a<r.length){var s=r[a];++a;var o=s+i;n=u.field(t,o);if(null!=n)return{prefix:s,field:o,value:n}}return{prefix:null,field:null,value:null}},xt.loadFirstExtension=function(e,t){var n=0;while(n<e.length){var i=e[n];++n;var a=xt.loadExtension(i,t);if(null!=a.field)return a}return{prefix:null,field:null,value:null}},xt.polyfill=function(e,t){null==t&&(t=window);var n=xt.loadExtension(e,t).value;return null!=n&&(t[e]=n,!0)},xt.setVendorStyle=function(e,t,n){var i=e.style,a=0,r=xt.VENDOR_PREFIXES;while(a<r.length){var s=r[a];++a,i.setProperty("-"+s+"-"+t,n)}i.setProperty(t,n)},xt.addVendorListener=function(e,t,n,i){var a=0,r=xt.VENDOR_PREFIXES;while(a<r.length){var s=r[a];++a,e.addEventListener(s+t,n,i)}e.addEventListener(t,n,i)},xt.orientation=function(e){switch(e){case-90:case 90:return oe.Landscape;default:return oe.Portrait}},xt.createEmptyCanvas=function(e,t){var n=window.document.createElement("canvas");return n.width=e,n.height=t,n},xt.createCanvas=function(e){var t=xt.createEmptyCanvas(e.width,e.height),n=t.getContext("2d",null);return n.save(),n.globalCompositeOperation="copy",n.drawImage(e,0,0),n.restore(),t},xt.detectSlowDriver=function(e){var t=i.navigator.platform.indexOf("Win")>=0;if(t){var n=null!=window.chrome;if(n){var a=0,r=e.getSupportedExtensions();while(a<r.length){var s=r[a];if(++a,s.indexOf("WEBGL_compressed_texture")>=0)return!1}return!0}}return!1},xt.fixAndroidMath=function(){if(i.navigator.userAgent.indexOf("Linux; U; Android 4")>=0){D.logger.warn("Monkey patching around Android sin/cos bug",null);var e=Math.sin,t=Math.cos;Math.sin=function(t){return 0==t?0:e(t)},Math.cos=function(e){return 0==e?1:t(e)}}};var St=function(){};St.__name__="flambe.subsystem.WebSystem",St.__isInterface__=!0;var kt=function(){this.stack=[]};kt.__name__="flambe.platform.html.HtmlWeb",kt.__interfaces__=[St],kt.prototype={__class__:kt};var Ct=function(){};Ct.__name__="flambe.web.WebView",Ct.__isInterface__=!0,Ct.__interfaces__=[g];var At=function(e){ke.call(this),this.buffer=e};At.__name__="flambe.platform.html.WebAudioSound",At.__interfaces__=[Ye],At.get_supported=function(){if(At._detectSupport){At._detectSupport=!1;var e=xt.loadExtension("AudioContext").value;null!=e&&(At.ctx=new e,At.gain=At.createGain(),At.gain.connect(At.ctx.destination),P.volume.watch((function(e,t){At.gain.gain.value=e})))}return null!=At.ctx},At.createGain=function(){return null!=At.ctx.createGain?At.ctx.createGain():At.ctx.createGainNode()},At.__super__=ke,At.prototype=o(ke.prototype,{copyFrom:function(e){this.buffer=e.buffer},onDisposed:function(){this.buffer=null},__class__:At});var Tt=function(e){this._backbufferHeight=0,this._backbufferWidth=0,this._dataOffset=0,this._maxQuads=0,this._quads=0,this._pendingSetScissor=!1,this._currentRenderTarget=null,this._currentTexture=null,this._currentShader=null,this._currentBlendMode=null,this._lastScissor=null,this._lastTexture=null,this._lastShader=null,this._lastRenderTarget=null,this._lastBlendMode=null,this._gl=e,e.clearColor(0,0,0,0),e.enable(3042),e.pixelStorei(37441,1),this._vertexBuffer=e.createBuffer(),e.bindBuffer(34962,this._vertexBuffer),this._quadIndexBuffer=e.createBuffer(),e.bindBuffer(34963,this._quadIndexBuffer),this._drawTextureShader=new It(e),this._drawPatternShader=new Ft(e),this._fillRectShader=new Lt(e),this.resize(16)};Tt.__name__="flambe.platform.html.WebGLBatcher",Tt.prototype={resizeBackbuffer:function(e,t){this._gl.viewport(0,0,e,t),this._backbufferWidth=e,this._backbufferHeight=t},willRender:function(){this._gl.clear(16384)},didRender:function(){this.flush()},bindTexture:function(e){this.flush(),this._lastTexture=null,this._currentTexture=null,this._gl.bindTexture(3553,e)},deleteTexture:function(e){null!=this._lastTexture&&this._lastTexture.root==e&&(this.flush(),this._lastTexture=null,this._currentTexture=null),this._gl.deleteTexture(e.nativeTexture)},deleteFramebuffer:function(e){e==this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=null,this._currentRenderTarget=null),this._gl.deleteFramebuffer(e.framebuffer)},prepareDrawTexture:function(e,t,n,i){return i!=this._lastTexture&&(this.flush(),this._lastTexture=i),this.prepareQuad(5,e,t,n,this._drawTextureShader)},prepareFillRect:function(e,t,n){return this.prepareQuad(6,e,t,n,this._fillRectShader)},prepareQuad:function(e,t,n,i,a){t!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=t),n!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=n),a!=this._lastShader&&(this.flush(),this._lastShader=a),null==i&&null==this._lastScissor||null!=i&&null!=this._lastScissor&&this._lastScissor.equals(i)||(this.flush(),this._lastScissor=null!=i?i.clone(this._lastScissor):null,this._pendingSetScissor=!0),this._quads>=this._maxQuads&&this.resize(2*this._maxQuads),++this._quads;var r=this._dataOffset;return this._dataOffset+=4*e,r},flush:function(){if(!(this._quads<1)){if(this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget),this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode._hx_index){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0);break}this._currentBlendMode=this._lastBlendMode}if(this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(0|this._lastScissor.x,0|this._lastScissor.y,0|this._lastScissor.width,0|this._lastScissor.height)):this._gl.disable(3089),this._pendingSetScissor=!1),this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture),this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader),this._lastShader==this._drawPatternShader){var e=this._lastTexture,t=e.root;this._drawPatternShader.setRegion(e.rootX/t.width,e.rootY/t.height,e._width/t.width,e._height/t.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040),this._gl.drawElements(4,6*this._quads,5123,0),this._quads=0,this._dataOffset=0}},resize:function(e){if(this.flush(),!(e>1024)){this._maxQuads=e,this.data=new Float32Array(4*e*6),this._gl.bufferData(34962,this.data.length*Float32Array.BYTES_PER_ELEMENT,35040);var t=new Uint16Array(6*e),n=0;while(n<e){var i=n++;t[6*i]=4*i,t[6*i+1]=4*i+1,t[6*i+2]=4*i+2,t[6*i+3]=4*i+2,t[6*i+4]=4*i+3,t[6*i+5]=4*i}this._gl.bufferData(34963,t,35044)}},bindRenderTarget:function(e){null!=e?(this._gl.bindFramebuffer(36160,e.framebuffer),this._gl.viewport(0,0,e.width,e.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight)),this._currentRenderTarget=e,this._lastRenderTarget=e},__class__:Tt};var Et=function(e,t){this._stateList=null,this._inverseProjection=null,null==Et._scratchQuadArray&&(Et._scratchQuadArray=new Float32Array(8)),this._batcher=e,this._renderTarget=t};Et.__name__="flambe.platform.html.WebGLGraphics",Et.__interfaces__=[qe],Et.prototype={save:function(){var e=this._stateList,t=this._stateList.next;null==t&&(t=new Mt,t.prev=e,e.next=t),e.matrix.clone(t.matrix),t.alpha=e.alpha,t.blendMode=e.blendMode,t.scissor=null!=e.scissor?e.scissor.clone(t.scissor):null,this._stateList=t},translate:function(e,t){var n=this._stateList.matrix;n.m02+=n.m00*e+n.m01*t,n.m12+=n.m10*e+n.m11*t},scale:function(e,t){var n=this._stateList.matrix;n.m00*=e,n.m10*=e,n.m01*=t,n.m11*=t},rotate:function(e){var t=this._stateList.matrix;e=3.141592653589793*e/180;var n=Math.sin(e),i=Math.cos(e),a=t.m00,r=t.m10,s=t.m01,o=t.m11;t.m00=a*i+s*n,t.m10=r*i+o*n,t.m01=s*i-a*n,t.m11=o*i-r*n},transform:function(e,t,n,i,a,r){var s=this._stateList;Et._scratchMatrix.set(e,t,n,i,a,r),xe.multiply(s.matrix,Et._scratchMatrix,s.matrix)},restore:function(){Jt.that(null!=this._stateList.prev,"Can't restore without a previous save"),this._stateList=this._stateList.prev},drawTexture:function(e,t,n){this.drawSubTexture(e,t,n,0,0,e.get_width(),e.get_height())},drawSubTexture:function(e,t,n,i,a,r,s){var o=this._stateList,_=e,h=_.root;Jt.that(!h._disposed,"Asset cannot be used after being disposed");var l=this.transformQuad(t,n,r,s),u=h.width,c=h.height,d=(_.rootX+i)/u,p=(_.rootY+a)/c,m=d+r/u,f=p+s/c,g=o.alpha,v=this._batcher.prepareDrawTexture(this._renderTarget,o.blendMode,o.scissor,_),b=this._batcher.data;b[v]=l[0],b[++v]=l[1],b[++v]=d,b[++v]=p,b[++v]=g,b[++v]=l[2],b[++v]=l[3],b[++v]=m,b[++v]=p,b[++v]=g,b[++v]=l[4],b[++v]=l[5],b[++v]=m,b[++v]=f,b[++v]=g,b[++v]=l[6],b[++v]=l[7],b[++v]=d,b[++v]=f,b[++v]=g},fillRect:function(e,t,n,i,a){var r=this._stateList,s=this.transformQuad(t,n,i,a),o=(16711680&e)/16711680,_=(65280&e)/65280,h=(255&e)/255,l=r.alpha,u=this._batcher.prepareFillRect(this._renderTarget,r.blendMode,r.scissor),c=this._batcher.data;c[u]=s[0],c[++u]=s[1],c[++u]=o,c[++u]=_,c[++u]=h,c[++u]=l,c[++u]=s[2],c[++u]=s[3],c[++u]=o,c[++u]=_,c[++u]=h,c[++u]=l,c[++u]=s[4],c[++u]=s[5],c[++u]=o,c[++u]=_,c[++u]=h,c[++u]=l,c[++u]=s[6],c[++u]=s[7],c[++u]=o,c[++u]=_,c[++u]=h,c[++u]=l},multiplyAlpha:function(e){this._stateList.alpha*=e},setBlendMode:function(e){this._stateList.blendMode=e},applyScissor:function(e,t,n,i){var a=this._stateList,r=Et._scratchQuadArray;r[0]=e,r[1]=t,r[2]=e+n,r[3]=t+i,a.matrix.transformArray(r,4,r),this._inverseProjection.transformArray(r,4,r),e=r[0],t=r[1],n=r[2]-e,i=r[3]-t,n<0&&(e+=n,n=-n),i<0&&(t+=i,i=-i),a.applyScissor(e,t,n,i)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(e,t){this._stateList=new Mt;var n=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/e,0,0,-2*n/t,-1,n),this._inverseProjection=new xe,this._inverseProjection.set(2/e,0,0,2/t,-1,-1),this._inverseProjection.invert()},transformQuad:function(e,t,n,i){var a=e+n,r=t+i,s=Et._scratchQuadArray;return s[0]=e,s[1]=t,s[2]=a,s[3]=t,s[4]=a,s[5]=r,s[6]=e,s[7]=r,this._stateList.matrix.transformArray(s,8,s),s},__class__:Et};var Mt=function(){this.next=null,this.prev=null,this.scissor=null,this.matrix=new xe,this.alpha=1,this.blendMode=G.Normal};Mt.__name__="flambe.platform.html._WebGLGraphics.DrawingState",Mt.prototype={applyScissor:function(e,t,n,i){if(null!=this.scissor){var a=this.scissor.x,r=a>e?a:e,s=(a=this.scissor.y,a>t?a:t),o=(a=this.scissor.x+this.scissor.width,e+n),_=a<o?a:o,h=(a=this.scissor.y+this.scissor.height,o=t+i,a<o?a:o);e=r,t=s,n=_-r,i=h-s}else this.scissor=new Se;this.scissor.set(Math.round(e),Math.round(t),Math.round(n),Math.round(i))},__class__:Mt};var Pt=function(e,t){var n=this;this._hasGPU=new k(!0),this.gl=t,t.canvas.addEventListener("webglcontextlost",(function(e){e.preventDefault(),D.logger.warn("WebGL context lost",null),n._hasGPU.set__(!1)}),!1),t.canvas.addEventListener("webglcontextrestore",(function(e){D.logger.warn("WebGL context restored",null),n.init(),n._hasGPU.set__(!0)}),!1),e.resize.connect(mi(this,this.onResize)),this.init()};Pt.__name__="flambe.platform.html.WebGLRenderer",Pt.__interfaces__=[Je],Pt.prototype={get_type:function(){return Qt.WebGL},createTextureFromImage:function(e){if(this.gl.isContextLost())return null;var t=new Dt(this,e.width,e.height);return t.uploadImageData(e),t.createTexture(e.width,e.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(e,t){return this.gl.isContextLost()||Jt.fail(),null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var e=this.gl.canvas.width,t=this.gl.canvas.height;this.batcher.resizeBackbuffer(e,t),this.graphics.onResize(e,t)},init:function(){this.batcher=new Tt(this.gl),this.graphics=new Et(this.batcher,null),this.onResize()},__class__:Pt};var Rt=function(e,t,n){Fe.call(this,e,t,n)};Rt.__name__="flambe.platform.html.WebGLTexture",Rt.__super__=Fe,Rt.prototype=o(Fe.prototype,{__class__:Rt});var Dt=function(e,t,n){this._graphics=null,this.framebuffer=null,ke.call(this),this._renderer=e;var i=et.nextPowerOfTwo(t);this.width=2>i?2:i;i=et.nextPowerOfTwo(n);this.height=2>i?2:i;var a=e.gl;this.nativeTexture=a.createTexture(),e.batcher.bindTexture(this.nativeTexture),a.texParameteri(3553,10242,33071),a.texParameteri(3553,10243,33071),a.texParameteri(3553,10240,9729),a.texParameteri(3553,10241,9729)};Dt.__name__="flambe.platform.html.WebGLTextureRoot",Dt.__interfaces__=[it],Dt.drawBorder=function(e,t,n){var i=e.getContext("2d",null);i.drawImage(e,t-1,0,1,n,t,0,1,n),i.drawImage(e,0,n-1,t,1,0,n,t,1)},Dt.__super__=ke,Dt.prototype=o(ke.prototype,{createTexture:function(e,t){return new Rt(this,e,t)},uploadImageData:function(e){if(Jt.that(!this._disposed,"Asset cannot be used after being disposed"),this.width!=e.width||this.height!=e.height){var t=xt.createEmptyCanvas(this.width,this.height);t.getContext("2d",null).drawImage(e,0,0),Dt.drawBorder(t,e.width,e.height),e=t}this._renderer.batcher.bindTexture(this.nativeTexture);var n=this._renderer.gl;n.texImage2D(3553,0,6408,6408,5121,e)},copyFrom:function(e){this.nativeTexture=e.nativeTexture,this.framebuffer=e.framebuffer,this.width=e.width,this.height=e.height,this._graphics=e._graphics},onDisposed:function(){var e=this._renderer.batcher;e.deleteTexture(this),null!=this.framebuffer&&e.deleteFramebuffer(this),this.nativeTexture=null,this.framebuffer=null,this._graphics=null},__class__:Dt});var Bt=function(e,t,n){if(n=["#ifdef GL_ES","precision mediump float;","#endif"].join("\n")+"\n"+n,this._gl=e,this._program=e.createProgram(),e.attachShader(this._program,Bt.createShader(e,35633,t)),e.attachShader(this._program,Bt.createShader(e,35632,n)),e.linkProgram(this._program),e.useProgram(this._program),!e.getProgramParameter(this._program,35714)){var i=["log",e.getProgramInfoLog(this._program)];D.logger.error("Error linking shader program",i)}};Bt.__name__="flambe.platform.shader.ShaderGL",Bt.createShader=function(e,t,n){var i=e.createShader(t);if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,35713)){var a=35633==t?"vertex":"fragment",r=["log",e.getShaderInfoLog(i)];D.logger.error("Error compiling "+a+" shader",r)}return i},Bt.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){Jt.fail("abstract")},getAttribLocation:function(e){var t=this._gl.getAttribLocation(this._program,e);return Jt.that(t>=0,"Missing attribute",["name",e]),t},getUniformLocation:function(e){var t=this._gl.getUniformLocation(this._program,e);return Jt.that(null!=t,"Missing uniform",["name",e]),t},__class__:Bt};var Ft=function(e){Bt.call(this,e,["attribute highp vec2 a_pos;","attribute mediump vec2 a_uv;","attribute lowp float a_alpha;","varying mediump vec2 v_uv;","varying lowp float v_alpha;","void main (void) {","v_uv = a_uv;","v_alpha = a_alpha;","gl_Position = vec4(a_pos, 0, 1);","}"].join("\n"),["varying mediump vec2 v_uv;","varying lowp float v_alpha;","uniform lowp sampler2D u_texture;","uniform mediump vec4 u_region;","void main (void) {","gl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;","}"].join("\n")),this.a_pos=this.getAttribLocation("a_pos"),this.a_uv=this.getAttribLocation("a_uv"),this.a_alpha=this.getAttribLocation("a_alpha"),this.u_texture=this.getUniformLocation("u_texture"),this.u_region=this.getUniformLocation("u_region"),this.setTexture(0)};Ft.__name__="flambe.platform.shader.DrawPatternGL",Ft.__super__=Bt,Ft.prototype=o(Bt.prototype,{setTexture:function(e){this._gl.uniform1i(this.u_texture,e)},setRegion:function(e,t,n,i){this._gl.uniform4f(this.u_region,e,t,n,i)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos),this._gl.enableVertexAttribArray(this.a_uv),this._gl.enableVertexAttribArray(this.a_alpha);var e=Float32Array.BYTES_PER_ELEMENT,t=5*e;this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,t,0*e),this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,t,2*e),this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,t,4*e)},__class__:Ft});var It=function(e){Bt.call(this,e,["attribute highp vec2 a_pos;","attribute mediump vec2 a_uv;","attribute lowp float a_alpha;","varying mediump vec2 v_uv;","varying lowp float v_alpha;","void main (void) {","v_uv = a_uv;","v_alpha = a_alpha;","gl_Position = vec4(a_pos, 0, 1);","}"].join("\n"),["varying mediump vec2 v_uv;","varying lowp float v_alpha;","uniform lowp sampler2D u_texture;","void main (void) {","gl_FragColor = texture2D(u_texture, v_uv) * v_alpha;","}"].join("\n")),this.a_pos=this.getAttribLocation("a_pos"),this.a_uv=this.getAttribLocation("a_uv"),this.a_alpha=this.getAttribLocation("a_alpha"),this.u_texture=this.getUniformLocation("u_texture"),this.setTexture(0)};It.__name__="flambe.platform.shader.DrawTextureGL",It.__super__=Bt,It.prototype=o(Bt.prototype,{setTexture:function(e){this._gl.uniform1i(this.u_texture,e)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos),this._gl.enableVertexAttribArray(this.a_uv),this._gl.enableVertexAttribArray(this.a_alpha);var e=Float32Array.BYTES_PER_ELEMENT,t=5*e;this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,t,0*e),this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,t,2*e),this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,t,4*e)},__class__:It});var Lt=function(e){Bt.call(this,e,["attribute highp vec2 a_pos;","attribute lowp vec3 a_rgb;","attribute lowp float a_alpha;","varying lowp vec4 v_color;","void main (void) {","v_color = vec4(a_rgb*a_alpha, a_alpha);","gl_Position = vec4(a_pos, 0, 1);","}"].join("\n"),["varying lowp vec4 v_color;","void main (void) {","gl_FragColor = v_color;","}"].join("\n")),this.a_pos=this.getAttribLocation("a_pos"),this.a_rgb=this.getAttribLocation("a_rgb"),this.a_alpha=this.getAttribLocation("a_alpha")};Lt.__name__="flambe.platform.shader.FillRectGL",Lt.__super__=Bt,Lt.prototype=o(Bt.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos),this._gl.enableVertexAttribArray(this.a_rgb),this._gl.enableVertexAttribArray(this.a_alpha);var e=Float32Array.BYTES_PER_ELEMENT,t=6*e;this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,t,0*e),this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,t,2*e),this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,t,5*e)},__class__:Lt});var Nt=function(){this._transitor=null,v.call(this),this.scenes=[],this.occludedScenes=[],this._root=new w};Nt.__name__="flambe.scene.Director",Nt.__super__=v,Nt.prototype=o(v.prototype,{get_name:function(){return"Director_31"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();var e=0,t=this.scenes;while(e<t.length){var n=t[e];++e,n.dispose()}this.scenes=[],this.occludedScenes=[],this._root.dispose()},onUpdate:function(e){null!=this._transitor&&this._transitor.update(e)&&this.completeTransition()},get_topScene:function(){var e=this.scenes.length;return e>0?this.scenes[e-1]:null},show:function(e){var t=e._compMap["Scene_32"];null!=t&&t.shown.emit()},invalidateVisibility:function(){var e=this.scenes.length;while(e>0){var t=this.scenes[--e],n=t._compMap["Scene_32"];if(null==n||n.opaque)break}this.occludedScenes=this.scenes.length>0?this.scenes.slice(e,this.scenes.length-1):[];t=this.get_topScene();null!=t&&this.show(t)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},__class__:Nt});var Ot=function(e,t,n,i){this._from=e,this._to=t,this._transition=n,this._onComplete=i};Ot.__name__="flambe.scene._Director.Transitor",Ot.prototype={update:function(e){return this._transition.update(e)},complete:function(){this._transition.complete(),this._onComplete()},__class__:Ot};var Yt=function(e){null==e&&(e=!0),v.call(this),this.opaque=e,this.shown=new tn,this.hidden=new tn};Yt.__name__="flambe.scene.Scene",Yt.__super__=v,Yt.prototype=o(v.prototype,{get_name:function(){return"Scene_32"},__class__:Yt});var Xt=function(){};Xt.__name__="flambe.scene.Transition",Xt.prototype={update:function(e){return!0},complete:function(){},__class__:Xt};var Ut=function(){};Ut.__name__="flambe.script.Action",Ut.__isInterface__=!0,Ut.prototype={__class__:Ut};var Vt=function(e,t,n,i){this._value=e,this._to=t,this._seconds=n,this._easing=i};Vt.__name__="flambe.script.AnimateTo",Vt.__interfaces__=[Ut],Vt.prototype={update:function(e,t){if(null==this._tween&&(this._tween=new O(this._value._value,this._to,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(e)),this._value._behavior!=this._tween){var n=this._tween.elapsed-this._seconds;return this._tween=null,n>0?Math.max(0,e-n):0}return-1},__class__:Vt};var Kt=function(e){this._fn=e};Kt.__name__="flambe.script.CallFunction",Kt.__interfaces__=[Ut],Kt.prototype={update:function(e,t){return this._fn(),0},__class__:Kt};var Wt=function(e){this._duration=e,this._elapsed=0};Wt.__name__="flambe.script.Delay",Wt.__interfaces__=[Ut],Wt.prototype={update:function(e,t){if(this._elapsed+=e,this._elapsed>=this._duration){var n=this._elapsed-this._duration;return this._elapsed=0,e-n}return-1},__class__:Wt};var Gt=function(e){this._completedActions=[],this._runningActions=null!=e?e.slice():[]};Gt.__name__="flambe.script.Parallel",Gt.__interfaces__=[Ut],Gt.prototype={update:function(e,t){var n=!0,i=0,a=0,r=this._runningActions.length;while(a<r){var s=a++,o=this._runningActions[s];if(null!=o){var _=o.update(e,t);_>=0?(this._runningActions[s]=null,this._completedActions.push(o),_>i&&(i=_)):n=!1}}return n?(this._runningActions=this._completedActions,this._completedActions=[],i):-1},__class__:Gt};var Ht=function(e,t){null==t&&(t=-1),this._action=e,this._count=t,this._remaining=t};Ht.__name__="flambe.script.Repeat",Ht.__interfaces__=[Ut],Ht.prototype={update:function(e,t){if(0==this._count)return 0;var n=this._action.update(e,t);return this._count>0&&n>=0&&0==--this._remaining?(this._remaining=this._count,n):-1},__class__:Ht};var jt=function(){v.call(this),this.stopAll()};jt.__name__="flambe.script.Script",jt.__super__=v,jt.prototype=o(v.prototype,{get_name:function(){return"Script_27"},run:function(e){var t=new zt(e);return this._handles.push(t),t},stopAll:function(){this._handles=[]},onUpdate:function(e){var t=0;while(t<this._handles.length){var n=this._handles[t];n.removed||n.action.update(e,this.owner)>=0?this._handles.splice(t,1):++t}},__class__:jt});var zt=function(e){this.removed=!1,this.action=e};zt.__name__="flambe.script._Script.Handle",zt.__interfaces__=[g],zt.prototype={dispose:function(){this.removed=!0,this.action=null},__class__:zt};var qt=function(e){this._idx=0,this._runningActions=null!=e?e.slice():[]};qt.__name__="flambe.script.Sequence",qt.__interfaces__=[Ut],qt.prototype={update:function(e,t){var n=0;while(1){var i=this._runningActions[this._idx];if(null!=i){var a=i.update(e-n,t);if(!(a>=0))return-1;n+=a}if(++this._idx,this._idx>=this._runningActions.length){this._idx=0;break}if(n>e)return-1}return n},__class__:qt};var Qt=s["flambe.subsystem.RendererType"]={__ename__:!0,__constructs__:null,Stage3D:{_hx_name:"Stage3D",_hx_index:0,__enum__:"flambe.subsystem.RendererType",toString:r},WebGL:{_hx_name:"WebGL",_hx_index:1,__enum__:"flambe.subsystem.RendererType",toString:r},Canvas:{_hx_name:"Canvas",_hx_index:2,__enum__:"flambe.subsystem.RendererType",toString:r}};Qt.__constructs__=[Qt.Stage3D,Qt.WebGL,Qt.Canvas];var Jt=function(){};Jt.__name__="flambe.util.Assert",Jt.that=function(e,t,n){e||Jt.fail(t,n)},Jt.fail=function(e,t){var n="Assertion failed!";throw null!=e&&(n="Assertion failed! "+e),null!=t&&(n=an.withFields(n,t)),$n.thrown(n)};var Zt=function(){};Zt.__name__="flambe.util.BitSets",Zt.set=function(e,t,n){return n?e|t:e&~t};var $t=s["flambe.util.LogLevel"]={__ename__:!0,__constructs__:null,Info:{_hx_name:"Info",_hx_index:0,__enum__:"flambe.util.LogLevel",toString:r},Warn:{_hx_name:"Warn",_hx_index:1,__enum__:"flambe.util.LogLevel",toString:r},Error:{_hx_name:"Error",_hx_index:2,__enum__:"flambe.util.LogLevel",toString:r}};$t.__constructs__=[$t.Info,$t.Warn,$t.Error];var en=function(){this.success=new E,this.error=new E,this.progressChanged=new tn,this.hasResult=!1,this._progress=0,this._total=0};en.__name__="flambe.util.Promise",en.prototype={set_result:function(e){if(this.hasResult)throw $n.thrown("Promise result already assigned");return this._result=e,this.hasResult=!0,this.success.emit(e),e},get:function(e){return this.hasResult?(e(this._result),null):this.success.connect(e).once()},set_progress:function(e){return this._progress!=e&&(this._progress=e,this.progressChanged.emit()),e},set_total:function(e){return this._total!=e&&(this._total=e,this.progressChanged.emit()),e},__class__:en};var tn=function(e){A.call(this,e)};tn.__name__="flambe.util.Signal0",tn.__super__=A,tn.prototype=o(A.prototype,{connect:function(e,t){return null==t&&(t=!1),this.connectImpl(e,t)},emit:function(){var e=this;this._head==A.DISPATCHING_SENTINEL?this.defer((function(){e.emitImpl()})):this.emitImpl()},emitImpl:function(){var e=this.willEmit(),t=e;while(null!=t)t._listener(),t.stayInList||t.dispose(),t=t._next;this.didEmit(e)},__class__:tn});var nn=function(e){this.next=null,this.fn=e};nn.__name__="flambe.util._SignalBase.Task",nn.prototype={__class__:nn};var an=function(){};an.__name__="flambe.util.Strings",an.getFileExtension=function(e){var t=e.lastIndexOf(".");return t>0?h.substr(e,t+1,null):null},an.removeFileExtension=function(e){var t=e.lastIndexOf(".");return t>0?h.substr(e,0,t):e},an.getUrlExtension=function(e){var t=e.lastIndexOf("?");t>=0&&(e=h.substr(e,0,t));var n=e.lastIndexOf("/");return n>=0&&(e=h.substr(e,n+1,null)),an.getFileExtension(e)},an.joinPath=function(e,t){return e.length>0&&47!=e.charCodeAt(e.length-1)&&(e+="/"),e+t},an.withFields=function(e,t){var n=t.length;if(n>0){e+=e.length>0?" [":"[";var i=0;while(i<n){i>0&&(e+=", ");var a=t[i],r=t[i+1];if(ui.__instanceof(r,Error)){var s=r.stack;null!=s&&(r=s)}e+=a+"="+c.string(r),i+=2}e+="]"}return e};var rn=function(e,t,n,i){v.call(this),this.click=new tn,this.init(e,t,n,i)};rn.__name__="game.Button",rn.__super__=v,rn.prototype=o(v.prototype,{get_name:function(){return"Button_4"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},init:function(e,t,n,i){var a=this;this._root=new w,this._disposer=new b;var r=new se(e.getTexture(t)).centerAnchor().setXY(n,i);this._root.add(r),sn.addStates(r,(function(){a.click.emit()}),this._disposer)},__class__:rn});var sn=function(){};sn.__name__="game.ButtonUtil",sn.addStates=function(e,t,n){null==n&&(n=new b);var i=!1;return n.add(e.get_pointerIn().connect((function(t){e.setScale(1.05)}))),n.add(e.get_pointerOut().connect((function(t){e.setScale(1)}))),n.add(e.get_pointerDown().connect((function(t){e.setScale(.95),i=!0}))),P.assertCalledInit(),n.add(P._platform.getPointer().up.connect((function(n){e.setScale(1),i&&n.hit==e&&(i=!1,t())}))),n};var on=function(e,t){q.call(this),this._width=e,this._height=t,this.scissor=new Se(0,0,this._width,this._height)};on.__name__="game.Container",on.getSize=n["game"]["Container"]["getSize"]=function(e,t,n,i){var a=t/e,r=i/n,s=0,o=0;return r<a?(o=i,s=i/a):(s=n,o=n*a),on._scratch.scale=s/e,on._scratch.x=(n-s)/2,on._scratch.y=(i-o)/2,on._scratch},on.__super__=q,on.prototype=o(q.prototype,{getNaturalWidth:function(){return this._width},getNaturalHeight:function(){return this._height},draw:function(e){e.fillRect(13421772,0,0,this._width,this._height)},setSize:function(e,t){var n=on.getSize(this._width,this._height,e,t);return this.setScale(n.scale),this.setXY(n.x,n.y),this},__class__:on});var _n=function(){v.call(this),this.init()};_n.__name__="game.DrinkPercent",_n.__super__=v,_n.prototype=o(v.prototype,{get_name:function(){return"DrinkPercent_35"},get_percent:function(){return this._percent},set_percent:function(e){return this._percent=ye.clamp(e,0,1)},reset:function(){this._percent=1},init:function(){this._percent=1},__class__:_n});var hn=function(e,t){v.call(this),this.init(e,t)};hn.__name__="game.Liquid",hn.__super__=v,hn.prototype=o(v.prototype,{get_name:function(){return"Liquid_7"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},setXY:function(e,t,n,i){var a=this._root._compMap["Sprite_2"],r=a instanceof Q?a:null,s=3.141592653589793*n/180,o=i*Math.cos(s-1.5708)+e,_=i*Math.sin(s-1.5708)+t;r.setXY(o,_),r.angle.set__(180*dn.reflectAngle(s,!0)/3.141592653589793)},set_visible:function(e){var t=this._root._compMap["Sprite_2"];return(t instanceof Q?t:null).set_visible(e)},init:function(e,t){this._root=new w;var n=new j(e,t+"/puke/puke");this._root.add(new Q(n).setRotation(90))},__class__:hn});var ln=function(e,t,n){v.call(this),this.init(e,t,n)};ln.__name__="game.Loader",ln.__super__=v,ln.prototype=o(v.prototype,{get_name:function(){return"Loader_43"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},init:function(e,t,n){this._disposer=new b,this._root=new w,this._root.add(new se(e.getTexture("loadingBack"))).add(new un(e,t,n))},__class__:ln});var un=function(e,t,n){v.call(this),this.init(e,t,n)};un.__name__="game.LoaderBall",un.__super__=v,un.prototype=o(v.prototype,{get_name:function(){return"LoaderBall_42"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e,t,n){this._root=new w;var i=(new q).setXY(898,786);this._root.add(i);var a=new se(e.getTexture("ballLineWater")),r=new se(e.getTexture("ball")).centerAnchor().setXY(75,-250);this._root.addChild((new w).add(r)),this._root.addChild((new w).add(a)),r.rotation.set_behavior(new N(-10,10,4)),i.x.set_behavior(new N(848,948,4)),i.y.set_behavior(new N(786,796,2))},__class__:un});var cn=function(){};cn.__name__="game.Main",cn.main=function(){P.init()},cn.start=n["game"]["Main"]["start"]=function(e,t){var n=new on(e,t);n.set_visible(!1),P.root.add(n),P.root.add(new _n),P.root.add(new mn),P.assertCalledInit(),P._platform.getStage().resize.connect((function(){var e=n;P.assertCalledInit();var t=P._platform.getStage().get_width();P.assertCalledInit(),e.setSize(t,P._platform.getStage().get_height())})),P.assertCalledInit(),P._platform.getStage().resize.emit();var i=W.fromAssets("bootstrap");P.assertCalledInit();var a=e,r=t,s=function(e){cn.onDevRunner(a,r,e)};P._platform.loadAssetPack(i).success.connect(s).once()},cn.onDevRunner=function(e,t,n){var i=new ln(n,e,t);P.root.add(i);var a=P.root._compMap["Sprite_2"];(a instanceof on?a:null).set_visible(!0);var r=W.fromAssets("main");P.assertCalledInit(),P._platform.loadAssetPack(r).success.connect((function(n){i.dispose(),P.root.add(new zn(n,e,t))})).once()};var dn=function(){};dn.__name__="game.MathUtil",dn.solveTriangle=function(e,t,n){var i=dn.solveAngle(t,n,e),a=dn.solveAngle(n,e,t),r=dn.solveAngle(e,t,n);return null!=i&&null!=a&&null!=r?{a:i,b:a,c:r}:null},dn.solveAngle=function(e,t,n){var i=(e*e+t*t-n*n)/(2*e*t);return i>=-1&&.9999999>=i?Math.acos(i):1>=i?Math.sqrt((n*n-(e-t)*(e-t))/(e*t)):null},dn.reflectAngle=function(e,t){var n=Math.cos(e),i=Math.sin(e);return t?Math.atan2(i,-n):Math.atan2(-i,n)},dn.normDegrees=function(e){return(e%360+360)%360},dn.quadrant=function(e){var t=dn.normDegrees(180*e/3.141592653589793);return t>270?3:t>180?2:t>90?1:0};var pn=function(e,t,n,i,a){v.call(this),this.init(e,t,n,i,a)};pn.__name__="game.Meter",pn.__super__=v,pn.prototype=o(v.prototype,{get_name:function(){return"Meter_3"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},show:function(e){return e?this._root._compMap["Sprite_2"].anchorY.set__(0):this._root._compMap["Sprite_2"].anchorY.animateTo(0,1,L.cubeOut),this},setFill:function(e){var t=ye.clamp(e,0,1),n=this._fill.getNaturalHeight()-t*this._fill.getNaturalHeight();return this._fill.scissor.y=n,this},init:function(e,t,n,i,a){this._root=(new w).add((new q).setXY(t,n)),this._root._compMap["Sprite_2"].anchorY.set__(1e3);var r=(new w).add(new se(e.getTexture("meterBack"))),s=(new w).add(this._fill=new se(e.getTexture(a))),o=this._fill.getNaturalWidth(),_=this._fill.getNaturalHeight();this._fill.scissor=new Se(0,0,o,_);var h=(new w).add(new se(e.getTexture(i)).setXY(-26,0));this._root.addChild(r).addChild(s).addChild(h)},__class__:pn});var mn=function(){v.call(this),this.init()};mn.__name__="game.OverallScore",mn.__super__=v,mn.prototype=o(v.prototype,{get_name:function(){return"OverallScore_36"},init:function(){this.score=new k(0)},__class__:mn});var fn=function(e,t,n){v.call(this),this.init(e,t,n)};fn.__name__="game.Points",fn.__super__=v,fn.prototype=o(v.prototype,{get_name:function(){return"Points_1"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},setScore:function(e){e<10?this._text.set_text("00"+e):e<100?this._text.set_text("0"+e):this._text.set_text(""+e)},init:function(e,t,n){var i=new ee(e,"testfont");this._text=new le(i,"000"),this._root=(new w).add(new se(e.getTexture("points")).setXY(t,n)).addChild((new w).add(this._text.setScale(1.7).setXY(37,0)))},__class__:fn});var gn=function(e,t,n,i,a,r,s,o){q.call(this),this._percent=1,this._r1=e,this._g1=t,this._b1=n,this._r2=i,this._g2=a,this._b2=r,this._width=s,this._height=o};gn.__name__="game.RGBSprite",gn.__super__=q,gn.prototype=o(q.prototype,{draw:function(e){var t=(this.r()<<16)+(this.g()<<8)+this.b();e.fillRect(t,0,0,this._width,this._height)},getNaturalWidth:function(){return this._width},getNaturalHeight:function(){return this._height},setPercent:function(e){this._percent=ye.clamp(e,0,1)},r:function(){var e=this._percent,t=1-e;return Math.round(e*this._r1+t*this._r2)},g:function(){var e=this._percent,t=1-e;return Math.round(e*this._g1+t*this._g2)},b:function(){var e=this._percent,t=1-e;return Math.round(e*this._b1+t*this._b2)},__class__:gn});var vn=function(){};vn.__name__="game.SpriteUtil",vn.localXY=function(e,t,n){var i=e.getViewMatrix();return i.inverseTransform(t,n,vn.SPRITE_SCRATCH)||vn.SPRITE_SCRATCH.set(0,0),vn.SPRITE_SCRATCH};var bn=function(){};bn.__name__="game.cafe.ArmUtil",bn.wave=function(e,t,n,i,a,r){bn.calcAngles(200,-430,a,r);var s=a.top,o=a.bottom;bn.calcAngles(200,-230,a,r);var _=a.top,h=a.bottom;n.rotation.set__(s),i.rotation.set__(o),t.add(new jt),t.add(new jt)._compMap["Script_27"].run(new qt([new Ht(new qt([new Gt([new Vt(n.rotation,_,.24,L.cubeIn),new Vt(i.rotation,h,.24,L.cubeIn)]),new Gt([new Vt(n.rotation,s,.3,L.cubeIn),new Vt(i.rotation,o,.3,L.cubeIn)])]),3),new Wt(.5),new Kt(e)]))},bn.slam=function(e,t,n,i,a,r){bn.calcAngles(300,230,a,r);var s=a.top,o=a.bottom;bn.calcAngles(300,-730,a,r);var _=a.top,h=a.bottom;n.rotation.set__(s),i.rotation.set__(o),t.add(new jt),t.add(new jt)._compMap["Script_27"].run(new qt([new Gt([new Vt(n.rotation,_,.5,L.cubeIn),new Vt(i.rotation,h,.5,L.cubeIn)]),new Gt([new Vt(n.rotation,s,.135,L.bounceOut),new Vt(i.rotation,o,.135,L.bounceOut)]),new Wt(.5),new Kt(e)]))},bn.calcAngles=function(e,t,n,i){bn._scratchLocal.x=e,bn._scratchLocal.y=t;var a=bn.getAngle(bn._scratchLocal.x,bn._scratchLocal.y),r=bn.hasReflectAngle(dn.quadrant(a),i),s=r?-bn._scratchLocal.y:bn._scratchLocal.y,o=bn.getAngle(bn._scratchLocal.x,s),_=bn._scratchLocal.distanceTo(0,0),h=549-_;if(n.canReach=h>0,n.canReach){var l=dn.solveTriangle(283,266,_);if(null!=l){var u=o-1.5708-l.a,c=l.a+l.b;r?(n.top=180*dn.reflectAngle(u,!0)/3.141592653589793,n.bottom=180*dn.reflectAngle(c,!1)/3.141592653589793):(n.top=180*u/3.141592653589793,n.bottom=180*c/3.141592653589793)}}else n.top=180*a/3.141592653589793-90,n.bottom=0},bn.getAngle=function(e,t){return Math.atan2(t,e)},bn.hasReflectAngle=function(e,t){var n=!1;return t?3!=e&&2!=e||(n=!0):0!=e&&1!=e||(n=!0),n};var wn=function(e){v.call(this),this.init(e)};wn.__name__="game.cafe.Background",wn.__super__=v,wn.prototype=o(v.prototype,{get_name:function(){return"Background_34"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},nextState:function(){var e=this._title._compMap["Sprite_2"];e.y.animateTo(-600,2,L.cubeOut),e.x.animateTo(1400,2,L.cubeOut),e.rotation.animateTo(-20,2,L.cubeOut),this._flamingo.anchorX.animateTo(-140,2,L.cubeOut),this._flamingo.anchorY.animateTo(60,2,L.cubeOut)},init:function(e){this._root=new w,this._root.add(new se(e.getTexture("cafe/mainBack")));var t=e.getTexture("cafe/title");this._title=(new w).add(new se(t).centerAnchor().setXY(390+t.get_width()/2,179+t.get_height()/2)),this._title._compMap["Sprite_2"].rotation.set_behavior(new N(-3,3,5)),this._flamingo=new se(e.getTexture("cafe/flamingo")).setXY(1131,594),this._flamingo.x.set_behavior(new N(1101,1161,5)),this._flamingo.rotation.set_behavior(new N(-5,5,10));var n=new se(e.getTexture("cloud")).setXY(0,54),i=new se(e.getTexture("cloud")).setXY(1039,168),a=new se(e.getTexture("cloud")).setXY(1340,51);n.x.set_behavior(new N(-30,30,5)),n.y.set_behavior(new N(39,69,10)),i.x.set_behavior(new N(1009,1069,5)),i.y.set_behavior(new N(153,183,10)),a.x.set_behavior(new N(1310,1370,5)),a.y.set_behavior(new N(36,66,10)),this._root.addChild((new w).add(n)).addChild((new w).add(i)).addChild((new w).add(a)).add(new An(e,300,90)).addChild(this._title).addChild((new w).add(this._flamingo))},__class__:wn});var yn=function(e,t){this.drink=null,v.call(this),this.liquid=t,this.init(e)};yn.__name__="game.cafe.Bar",yn.__super__=v,yn.prototype=o(v.prototype,{get_name:function(){return"Bar_28"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},onUpdate:function(e){if(P.assertCalledInit(),P._platform.getPointer().isDown()){var t=this._root._compMap["Sprite_2"];P.assertCalledInit();var n=P._platform.getPointer().get_x();P.assertCalledInit();var i=vn.localXY(t,n,P._platform.getPointer().get_y()),a=0,r=this._slots;while(a<r.length){var s=r[a];++a;var o=s.isHit(i.x,i.y);if(o)switch(s.state._value._hx_index){case 0:break;case 1:this.drink!=s&&(null!=this.drink&&this.drink.toss(),this.drink=s,this.drink.grab(i.x,i.y),this.liquid.set_visible(!0),this.liquid.setXY(i.x,i.y,this.drink.get_rotation(),230));break;case 2:break;case 3:s.moveTo(i.x,i.y),this.liquid.setXY(i.x,i.y,this.drink.get_rotation(),230);break;case 4:break}else null!=this.drink&&this.drink.moveTo(i.x,i.y)}}},init:function(e){var t=this;this._root=(new w).add(new q),this._disposer=new b,this._slots=[];var n=[{x:406,y:985},{x:573,y:1013},{x:810,y:995},{x:1200,y:1027},{x:1516,y:1007}],i=0,a=n.length;while(i<a){var r=i++,s=n[r],o=new Sn(e,s.x,s.y,this),_=(new w).add(o);o.turnOff(),this._slots.push(o),this._root.addChild(_)}var h=this._disposer;P.assertCalledInit(),h.add(P._platform.getPointer().up.connect((function(e){null!=t.drink&&(t.drink.toss(),t.liquid.set_visible(!1),t.drink=null)}))),this._slots[0].show(!0),this._slots[1].show(!0),this._slots[2].show(!0),this._slots[3].show(!0),this._slots[4].show(!0)},__class__:yn});var xn=s["game.cafe.BarDrinkState"]={__ename__:!0,__constructs__:null,Destroyed:(a=function(e){return{_hx_index:0,ref:e,__enum__:"game.cafe.BarDrinkState",toString:r}},a._hx_name="Destroyed",a.__params__=["ref"],a),Idle:{_hx_name:"Idle",_hx_index:1,__enum__:"game.cafe.BarDrinkState",toString:r},Sliding:{_hx_name:"Sliding",_hx_index:2,__enum__:"game.cafe.BarDrinkState",toString:r},Active:(a=function(e){return{_hx_index:3,ref:e,__enum__:"game.cafe.BarDrinkState",toString:r}},a._hx_name="Active",a.__params__=["ref"],a),Off:{_hx_name:"Off",_hx_index:4,__enum__:"game.cafe.BarDrinkState",toString:r}};xn.__constructs__=[xn.Destroyed,xn.Idle,xn.Sliding,xn.Active,xn.Off];var Sn=function(e,t,n,i){v.call(this),this._x=t,this._y=n,this._bar=i,this.state=new k(xn.Off),this.init(e)};Sn.__name__="game.cafe.BarDrink",Sn.__super__=v,Sn.prototype=o(v.prototype,{get_name:function(){return"BarDrink_29"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},onUpdate:function(e){var t=this.state._value;switch(t._hx_index){case 0:var n=t.ref;n.time+=e,n.time>=Sn.DESTROYED_DURATION&&this.show(!1);break;case 1:break;case 2:break;case 3:n=t.ref;n.time+=e,n.time>=Sn.ACTIVE_DURATION&&(this._bar.drink=null,this._bar.liquid.set_visible(!1),this.toss());break;case 4:break}},isHit:function(e,t){var n=this._root._compMap["Sprite_2"],i=n.x._value-n.anchorX._value,a=n.y._value-n.anchorY._value,r=i+n.getNaturalWidth(),s=a+n.getNaturalHeight();return i<=e&&e<=r&&a<=t&&t<=s},show:function(e){var t=this,n=this._root._compMap["Sprite_2"],i=n.x._value<960;n.x.set__(i?-2e3:2e3),n.rotation.set__(0),n.y.set__(this._y),this.state.set__(xn.Sliding),e?(this.state.set__(xn.Idle),n.x.set__(this._x)):(this._root.add(new jt),this._root.add(new jt)._compMap["Script_27"].run(new qt([new Vt(n.x,this._x,.666,L.cubeOut),new Kt((function(){t.state.set__(xn.Idle)}))]))),n.set_visible(!0)},turnOff:function(){this.state.set__(xn.Off);var e=this._root._compMap["Sprite_2"];e.set_visible(!1)},grab:function(e,t){this.state.set__(xn.Active({time:0}));var n=this._root._compMap["Sprite_2"];n.rotation.set_behavior(new N(205,155,1)),this.moveTo(e,t)},moveTo:function(e,t){var n=this._root._compMap["Sprite_2"];n.x.set__(e),n.y.set__(t)},toss:function(){this.state.set__(xn.Destroyed({time:0}));var e=this._root._compMap["Sprite_2"],t=Math.random()>.5,n=t?-500:500,i=t?-180:180;e.x.animateTo(e.x._value+n,.3333,L.sineIn),e.y.animateTo(-300,.3333,L.sineOut),e.rotation.animateTo(i,.3333,L.sineOut)},get_rotation:function(){var e=this._root._compMap["Sprite_2"];return e.rotation._value},init:function(e){this._root=new w;var t=e.getTexture("cafe/beerStar"),n=t.get_width()/2,i=t.get_height()-50;this._root.add(new se(t).setAnchor(n,i).setXY(this._x,this._y))},__class__:Sn});var kn=function(e,t){v.call(this),this.init(e,t)};kn.__name__="game.cafe.BarTable",kn.__super__=v,kn.prototype=o(v.prototype,{get_name:function(){return"BarTable_24"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e,t){this._root=new w;var n=e.getTexture("cafe/table");this._root.addChild((new w).add(new se(n).setXY(-3,t-n.get_height())))},__class__:kn});var Cn=function(e,t,n){this._rotation=new M(0),this._anchorY=new M(0),this._anchorX=new M(0),this._isGameplay=!1,this._elapsed=0,v.call(this),this.init(e,t,n)};Cn.__name__="game.cafe.CafeGame",Cn.__super__=v,Cn.prototype=o(v.prototype,{get_name:function(){return"CafeGame_20"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},onUpdate:function(e){this._anchorX.update(e),this._anchorY.update(e),this._rotation.update(e),this._isGameplay&&(this._elapsed+=e,this._elapsed>5&&(this._elapsed=0,Math.random()>.5?this._thirstyArms.wave():this._thirstyArms.slam()))},init:function(e,t,n){var i=this;this._anchorX.set__(1900),this._disposer=new b,this._root=new w,this._meterTime=(new w).add(new pn(e,100,180,"timeFront","timeMid").setFill(.4)),this._meterDrink=(new w).add(new pn(e,1760,180,"drinkFront","drinkMid")),this._root.add(new q).add(new wn(e)).addChild((new w).add(this._playButton=new rn(e,"cafe/playButton",t/2,780))).addChild((new w).add(this._thirstyPerson=new Dn(e,t,n))).add(new kn(e,n)).addChild((new w).add(this._thirstyArms=new Pn(e,t,n))).add(this._liquid=new hn(e,"cafe")).add(this._barDrinks=new yn(e,this._liquid)).addChild((new w).add(this._homeButton=new rn(e,"homeButton",t-121,90))).addChild(this._meterTime).addChild(this._meterDrink),this._thirstyPerson.bindTo(this._anchorX,this._anchorY,this._rotation),this._thirstyArms.bindTo(this._anchorX,this._anchorY,this._rotation),this._disposer.add(this._homeButton.click.connect((function(){i.dispose(),P.root.add(new Cn(e,t,n))}))),this._disposer.add(this._playButton.click.connect(mi(this,this.nextState)).once())},nextState:function(){var e=this;this._root._compMap["Background_34"].nextState(),this._anchorY.set_behavior(new N(5,0,3)),this._isGameplay=!0,this._playButton.dispose(),this._meterTime._compMap["Meter_3"].show(!1),this._meterDrink._compMap["Meter_3"].show(!1),this._root.add(new jt),this._root.add(new jt)._compMap["Script_27"].run(new qt([new Vt(this._anchorX,-200,1,L.cubeOut),new Kt((function(){e._anchorX.set_behavior(new N(-200,200,2))}))]))},__class__:Cn});var An=function(e,t,n){v.call(this),this.init(e,t,n)};An.__name__="game.cafe.CafeSun",An.__super__=v,An.prototype=o(v.prototype,{get_name:function(){return"CafeSun_17"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e,t,n){this._root=new w,this._root.add((new q).setXY(t,n)).add(new Tn(e))},__class__:An});var Tn=function(e){v.call(this),this.init(e)};Tn.__name__="game.cafe.BackgroundSun",Tn.__super__=v,Tn.prototype=o(v.prototype,{get_name:function(){return"BackgroundSun_16"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},onUpdate:function(e){var t=this._stripes.rotation;t.set__(t._value+20*e)},init:function(e){this._root=new w,this._root.add(new q),this._root._compMap["Sprite_2"].anchorX.set_behavior(new N(-20,20,5)),this._root._compMap["Sprite_2"].anchorY.set_behavior(new N(20,0,2.5)),this._root.addChild((new w).add(this._stripes=new se(e.getTexture("cafe/sun/sunStripes")).centerAnchor())).addChild((new w).add(this._sun=new se(e.getTexture("cafe/sun/sun")).centerAnchor())).addChild((new w).add(new se(e.getTexture("cafe/sun/ear")).setXY(-125,-35))).addChild((new w).add(new Mn(e,-14,-50))).addChild((new w).add(new Mn(e,72,-50))).add(new En(e))},__class__:Tn});var En=function(e){v.call(this),this.init(e)};En.__name__="game.cafe.BackgroundSunSmile",En.__super__=v,En.prototype=o(v.prototype,{get_name:function(){return"BackgroundSunSmile_15"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e){this._root=new w,this._root.addChild((new w).add(new se(e.getTexture("cafe/sun/mouthSmile")).setXY(10,55)))},__class__:En});var Mn=function(e,t,n){v.call(this),this.init(e,t,n)};Mn.__name__="game.cafe.BackgroundSunEye",Mn.__super__=v,Mn.prototype=o(v.prototype,{get_name:function(){return"BackgroundSunEye_14"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e,t,n){this._root=(new w).add((new q).setXY(t,n));var i=e.getTexture("cafe/sun/eye");this._root.addChild((new w).add(new Z(16047817,i.get_width()-4,i.get_height()-4).setXY(2,2))),this._root.addChild((new w).add(this._pupil=new se(e.getTexture("cafe/sun/eyePupil")).setXY(38,70).centerAnchor())),this._root.addChild((new w).add(new se(i))),this._root.addChild((new w).add(this._brow=new se(e.getTexture("cafe/sun/eyebrow")).setXY(36,10).centerAnchor()))},__class__:Mn});var Pn=function(e,t,n){v.call(this),this.init(e,t,n)};Pn.__name__="game.cafe.ThirstyArms",Pn.__super__=v,Pn.prototype=o(v.prototype,{get_name:function(){return"ThirstyArms_26"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},bindTo:function(e,t,n){this._root._compMap["Sprite_2"].anchorX.set_behavior(new I(e,null)),this._root._compMap["Sprite_2"].anchorY.set_behavior(new I(t,null)),this._root._compMap["Sprite_2"].rotation.set_behavior(new I(n,null))},wave:function(){return this._right._compMap["ThirstyArm_25"].wave(),this},slam:function(){return this._right._compMap["ThirstyArm_25"].slam(),this},init:function(e,t,n){this._root=(new w).add((new q).setXY(t/2,n-420)),this._left=(new w).add(new Rn(e,-220,180,!1)),this._right=(new w).add(new Rn(e,240,180,!0)),this._root.addChild(this._right).addChild(this._left)},__class__:Pn});var Rn=function(e,t,n,i){this._angles={top:0,bottom:0,canReach:!1},this._idleAnim=new M(0),this._isDown=!1,this._viewY=0,this._viewX=0,this.isStale=!1,v.call(this),this._isFlipped=i,this.init(e,t,n)};Rn.__name__="game.cafe.ThirstyArm",Rn.__super__=v,Rn.prototype=o(v.prototype,{get_name:function(){return"ThirstyArm_25"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},onUpdate:function(e){this._isDown?this.reaching():(this._idleAnim.update(e),this.idleing())},wave:function(){var e=this;this.isStale=!0;var t=this._upper._compMap["Sprite_2"],n=this._lower._compMap["Sprite_2"];return bn.wave((function(){e.isStale=!1}),this._root,t,n,this._angles,this._isFlipped),this},slam:function(){var e=this;this.isStale=!0;var t=this._upper._compMap["Sprite_2"],n=this._lower._compMap["Sprite_2"];return bn.slam((function(){e.isStale=!1}),this._root,t,n,this._angles,this._isFlipped),this},reaching:function(){if(!this.isStale){var e=this._root._compMap["Sprite_2"],t=this._upper._compMap["Sprite_2"],n=this._lower._compMap["Sprite_2"],i=vn.localXY(e,this._viewX,this._viewY);bn.calcAngles(i.x,i.y,this._angles,this._isFlipped),t.setRotation(this._angles.top),n.setRotation(this._angles.bottom)}},idleing:function(){var e=this._upper._compMap["Sprite_2"],t=this._lower._compMap["Sprite_2"];bn.calcAngles(0,this._idleAnim._value,this._angles,this._isFlipped),e.setRotation(this._angles.top),t.setRotation(this._angles.bottom)},init:function(e,t,n){var i=this;if(this._disposer=new b,this._root=(new w).add((new q).setXY(t,n)),this._upper=(new w).add(new se(e.getTexture("cafe/body/armTop")).setAnchor(46.5,0)),this._lower=(new w).add(new se(e.getTexture("cafe/body/armBottom")).setXY(46.5,281).setAnchor(39.5,30)),this._hand=(new w).add((new q).setXY(39.5,298)),this._hand.addChild((new w).add(new se(e.getTexture("cafe/body/hand")).setAnchor(52,80))),this._idleAnim.set_behavior(new N(-500,-400,.5)),this._root.addChild(this._upper),this._upper.addChild(this._lower),this._lower.addChild(this._hand),this._lower.addChild(this._elbowPoint=(new w).add(new q)),!this._isFlipped){var a=this._disposer;P.assertCalledInit(),a.add(P._platform.getPointer().down.connect((function(e){i._viewX=e.viewX,i._viewY=e.viewY,i._isDown=!0})));a=this._disposer;P.assertCalledInit(),a.add(P._platform.getPointer().move.connect((function(e){i._isDown&&(i._viewX=e.viewX,i._viewY=e.viewY)})));a=this._disposer;P.assertCalledInit(),a.add(P._platform.getPointer().up.connect((function(e){i._isDown&&(i._isDown=!1,i._viewX=e.viewX,i._viewY=e.viewY)})))}},__class__:Rn});var Dn=function(e,t,n){v.call(this),this.init(e,t,n)};Dn.__name__="game.cafe.ThirstyPerson",Dn.__super__=v,Dn.prototype=o(v.prototype,{get_name:function(){return"ThirstyPerson_23"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},bindTo:function(e,t,n){this._root._compMap["Sprite_2"].anchorX.set_behavior(new I(e,null)),this._root._compMap["Sprite_2"].anchorY.set_behavior(new I(t,null)),this._root._compMap["Sprite_2"].rotation.set_behavior(new I(n,null))},init:function(e,t,n){this._root=(new w).add((new q).setXY(t/2,860)),this._torso=(new w).add(new Fn(e)),this._head=(new w).add(new Bn(e)),this._root.addChild(this._torso).addChild(this._head)},__class__:Dn});var Bn=function(e){v.call(this),this.init(e)};Bn.__name__="game.cafe.ThirstyPersonHead",Bn.__super__=v,Bn.prototype=o(v.prototype,{get_name:function(){return"ThirstyPersonHead_22"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e){this._root=(new w).add(new q),this._head=(new w).add(new se(e.getTexture("cafe/body/head")).setXY(0,-275).centerAnchor()),this._root.addChild(this._head),this._root._compMap["Sprite_2"].anchorX.set_behavior(new N(-2,2,2)),this._root._compMap["Sprite_2"].anchorY.set_behavior(new N(0,10,3)),this._root._compMap["Sprite_2"].rotation.set_behavior(new N(-5,5,5))},__class__:Bn});var Fn=function(e){v.call(this),this.init(e)};Fn.__name__="game.cafe.ThirstyPersonTorso",Fn.__super__=v,Fn.prototype=o(v.prototype,{get_name:function(){return"ThirstyPersonTorso_21"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e){this._root=(new w).add(new q),this._torso=(new w).add(new se(e.getTexture("cafe/body/body")).centerAnchor()),this._root.addChild(this._torso)},__class__:Fn});var In=function(e,t,n){v.call(this),this.init(e,t,n)};In.__name__="game.runner.Bush",In.__super__=v,In.prototype=o(v.prototype,{get_name:function(){return"Bush_37"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e,t,n){this._root=new w,this._root.add(new se(e.getTexture("runner/bush")).setXY(t,n)).addChild((new w).add(this._berry1=new se(e.getTexture("runner/bushBerry")).centerAnchor().setXY(220,98))).addChild((new w).add(this._berry2=new se(e.getTexture("runner/bushBerry")).centerAnchor().setXY(313,78)))},__class__:In});var Ln=function(){v.call(this),this.state=new k(Nn.Idle),this.init()};Ln.__name__="game.runner.ControlDesktop",Ln.__super__=v,Ln.prototype=o(v.prototype,{get_name:function(){return"ControlDesktop_5"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},onkeyUp:function(e){this.state.set__(Nn.Idle)},onkeyDown:function(e){switch(e.key._hx_index){case 68:this.state.set__(Nn.Up);break;case 69:this.state.set__(Nn.Right);break;case 70:this.state.set__(Nn.Down);break;case 96:this.state.set__(Nn.Space);break;default:}},init:function(){this._root=new w,this._disposer=new b;var e=this._disposer;P.assertCalledInit(),e.add(P._platform.getKeyboard().down.connect(mi(this,this.onkeyDown)));e=this._disposer;P.assertCalledInit(),e.add(P._platform.getKeyboard().up.connect(mi(this,this.onkeyUp)))},__class__:Ln});var Nn=s["game.runner.ControlState"]={__ename__:!0,__constructs__:null,Up:{_hx_name:"Up",_hx_index:0,__enum__:"game.runner.ControlState",toString:r},Right:{_hx_name:"Right",_hx_index:1,__enum__:"game.runner.ControlState",toString:r},Down:{_hx_name:"Down",_hx_index:2,__enum__:"game.runner.ControlState",toString:r},Space:{_hx_name:"Space",_hx_index:3,__enum__:"game.runner.ControlState",toString:r},Idle:{_hx_name:"Idle",_hx_index:4,__enum__:"game.runner.ControlState",toString:r}};Nn.__constructs__=[Nn.Up,Nn.Right,Nn.Down,Nn.Space,Nn.Idle];var On=function(e,t,n,i){this._elapsed=0,v.call(this),this.init(e,t,n,i)};On.__name__="game.runner.EnemyBird",On.__super__=v,On.prototype=o(v.prototype,{get_name:function(){return"EnemyBird_40"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},onUpdate:function(e){var t=this._root._compMap["Sprite_2"].x;t.set__(t._value-400*e),this._elapsed+=e,this._elapsed>4&&this.owner.dispose()},init:function(e,t,n,i){var a=new q,r=new se(e.getTexture("runner/bird/birdFeet")),s=new se(e.getTexture("runner/bird/birdBody")),o=new se(e.getTexture("runner/bird/birdWing")),_=new se(e.getTexture("runner/bird/birdHat")),h=(new w).add((new q).setXY(n,i)),l=new w;a=new q,this._root=h.addChild(l.add(a).addChild((new w).add(r.setAnchor(8,12).setXY(50,50))).addChild((new w).add(s.setAnchor(266,266))).addChild((new w).add(o.setXY(-18,25).setAnchor(50,22))).addChild((new w).add(_.setXY(-30,-135).setAnchor(47,230)))),r.rotation.set_behavior(new N(-15,15,.5)),a.rotation.set_behavior(new N(-5,5)),_.rotation.set_behavior(new N(30,-10,5)),o.rotation.set_behavior(new N(30,-20,.5)),0==t&&this._root.addChild((new w).add(new se(e.getTexture("runner/instructCrouch")).setXY(-220,100)))},__class__:On});var Yn=function(e,t,n,i){this._elapsed=0,v.call(this),this.init(e,t,n,i)};Yn.__name__="game.runner.EnemyCar",Yn.__super__=v,Yn.prototype=o(v.prototype,{get_name:function(){return"EnemyCar_41"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},onUpdate:function(e){var t=this._root._compMap["Sprite_2"].x;t.set__(t._value-500*e),this._elapsed+=e,this._elapsed>3&&this.owner.dispose()},init:function(e,t,n,i){var a=new se(e.getTexture("runner/car/car")),r=new se(e.getTexture("runner/car/carEye")),s=new se(e.getTexture("runner/car/carStar")),o=new se(e.getTexture("runner/car/carWheel")),_=new se(e.getTexture("runner/car/carWheel"));this._root=(new w).add((new q).setAnchor(0,30).setXY(n,i)).addChild((new w).add(a.setAnchor(226,220).setXY(0,0))).addChild((new w).add(r.setXY(-80,-94).setAnchor(34,92))).addChild((new w).add(s.setXY(25,-58).centerAnchor())).addChild((new w).add(o.setXY(-95,0).centerAnchor())).addChild((new w).add(_.setXY(139,0).centerAnchor())),a.anchorY.set_behavior(new N(220,210,.25)),a.rotation.set_behavior(new N(-3,0,.25)),r.anchorY.set_behavior(new N(92,82,.25)),s.anchorY.set_behavior(new N(34,24,.25)),0==t&&this._root.addChild((new w).add(new se(e.getTexture("runner/instructJump")).setXY(-220,-470)))},__class__:Yn});var Xn=function(e,t,n,i){this._elapsed=0,v.call(this),this.init(e,t,n,i)};Xn.__name__="game.runner.EnemyWorm",Xn.__super__=v,Xn.prototype=o(v.prototype,{get_name:function(){return"EnemyWorm_39"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},onUpdate:function(e){this._elapsed+=e,this._elapsed>7&&this.owner.dispose()},init:function(e,t,n,i){var a=e.getTexture("runner/worm/worm");this._root=(new w).add((new q).setXY(n,i)).addChild((new w).add(new se(e.getTexture("runner/worm/wormHole")).centerAnchor())).addChild((new w).add(this._clip=new q).addChild((new w).add(this._worm=new se(e.getTexture("runner/worm/worm")).setAnchor(77,230)))).addChild((new w).add(new se(e.getTexture("runner/worm/wormHoleClip")).setAnchor(128.5,-11)));var r=a.get_width()+120,s=a.get_height()+60-30;this._clip.scissor=new Se(-137,-290,r,s),this._worm.y.set_behavior(new N(0,300,2)),this._worm.rotation.set_behavior(new N(-15,15,1)),0==t&&this._root.addChild((new w).add(new se(e.getTexture("runner/instructJump")).setXY(-220,-470)))},__class__:Xn});var Un=function(e){this._hasHandledInstruct2=!1,this._hasHandledInstruct1=!1,this._isSturdy=!1,this._startMult=0,this._balanceMult=1,this._velo=0,this._balance=0,this._hasFallen=!1,this._isDown=!1,this._elapsed=0,this.hasFallen=new tn,this.movetype=Hn.Crouch,v.call(this),this.init(e)};Un.__name__="game.runner.Person",Un.__super__=v,Un.prototype=o(v.prototype,{get_name:function(){return"Person_6"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},onUpdate:function(e){if(!this._hasFallen&&!this._isSturdy){switch(this._elapsed+=e,this.movetype._hx_index){case 1:if(this._elapsed>=1)this.move(Hn.Walk),this._anchor.y.set__(980);else{var t=this._elapsed/1;if(t<=.5){var n=L.cubeOut(2*t),i=500*n;this._anchor.y.set__(980-i)}else{n=L.expoOut(1-(2*t-t)),i=500*n;this._anchor.y.set__(980-i)}}break;case 2:this._elapsed>=.5&&this.move(Hn.Walk);break;case 4:this._elapsed>=1&&this.move(Hn.Walk);break;default:}this._startMult<1&&(this._startMult=ye.clamp(this._startMult+.5*e,0,1)),this.movetype==Hn.Surf?this._balanceMult+=1.5*e:this._balanceMult*=.98,this._balanceMult=ye.clamp(this._balanceMult,1,10),this._balance+=this._velo,this.handleRotation(),-80!=this._anchor.rotation._value&&80!=this._anchor.rotation._value||(this.hasFallen.emit(),this.move(Hn.Idle),this._anchor.y.animateTo(980,.25,L.bounceOut),this._hasFallen=!0)}},handleRotation:function(){var e=ye.clamp(this._balance,-80,80),t=L.sineOut(Math.abs(e/80));t>.999?t=1:t<1e-4&&(t=0),this._anchor.rotation.set__(e<0?80*-t:80*t),this._legs.setBalance(-this._anchor.rotation._value)},init:function(e){this._root=new w,this._root.add(this._anchor=(new q).setXY(620,980).setAnchor(0,180)).addChild((new w).add(this._lowerPivot=new q).add(this._legs=new Gn(e,0,0)).addChild((new w).add(this._upperPivot=new q).add(this._torso=new jn(e,0,0)).add(this._head=new Kn(e))).add(this._liquid=new hn(e,"runner"))),this._liquid.setXY(50,-100,130,0),this._liquid.set_visible(!1),this._root.addChild((new w).add(this._instruct1=new se(e.getTexture("runner/instructMove")).setXY(120,-300))).addChild((new w).add(this._instruct2=new se(e.getTexture("runner/instructSurf")).setXY(120,-340))),this._instruct2.set_visible(!1),this._root.add(new jt),this._root.add(new jt)._compMap["Script_27"].run(new qt([new Wt(3),new Kt(mi(this,this.handleInstruct1))]))},handleInstruct1:function(){this._hasHandledInstruct1||(this._instruct1.set_visible(!1),this._instruct2.set_visible(!0),this._hasHandledInstruct1=!0)},handleInstruct2:function(){this._hasHandledInstruct1&&!this._hasHandledInstruct2&&(this._instruct2.set_visible(!1),this._hasHandledInstruct2=!0)},move:function(e){if(this.movetype!=e&&!this._hasFallen&&!this._isSturdy){switch(this._liquid.set_visible(!1),this.movetype=e,this._elapsed=0,e._hx_index){case 0:this._lowerPivot.anchorY.set_behavior(new N(0,0,.2)),this._upperPivot.rotation.set_behavior(new N(-2,2,.4));break;case 1:this._lowerPivot.anchorY.set_behavior(new N(0,0,.4)),this._upperPivot.rotation.set_behavior(new N(-20,2,.8));break;case 2:this._lowerPivot.anchorY.set_behavior(new N(-72,-67,.2)),this._upperPivot.rotation.set_behavior(new N(45,20,.2));break;case 3:this._lowerPivot.anchorY.set_behavior(new N(0,5,.2)),this._upperPivot.rotation.set_behavior(new N(15,8,.2));break;case 4:this._lowerPivot.anchorY.set_behavior(new N(0,0,.2)),this._upperPivot.rotation.set_behavior(new N(-2,2,.4)),this._liquid.set_visible(!0),this.handleInstruct2();break}this._head.move(e,.4),this._legs.move(e,.4),this._torso.move(e,.4)}},__class__:Un});var Vn=function(e,t){this._progress=new M(0),this._type=Hn.Walk,v.call(this),this._isFront=t,this.init(e)};Vn.__name__="game.runner.PersonArm",Vn.__super__=v,Vn.prototype=o(v.prototype,{get_name:function(){return"PersonArm_10"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},onUpdate:function(e){this._progress.update(e),this.setCyclePercent(this._progress._value)},move:function(e,t){this._type=e,this._progress.set_behavior(this._isFront?new N(1,-1,t):new N(-1,1,t))},setCyclePercent:function(e){var t=this._type;if(e>=0)switch(t._hx_index){case 0:n=0;break;case 1:n=(this._isFront,-5*e)-120;break;case 2:n=-10*e-90;break;case 3:n=-60*e;break;case 4:n=this._isFront?-5*e-80:-5*e+80;break}else switch(t._hx_index){case 0:n=0;break;case 1:n=(this._isFront,-5*e)-120;break;case 2:n=-10*e-90;break;case 3:n=-50*e;break;case 4:n=this._isFront?-5*e-80:-5*e+80;break}this._topPivot.rotation.set__(n);t=this._type;if(e>=0)switch(t._hx_index){case 0:n=0;break;case 1:n=0;break;case 2:n=-70*e;break;case 3:n=-60*e;break;case 4:n=-10*e;break}else switch(t._hx_index){case 0:n=0;break;case 1:n=0;break;case 2:n=20*e;break;case 3:n=50*e;break;case 4:n=10*e;break}this._bottom.rotation.set__(n);var n;t=this._type;if(e>=0)switch(t._hx_index){case 0:n=0;break;case 1:n=0;break;case 2:n=0;break;case 3:n=0;break;case 4:n=0;break}else switch(t._hx_index){case 0:n=0;break;case 1:n=0;break;case 2:n=70*e;break;case 3:n=-20*e;break;case 4:n=10*e;break}this._hand.rotation.set__(n)},init:function(e){var t=this._isFront?-18:14;this._root=(new w).add(this._topPivot=(new q).setXY(t,-78)).addChild((new w).add(this._bottom=new se(e.getTexture("runner/body/arm")).setAnchor(8,10).setXY(-1,68)).addChild((new w).add(this._hand=new se(e.getTexture("runner/body/hand")).setAnchor(12,6).setXY(10,85)))).addChild((new w).add(this._top=new se(e.getTexture("runner/body/shirt")).setAnchor(11,5)))},__class__:Vn});var Kn=function(e){v.call(this),this.init(e)};Kn.__name__="game.runner.PersonHead",Kn.__super__=v,Kn.prototype=o(v.prototype,{get_name:function(){return"PersonHead_8"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e){this._root=(new w).add(new se(e.getTexture("runner/body/head")).setXY(0,-96).setAnchor(63,148))},move:function(e,t){switch(e._hx_index){case 0:this._root._compMap["Sprite_2"].rotation.set_behavior(new N(4,-4,t));break;case 1:this._root._compMap["Sprite_2"].rotation.set_behavior(new N(-40,-30,2*t));break;case 2:this._root._compMap["Sprite_2"].rotation.set_behavior(new N(-34,-4,t/2));break;case 3:this._root._compMap["Sprite_2"].rotation.set_behavior(new N(-13,-4,t/2));break;case 4:this._root._compMap["Sprite_2"].rotation.set_behavior(new N(4,-4,t));break}},__class__:Kn});var Wn=function(e,t){this._balance=0,this._progress=new M(0),this._type=Hn.Walk,v.call(this),this._isFront=t,this.init(e)};Wn.__name__="game.runner.PersonLeg",Wn.__super__=v,Wn.prototype=o(v.prototype,{get_name:function(){return"PersonLeg_12"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},onUpdate:function(e){this._progress.update(e),this.setCyclePercent(this._progress._value)},move:function(e,t){switch(this._type=e,e._hx_index){case 0:this._progress.set_behavior(new N(0,0,t));break;case 1:this._progress.set_behavior(this._isFront?new N(1,-1,t):new N(-1,1,t));break;case 2:this._progress.set_behavior(this._isFront?new N(1,-1,t):new N(-1,1,t));break;case 3:this._progress.set_behavior(this._isFront?new N(1,-1,t):new N(-1,1,t));break;case 4:this._progress.set_behavior(new N(0,0,t));break}},setBalance:function(e){this._balance=e},setCyclePercent:function(e){var t=this._type;if(e>=0)switch(t._hx_index){case 0:n=0;break;case 1:this._isFront,n=-10*e- -60;break;case 2:n=-60*e-60;break;case 3:n=-60*e;break;case 4:n=this._isFront?-20:20;break}else switch(t._hx_index){case 0:n=0;break;case 1:this._isFront,n=-10*e- -60;break;case 2:n=-10*e-60;break;case 3:n=-10*e;break;case 4:n=this._isFront?-20:20;break}this._topPivot.rotation.set__(n);t=this._type;if(e>=0)switch(t._hx_index){case 0:n=0;break;case 1:n=10*e;break;case 2:n=60*e+110;break;case 3:n=60*e;break;case 4:n=0;break}else switch(t._hx_index){case 0:n=0;break;case 1:n=-5*e;break;case 2:n=-10*e+110;break;case 3:n=-10*e;break;case 4:n=0;break}this._bottom.rotation.set__(n);var n,i=this._balance;t=this._type;if(e>=0)switch(t._hx_index){case 0:n=0;break;case 1:n=0;break;case 2:n=5*e-48+i;break;case 3:n=5*e+i;break;case 4:n=(this._isFront?20:-20)+i;break}else switch(t._hx_index){case 0:n=0;break;case 1:n=0;break;case 2:n=15*e-48+i;break;case 3:n=15*e+i;break;case 4:n=(this._isFront?20:-20)+i;break}this._foot.rotation.set__(n)},init:function(e){var t=this._isFront?"runner/body/pantFront":"runner/body/pantBack",n=this._isFront?-10:10;this._root=(new w).add(this._topPivot=(new q).setXY(n,0)).addChild((new w).add(this._bottom=new se(e.getTexture("runner/body/leg")).setAnchor(7,10).setXY(-3,78)).addChild((new w).add(this._foot=new se(e.getTexture("runner/body/shoe")).setAnchor(8,5).setXY(2,110)))).addChild((new w).add(this._top=new se(e.getTexture(t)).setAnchor(14,15)))},__class__:Wn});var Gn=function(e,t,n){v.call(this),this.init(e,t,n)};Gn.__name__="game.runner.PersonLegs",Gn.__super__=v,Gn.prototype=o(v.prototype,{get_name:function(){return"PersonLegs_11"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e,t,n){this._root=(new w).add((new q).setXY(t,n)).addChild((new w).add(new se(e.getTexture("runner/body/shorts")).centerAnchor().setXY(0,-5))).addChild((new w).add(this._leg1=new Wn(e,!1))).addChild((new w).add(this._leg2=new Wn(e,!0)))},setBalance:function(e){this._leg1.setBalance(e),this._leg2.setBalance(e)},move:function(e,t){this._leg1.move(e,t),this._leg2.move(e,t)},__class__:Gn});var Hn=s["game.runner.PersonMoveType"]={__ename__:!0,__constructs__:null,Idle:{_hx_name:"Idle",_hx_index:0,__enum__:"game.runner.PersonMoveType",toString:r},Jump:{_hx_name:"Jump",_hx_index:1,__enum__:"game.runner.PersonMoveType",toString:r},Crouch:{_hx_name:"Crouch",_hx_index:2,__enum__:"game.runner.PersonMoveType",toString:r},Walk:{_hx_name:"Walk",_hx_index:3,__enum__:"game.runner.PersonMoveType",toString:r},Surf:{_hx_name:"Surf",_hx_index:4,__enum__:"game.runner.PersonMoveType",toString:r}};Hn.__constructs__=[Hn.Idle,Hn.Jump,Hn.Crouch,Hn.Walk,Hn.Surf];var jn=function(e,t,n){v.call(this),this.init(e,t,n)};jn.__name__="game.runner.PersonTorso",jn.__super__=v,jn.prototype=o(v.prototype,{get_name:function(){return"PersonTorso_9"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e,t,n){this._root=(new w).add((new q).setXY(t,n)).addChild((new w).add(this._arm1=new Vn(e,!1))).addChild((new w).add(new se(e.getTexture("runner/body/body")).setAnchor(32,135))).addChild((new w).add(this._arm2=new Vn(e,!0)))},move:function(e,t){this._arm1.move(e,t),this._arm2.move(e,t)},__class__:jn});var zn=function(e,t,n){this._surfDist=0,this._hasFinishedWalking=!1,this._hasWon=!1,this._hasLost=!1,this._distPerson=0,this._distWorld=0,this._enemyDuration=.5,this._enemyElapsed=0,this._jumpIndex=0,this._crouchIndex=0,v.call(this),this._pack=e,this.init(t,n)};zn.__name__="game.runner.RunnerGame",zn.__super__=v,zn.prototype=o(v.prototype,{get_name:function(){return"RunnerGame_0"},onUpdate:function(e){var t=this;if(!this._hasLost&&!this._hasFinishedWalking){var n=P.root._compMap["DrinkPercent_35"],i=P.root._compMap["OverallScore_36"];n.get_percent()>0?(n.set_percent(n.get_percent()-.03*e),this._drinkMeter.setFill(n.get_percent())):this._hasWon||(this._hasWon=!0,this.handleSuccess()),this._hasWon?(this._distWorld+=225*e,this._distPerson+=225*e):this._distWorld+=450*e,this._person.movetype==Hn.Surf&&(this._surfDist+=10*e),this._hasWon||i.score.set__(Math.floor(this._distWorld/80)+Math.floor(this._surfDist)),this._bg.setPercent(n.get_percent()),this._floor.setPercent(n.get_percent()),this._cloud1.rotation.set__(180*L.sineOut(n.get_percent())),this._cloud2.rotation.set__(180*n.get_percent()),this._distPerson<690?(this._sceneryBack._compMap["Sprite_2"].x.set__(-this._distWorld),this._sceneryMid._compMap["Sprite_2"].x.set__(-this._distWorld),this._sceneryFront._compMap["Sprite_2"].x.set__(-this._distWorld),this._personSpr.x.set__(this._distPerson)):(this._hasFinishedWalking=!0,this._person.dispose(),this._root.add(new jt),this._root.add(new jt)._compMap["Script_27"].run(new qt([new Wt(1),new Kt((function(){t.dispose(),P.root.add(new Jn(t._pack,1920,1080))}))])));var a=n.get_percent();if(!this._hasWon&&!this._hasLost&&a<.8&&(this._enemyElapsed+=e,this._enemyElapsed>=this._enemyDuration)){this._enemyElapsed=0,this._enemyDuration=2+4*Math.random();var r=2400-this._sceneryMid._compMap["Sprite_2"].x._value;this.addEnemy(r)}}},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root),this._disposer.dispose()},handleSuccess:function(){var e=this._person;e._balance=0,e.move(Hn.Walk),e.handleRotation(),e._isSturdy=!0,this._sun.owner.add(new An(this._pack,440,90)),this._sun.dispose();var t=1920-this._sceneryMid._compMap["Sprite_2"].x._value;this._sceneryMid.addChild((new w).add(new se(this._pack.getTexture("runner/job")).setXY(t,403)))},init:function(e,t){var n=this;this._bg=new gn(235,59,36,172,221,229,e,t),this._floor=new gn(9,87,233,204,204,204,e,t),this._root=new w,this._root.add(this._bg).addChild(this._sceneryBack=(new w).add(new q)).addChild((new w).add(this._floor.setXY(0,t-180))).addChild((new w).add(new Z(16777215,e,6).setXY(0,t-186))).addChild((new w).add(this._cloud1=new se(this._pack.getTexture("cloud")).setRotation(180).setScale(.7).setXY(1e3,280).centerAnchor())).addChild((new w).add(this._cloud2=new se(this._pack.getTexture("cloud")).setRotation(180).setXY(1400,130).centerAnchor())).addChild((new w).add(this._sun=new qn(this._pack,440,90))).addChild(this._sceneryMid=(new w).add(new q)).add(this._controlDesktop=new Ln).addChild((new w).add(this._personSpr=new q).add(this._person=new Un(this._pack))).addChild(this._sceneryFront=(new w).add(new q)).add(this._homeButton=new rn(this._pack,"homeButton",e-121,90)).add(this._points=new fn(this._pack,1550,49)).add(this._drinkMeter=new pn(this._pack,1760,180,"drinkFront","drinkMid").show(!0)),this._cloud1.x.set_behavior(new N(970,1030,4)),this._cloud1.y.set_behavior(new N(280,250,8)),this._cloud2.x.set_behavior(new N(1370,1430,4.5)),this._cloud2.y.set_behavior(new N(130,100,8.5)),this._disposer=new b,this._person.move(Hn.Walk),this._disposer.add(P.root._compMap["OverallScore_36"].score.get_changed().connect((function(e,t){n._points.setScore(e)}))),this._disposer.add(this._homeButton.click.connect((function(){n.dispose(),P.root._compMap["DrinkPercent_35"].reset(),P.root.add(new Cn(n._pack,e,t))}))),this._disposer.add(this._person.hasFallen.connect((function(){n._hasLost=!0;var e=new se(n._pack.getTexture("runner/lost")).centerAnchor().setXY(960,1080);e.y.animateTo(540,.5,L.backOut),e.rotation.set_behavior(new N(-5,5,4)),e.scaleX.set_behavior(new N(.9,1,4)),e.scaleY.set_behavior(new N(.9,1,4)),n._root.addChild((new w).add(e))})).once()),this._disposer.add(this._controlDesktop.state.get_changed().connect((function(e,t){var i=n._person.movetype;switch(e._hx_index){case 0:switch(i._hx_index){case 1:break;case 2:break;case 4:break;default:n._person.move(Hn.Jump)}break;case 1:switch(i._hx_index){case 1:break;case 2:break;case 4:break;default:if(n._person.move(Hn.Surf),!n._hasWon&&!n._hasLost){var a=680-n._sceneryMid._compMap["Sprite_2"].x._value;n._sceneryMid.addChild((new w).add(new se(n._pack.getTexture("runner/mess")).setScale(.6).setXY(a,940)))}}break;case 2:switch(i._hx_index){case 1:break;case 2:break;case 4:break;default:n._person.move(Hn.Crouch)}break;case 3:switch(i._hx_index){case 1:break;case 2:break;case 4:break;default:n._person.move(Hn.Walk)}break;case 4:switch(i._hx_index){case 1:break;case 2:break;case 4:break;default:n._person.move(Hn.Walk)}break}switch(e._hx_index){case 3:n._person._isDown=!0;break;case 4:n._person._isDown=!1;break;default:}}))),this._sceneryMid.addChild((new w).add(new se(this._pack.getTexture("runner/bar")).setXY(300,403))),this.addBushBack(900),this.addTreeBack(1600),this.addBushBack(2800),this.addBushBack(1600),this.addTreeBack(3800),this.addBushBack(5100),this.addTreeBack(7e3),this.addBushBack(8100),this.addBushBack(11100),this.addTreeBack(13e3),this.addBushBack(14100),this.addBushBack(15900),this.addBushFront(0),this.addBushFront(1800),this.addBushFront(4300),this.addBushFront(7300),this.addBushFront(13300)},addBushBack:function(e){this._sceneryBack.addChild((new w).add(new In(this._pack,e,729)))},addBushFront:function(e){this._sceneryFront.addChild((new w).add(new In(this._pack,e,929)))},addTreeBack:function(e){this._sceneryBack.addChild((new w).add(new Qn(this._pack,e,620)))},addBird:function(e){this._sceneryMid.addChild((new w).add(new On(this._pack,this._crouchIndex++,e,525)))},addWorm:function(e){this._sceneryMid.addChild((new w).add(new Xn(this._pack,this._jumpIndex++,e,985)))},addCar:function(e){this._sceneryMid.addChild((new w).add(new Yn(this._pack,this._jumpIndex++,e,985)))},addEnemy:function(e){var t=Math.floor(3*Math.random());switch(t){case 0:this.addWorm(e);break;case 1:this.addBird(e);break;case 2:this.addCar(e);break}},__class__:zn});var qn=function(e,t,n){v.call(this),this.init(e,t,n)};qn.__name__="game.runner.RunnerSun",qn.__super__=v,qn.prototype=o(v.prototype,{get_name:function(){return"RunnerSun_13"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e,t,n){this._root=(new w).add((new q).setXY(t,n)).addChild((new w).add(this._burst=new se(e.getTexture("runner/sun/sunBurst")).centerAnchor())).addChild((new w).add(new se(e.getTexture("runner/sun/sun")).centerAnchor())).addChild((new w).add(new se(e.getTexture("runner/sun/ear")).setXY(-120,-30))).addChild((new w).add(new se(e.getTexture("runner/sun/eye")).setXY(10,30))).addChild((new w).add(new se(e.getTexture("runner/sun/eye")).setXY(95,30))).addChild((new w).add(new se(e.getTexture("runner/sun/mouth")).setAnchor(35,3).setXY(90,120))),this._burst.y.set_behavior(new N(0,10,1)),this._burst.rotation.set_behavior(new N(-5,5,2)),this._root._compMap["Sprite_2"].anchorX.set_behavior(new N(-20,20,4)),this._root._compMap["Sprite_2"].anchorY.set_behavior(new N(-10,0,1)),this._root._compMap["Sprite_2"].rotation.set_behavior(new N(-5,5,8))},__class__:qn});var Qn=function(e,t,n){v.call(this),this.init(e,t,n)};Qn.__name__="game.runner.Tree",Qn.__super__=v,Qn.prototype=o(v.prototype,{get_name:function(){return"Tree_38"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e,t,n){this._root=new w,this._root.add(new se(e.getTexture("runner/tree")).setXY(t,n))},__class__:Qn});var Jn=function(e,t,n){v.call(this),this.init(e,t,n)};Jn.__name__="game.score.ScoreGame",Jn.__super__=v,Jn.prototype=o(v.prototype,{get_name:function(){return"ScoreGame_19"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.owner.removeChild(this._root)},init:function(e,t,n){var i=this,a=t/2,r=(new w).add(new Z(11328997,t,n)).addChild((new w).add(new se(e.getTexture("score/scoreBottomBubble")).centerAnchor().setXY(a,476))),s=new w,o=new se(e.getTexture("score/scoreBottom")).centerAnchor().setXY(a,356),_=r.addChild(s.add(o)).addChild((new w).add(new se(e.getTexture("score/scoreTopBubble")).centerAnchor().setXY(a,923))),h=(r=new w,new se(e.getTexture("score/scoreTop")).centerAnchor().setXY(a,853));this._root=_.addChild(r.add(h)).add(this._homeButton=new rn(e,"homeButton",t-121,90)),h.y.animateTo(753,.75,L.backOut),h.rotation.set_behavior(new N(-5,5,4)),h.scaleX.set_behavior(new N(.9,1,4)),h.scaleY.set_behavior(new N(.9,1,4)),o.y.animateTo(256,.5,L.backOut),o.rotation.set_behavior(new N(5,-5,4)),o.scaleX.set_behavior(new N(1,.9,4)),o.scaleY.set_behavior(new N(1,.9,4)),this._homeButton.click.connect((function(){i.dispose(),P.root._compMap["DrinkPercent_35"].reset(),P.root.add(new Cn(e,t,n))})).once()},__class__:Jn});var Zn=function(){};Zn.__name__="haxe.IMap",Zn.__isInterface__=!0;var $n=function(e,t,n){Error.call(this,e),this.message=e,this.__previousException=t,this.__nativeException=null!=n?n:this};$n.__name__="haxe.Exception",$n.caught=function(e){return e instanceof $n?e:e instanceof Error?new $n(e.message,null,e):new ei(e,null,e)},$n.thrown=function(e){if(e instanceof $n)return e.get_native();if(e instanceof Error)return e;var t=new ei(e);return t},$n.__super__=Error,$n.prototype=o(Error.prototype,{unwrap:function(){return this.__nativeException},get_native:function(){return this.__nativeException},__class__:$n});var ei=function(e,t,n){$n.call(this,String(e),t,n),this.value=e};ei.__name__="haxe.ValueException",ei.__super__=$n,ei.prototype=o($n.prototype,{unwrap:function(){return this.value},__class__:ei});var ti=function(){this.h={}};ti.__name__="haxe.ds.IntMap",ti.__interfaces__=[Zn],ti.prototype={remove:function(e){return!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},__class__:ti};var ni=function(){this.h=Object.create(null)};ni.__name__="haxe.ds.StringMap",ni.__interfaces__=[Zn],ni.prototype={iterator:function(){return new ai(this.h)},__class__:ni};var ii=function(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0};ii.__name__="haxe.ds._StringMap.StringMapKeyIterator",ii.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.keys[this.current++]},__class__:ii};var ai=function(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0};ai.__name__="haxe.ds._StringMap.StringMapValueIterator",ai.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.h[this.keys[this.current++]]},__class__:ai};var ri=function(){};ri.__name__="haxe.io.Bytes";var si=function(e){this.current=0,this.array=e};si.__name__="haxe.iterators.ArrayIterator",si.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:si};var oi=function(){};oi.__name__="haxe.rtti.Meta",oi.getType=function(e){var t=oi.getMeta(e);return null==t||null==t.obj?{}:t.obj},oi.getMeta=function(e){return e.__meta__};var _i=function(e,t,n){this.xml=t,this.message=e,this.position=n,this.lineNumber=1,this.positionAtLine=0;var i=0;while(i<n){var a=i++,r=t.charCodeAt(a);10==r?(this.lineNumber++,this.positionAtLine=0):13!=r&&this.positionAtLine++}};_i.__name__="haxe.xml.XmlParserException",_i.prototype={toString:function(){var e=ui.getClass(this);return e.__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:_i};var hi=function(){};hi.__name__="haxe.xml.Parser",hi.parse=function(e,t){null==t&&(t=!1);var n=f.createDocument();return hi.doParse(e,t,0,n),n},hi.doParse=function(e,t,n,i){null==n&&(n=0);var a=null,r=1,s=1,o=null,_=0,l=0,u=0,p=new d,g=1,v=-1;while(n<e.length){var b=e.charCodeAt(n);switch(r){case 0:switch(b){case 9:case 10:case 13:case 32:break;default:r=s;continue}break;case 1:if(60!=b){_=n,r=13;continue}r=0,s=2;break;case 2:switch(b){case 33:if(91==e.charCodeAt(n+1)){if(n+=2,"CDATA["!=h.substr(e,n,6).toUpperCase())throw $n.thrown(new _i("Expected <![CDATA[",e,n));n+=5,r=17,_=n+1}else if(68==e.charCodeAt(n+1)||100==e.charCodeAt(n+1)){if("OCTYPE"!=h.substr(e,n+2,6).toUpperCase())throw $n.thrown(new _i("Expected <!DOCTYPE",e,n));n+=8,r=16,_=n+1}else{if(45!=e.charCodeAt(n+1)||45!=e.charCodeAt(n+2))throw $n.thrown(new _i("Expected \x3c!--",e,n));n+=2,r=15,_=n+1}break;case 47:if(null==i)throw $n.thrown(new _i("Expected node name",e,n));_=n+1,r=0,s=10;break;case 63:r=14,_=n;break;default:r=3,_=n;continue}break;case 3:if(!(b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||58==b||46==b||95==b||45==b)){if(n==_)throw $n.thrown(new _i("Expected node name",e,n));a=f.createElement(h.substr(e,_,n-_)),i.addChild(a),++l,r=0,s=4;continue}break;case 4:switch(b){case 47:r=11;break;case 62:r=9;break;default:r=5,_=n;continue}break;case 5:if(!(b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||58==b||46==b||95==b||45==b)){if(_==n)throw $n.thrown(new _i("Expected attribute name",e,n));var w=h.substr(e,_,n-_);if(o=w,a.exists(o))throw $n.thrown(new _i("Duplicate attribute ["+o+"]",e,n));r=0,s=6;continue}break;case 6:if(61!=b)throw $n.thrown(new _i("Expected =",e,n));r=0,s=7;break;case 7:switch(b){case 34:case 39:p=new d,r=8,_=n+1,v=b;break;default:throw $n.thrown(new _i('Expected "',e,n))}break;case 8:switch(b){case 38:var y=n-_;p.b+=null==y?h.substr(e,_,null):h.substr(e,_,y),r=18,g=8,_=n+1;break;case 60:case 62:if(t)throw $n.thrown(new _i("Invalid unescaped "+String.fromCodePoint(b)+" in attribute value",e,n));if(b==v){var x=n-_;p.b+=null==x?h.substr(e,_,null):h.substr(e,_,x);var S=p.b;p=new d,a.set(o,S),r=0,s=4}break;default:if(b==v){var k=n-_;p.b+=null==k?h.substr(e,_,null):h.substr(e,_,k);var C=p.b;p=new d,a.set(o,C),r=0,s=4}}break;case 9:n=hi.doParse(e,t,n,a),_=n,r=1;break;case 10:if(!(b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||58==b||46==b||95==b||45==b)){if(_==n)throw $n.thrown(new _i("Expected node name",e,n));var A=h.substr(e,_,n-_);if(null==i||0!=i.nodeType)throw $n.thrown(new _i("Unexpected </"+A+">, tag is not open",e,n));if(i.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":m.toString(i.nodeType)));if(A!=i.nodeName){if(i.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":m.toString(i.nodeType)));throw $n.thrown(new _i("Expected </"+i.nodeName+">",e,n))}r=0,s=12;continue}break;case 11:if(62!=b)throw $n.thrown(new _i("Expected >",e,n));r=1;break;case 12:if(62==b)return 0==l&&i.addChild(f.createPCData("")),n;throw $n.thrown(new _i("Expected >",e,n));case 13:if(60==b){var T=n-_;p.b+=null==T?h.substr(e,_,null):h.substr(e,_,T);var E=f.createPCData(p.b);p=new d,i.addChild(E),++l,r=0,s=2}else if(38==b){var M=n-_;p.b+=null==M?h.substr(e,_,null):h.substr(e,_,M),r=18,g=13,_=n+1}break;case 14:if(63==b&&62==e.charCodeAt(n+1)){++n;var P=h.substr(e,_+1,n-_-2);i.addChild(f.createProcessingInstruction(P)),++l,r=1}break;case 15:45==b&&45==e.charCodeAt(n+1)&&62==e.charCodeAt(n+2)&&(i.addChild(f.createComment(h.substr(e,_,n-_))),++l,n+=2,r=1);break;case 16:91==b?++u:93==b?--u:62==b&&0==u&&(i.addChild(f.createDocType(h.substr(e,_,n-_))),++l,r=1);break;case 17:if(93==b&&93==e.charCodeAt(n+1)&&62==e.charCodeAt(n+2)){var R=f.createCData(h.substr(e,_,n-_));i.addChild(R),++l,n+=2,r=1}break;case 18:if(59==b){var D=h.substr(e,_,n-_);if(35==D.charCodeAt(0)){var B=120==D.charCodeAt(1)?c.parseInt("0"+h.substr(D,1,D.length-1)):c.parseInt(h.substr(D,1,D.length-1));p.b+=String.fromCodePoint(B)}else if(Object.prototype.hasOwnProperty.call(hi.escapes.h,D))p.b+=c.string(hi.escapes.h[D]);else{if(t)throw $n.thrown(new _i("Undefined entity: "+D,e,n));p.b+=c.string("&"+D+";")}_=n+1,r=g}else if(!(b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||58==b||46==b||95==b||45==b)&&35!=b){if(t)throw $n.thrown(new _i("Invalid character in entity: "+String.fromCodePoint(b),e,n));p.b+=String.fromCodePoint(38);var F=n-_;p.b+=null==F?h.substr(e,_,null):h.substr(e,_,F),--n,_=n+1,r=g}break}++n}if(1==r&&(_=n,r=13),13==r){if(0==i.nodeType){if(i.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":m.toString(i.nodeType)));throw $n.thrown(new _i("Unclosed node <"+i.nodeName+">",e,n))}if(n!=_||0==l){y=n-_;p.b+=null==y?h.substr(e,_,null):h.substr(e,_,y),i.addChild(f.createPCData(p.b)),++l}return n}if(!t&&18==r&&13==g){p.b+=String.fromCodePoint(38);y=n-_;return p.b+=null==y?h.substr(e,_,null):h.substr(e,_,y),i.addChild(f.createPCData(p.b)),++l,n}throw $n.thrown(new _i("Unexpected end",e,n))};var li=function(e){this.output=new d,this.pretty=e};li.__name__="haxe.xml.Printer",li.print=function(e,t){null==t&&(t=!1);var n=new li(t);return n.writeNode(e,""),n.output.b},li.prototype={writeNode:function(e,t){switch(e.nodeType){case 0:if(this.output.b+=c.string(t+"<"),e.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":m.toString(e.nodeType)));this.output.b+=c.string(e.nodeName);var n=e.attributes();while(n.hasNext()){var i=n.next();this.output.b+=c.string(" "+i+'="');var a=p.htmlEscape(e.get(i),!0);this.output.b+=c.string(a),this.output.b+='"'}if(this.hasChildren(e)){if(this.output.b+=">",this.pretty&&(this.output.b+="\n"),e.nodeType!=f.Document&&e.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":m.toString(e.nodeType)));var r=e.children,s=0;while(s<r.length){var o=r[s++];this.writeNode(o,this.pretty?t+"\t":t)}if(this.output.b+=c.string(t+"</"),e.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":m.toString(e.nodeType)));this.output.b+=c.string(e.nodeName),this.output.b+=">",this.pretty&&(this.output.b+="\n")}else this.output.b+="/>",this.pretty&&(this.output.b+="\n");break;case 1:if(e.nodeType==f.Document||e.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":m.toString(e.nodeType)));var _=e.nodeValue;if(0!=_.length){a=t+p.htmlEscape(_);this.output.b+=c.string(a),this.pretty&&(this.output.b+="\n")}break;case 2:if(this.output.b+=c.string(t+"<![CDATA["),e.nodeType==f.Document||e.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":m.toString(e.nodeType)));this.output.b+=c.string(e.nodeValue),this.output.b+="]]>",this.pretty&&(this.output.b+="\n");break;case 3:if(e.nodeType==f.Document||e.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":m.toString(e.nodeType)));var h=e.nodeValue,l=new RegExp("[\n\r\t]+","g".split("u").join(""));h=h.replace(l,""),h="\x3c!--"+h+"--\x3e",this.output.b+=null==t?"null":""+t,this.output.b+=c.string(p.trim(h)),this.pretty&&(this.output.b+="\n");break;case 4:if(e.nodeType==f.Document||e.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":m.toString(e.nodeType)));this.output.b+=c.string("<!DOCTYPE "+e.nodeValue+">"),this.pretty&&(this.output.b+="\n");break;case 5:if(e.nodeType==f.Document||e.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":m.toString(e.nodeType)));this.output.b+=c.string("<?"+e.nodeValue+"?>"),this.pretty&&(this.output.b+="\n");break;case 6:if(e.nodeType!=f.Document&&e.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":m.toString(e.nodeType)));r=e.children,s=0;while(s<r.length){o=r[s++];this.writeNode(o,t)}break}},hasChildren:function(e){if(e.nodeType!=f.Document&&e.nodeType!=f.Element)throw $n.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":m.toString(e.nodeType)));var t=e.children,n=0;while(n<t.length){var i=t[n++];switch(i.nodeType){case 0:case 1:return!0;case 2:case 3:if(i.nodeType==f.Document||i.nodeType==f.Element)throw $n.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":m.toString(i.nodeType)));if(0!=p.ltrim(i.nodeValue).length)return!0;break;default:}}return!1},__class__:li};var ui=function(){};ui.__name__="js.Boot",ui.getClass=function(e){if(null==e)return null;if(e instanceof Array)return Array;var t=e.__class__;if(null!=t)return t;var n=ui.__nativeClassName(e);return null!=n?ui.__resolveNativeClass(n):null},ui.__string_rec=function(e,t){if(null==e)return"null";if(t.length>=5)return"<...>";var n=typeof e;switch("function"==n&&(e.__name__||e.__ename__)&&(n="object"),n){case"function":return"<function>";case"object":if(e.__enum__){var i=s[e.__enum__],a=i.__constructs__[e._hx_index],r=a._hx_name;return a.__params__?(t+="\t",r+"("+function(n){var i,r=[],s=0,o=a.__params__;while(1){if(!(s<o.length))break;var _=o[s];s+=1,r.push(ui.__string_rec(e[_],t))}return i=r,i}().join(",")+")"):r}if(e instanceof Array){var o="[";t+="\t";var _=0,h=e.length;while(_<h){var l=_++;o+=(l>0?",":"")+ui.__string_rec(e[l],t)}return o+="]",o}var u;try{u=e.toString}catch(_){return"???"}if(null!=u&&u!=Object.toString&&"function"==typeof u){var c=e.toString();if("[object Object]"!=c)return c}o="{\n";t+="\t";var d=null!=e.hasOwnProperty,p=null;for(p in e)d&&!e.hasOwnProperty(p)||"prototype"!=p&&"__class__"!=p&&"__super__"!=p&&"__interfaces__"!=p&&"__properties__"!=p&&(2!=o.length&&(o+=", \n"),o+=t+p+" : "+ui.__string_rec(e[p],t));return t=t.substring(1),o+="\n"+t+"}",o;case"string":return e;default:return String(e)}},ui.__interfLoop=function(e,t){while(1){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n){var i=0,a=n.length;while(i<a){var r=i++,s=n[r];if(s==t||ui.__interfLoop(s,t))return!0}}e=e.__super__}},ui.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array;case bi:return"boolean"==typeof e;case gi:return null!=e;case vi:return"number"==typeof e;case fi:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(ui.__downcastCheck(e,t))return!0}else if("object"==typeof t&&ui.__isNativeObj(t)&&e instanceof t)return!0;return t==wi&&null!=e.__name__||(t==yi&&null!=e.__ename__||null!=e.__enum__&&s[e.__enum__]==t)}},ui.__downcastCheck=function(e,t){return e instanceof t||!!t.__isInterface__&&ui.__interfLoop(ui.getClass(e),t)},ui.__nativeClassName=function(e){var t=ui.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},ui.__isNativeObj=function(e){return null!=ui.__nativeClassName(e)},ui.__resolveNativeClass=function(e){return i[e]};var ci=function(){};ci.__name__="js.Browser",ci.getLocalStorage=function(){try{var e=window.localStorage;if(e.getItem(""),0==e.length){var t="_hx_"+Math.random();e.setItem(t,t),e.removeItem(t)}return e}catch(n){return null}};var di=function(){};function pi(e){return e instanceof Array?new si(e):e.iterator()}function mi(e,t){return null==t?null:(null==t.__id__&&(t.__id__=i.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[t.__id__],null==n&&(n=t.bind(e),e.hx__closures__[t.__id__]=n),n);var n}di.__name__="js.html._CanvasElement.CanvasUtil",di.getContextWebGL=function(e,t){var n=e.getContext("webgl",t);if(null!=n)return n;n=e.getContext("experimental-webgl",t);return null!=n?n:null},i.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(h.now=performance.now.bind(performance)),null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),String.prototype.__class__=String,String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var fi={},gi={},vi=Number,bi=Boolean,wi={},yi={};ui.__toStr={}.toString,f.Element=0,f.PCData=1,f.CData=2,f.Comment=3,f.DocType=4,f.ProcessingInstruction=5,f.Document=6,S.instance=new S,A.DISPATCHING_SENTINEL=new C(null,null),P.root=new w,P.uncaughtError=new E,P.hidden=new k(!1),P.volume=new M(1),P._platform=S.instance,P._calledInit=!1,D.logger=new R(P._platform.createLogHandler("flambe")),W.__meta__={obj:{assets:[{main:[{name:"drinkFront.png",md5:"e855cee92718a5f3e1a7392fe916248a",bytes:5459},{name:"runner/sun/mouth.png",md5:"b0170054dfd3f82f189a06140b5fb07d",bytes:163},{name:"runner/sun/sunBurst.png",md5:"50c0be35828c62ded315c47bcddc8f8f",bytes:14822},{name:"runner/sun/ear.png",md5:"aad2f666df454117dd8a45f27dc0b630",bytes:1993},{name:"runner/sun/eye.png",md5:"386d4175d9515e84c9f071b18e29d4f9",bytes:487},{name:"runner/sun/sun.png",md5:"1e2b4d2a8662c5aa01083044561cc47d",bytes:10228},{name:"runner/car/carWheel.png",md5:"ee58be4e2325df405b0aac751ecaf429",bytes:3013},{name:"runner/car/carStar.png",md5:"aa7ae2bee3c47b4cd4fbadd4076eb4c7",bytes:1712},{name:"runner/car/carEye.png",md5:"a6255bfdd651e7adc66c6dcc61e061d8",bytes:1622},{name:"runner/car/car.png",md5:"1231fd17e96079a42a5ea38f30db5c26",bytes:5508},{name:"runner/instructJump.png",md5:"70402e78258bb1c90e321587e6239247",bytes:9583},{name:"runner/mess.png",md5:"cda065f684bdf605bdd5493d531450b6",bytes:3105},{name:"runner/puke/puke3.png",md5:"5acd4d4dbb7848ba726d66cee3e38ed7",bytes:1081},{name:"runner/puke/puke2.png",md5:"8ce4f40cc8976db023d0845ee73a0dff",bytes:1075},{name:"runner/puke/puke.pex",md5:"f600e9e5653c4129accb99fb77b643c5",bytes:2310},{name:"runner/puke/puke0.png",md5:"ec3ccb9cefc66aaf30e0073ebead2dd4",bytes:1082},{name:"runner/puke/puke1.png",md5:"22c33d4e85dba0dbf021a93efbf98bff",bytes:998},{name:"runner/puke/puke4.png",md5:"9db58ae6d9f65b28ea84ac47eed716a4",bytes:974},{name:"runner/lost.png",md5:"a977b9bb7a51dadca82031b48602af77",bytes:60050},{name:"runner/body/arm.png",md5:"f491e2180d91926ccafe33445414945c",bytes:426},{name:"runner/body/body.png",md5:"4f0504a7a90f6a3429c23f746501de23",bytes:4206},{name:"runner/body/shirt.png",md5:"0ee767fecccb3b0aad5f62fc0eb202a7",bytes:438},{name:"runner/body/hand.png",md5:"da8f907dcf0d654e7d165818124c4c2a",bytes:381},{name:"runner/body/shoe.png",md5:"44266ca38efdc09be6e41cddb89b0059",bytes:437},{name:"runner/body/pantBack.png",md5:"999ff88cea7ee0884f1c5de5a2ee12ca",bytes:509},{name:"runner/body/leg.png",md5:"44c573cbf09e8243d7382a04223398b6",bytes:322},{name:"runner/body/shorts.png",md5:"e95c35104d543827c3bbccbe02d317a5",bytes:280},{name:"runner/body/head.png",md5:"325901dbe772c9a57e4d7468e9c1a289",bytes:4436},{name:"runner/body/pantFront.png",md5:"6138687919e7ca48b872cf8e5113a9c9",bytes:559},{name:"runner/instructMove.png",md5:"f2991a975b9c614848052a4567e59fc1",bytes:7889},{name:"runner/bushBerry.png",md5:"ecd15cc8e1f4a7c9625daf0ab24ff541",bytes:264},{name:"runner/bird/birdBody.png",md5:"e80a9dbd7135535ba94cf6f16f923bfc",bytes:13992},{name:"runner/bird/birdWing.png",md5:"a9ce85a0f23dc5d578baa7c7c8252fbb",bytes:2790},{name:"runner/bird/birdHat.png",md5:"2affd2237ba97fe5bb68a2dd491eb37b",bytes:1833},{name:"runner/bird/birdFeet.png",md5:"8bab0439934541ee1a5592f740f1f998",bytes:687},{name:"runner/tree.png",md5:"d04e446b86b2f009cbde49df0cb7cfcf",bytes:5887},{name:"runner/worm/worm.png",md5:"140a6f689e4191261765cea7b1023969",bytes:8503},{name:"runner/worm/wormHoleClip.png",md5:"0ad6d891bd4e72971c514ffb1341ae99",bytes:1778},{name:"runner/worm/wormHole.png",md5:"f1c771732f650f841e5c46612d63f603",bytes:3439},{name:"runner/job.png",md5:"52ab2d46e67d46a8b858e9d7afd0077e",bytes:24348},{name:"runner/bar.png",md5:"0ffb4194e5c8fddaf24d4291aea66713",bytes:28448},{name:"runner/bush.png",md5:"b525ec7f888ed33e851991643c22943f",bytes:4766},{name:"runner/instructCrouch.png",md5:"2f6bab7e0006f62b5ed7e61c1065cfd2",bytes:12041},{name:"runner/instructSurf.png",md5:"09729250e5a26d19902820de3b42c62d",bytes:11285},{name:"testfont.png",md5:"109d4f54812365f06b30b575639e6a88",bytes:24012},{name:"timeFront.png",md5:"3bb88b9787aa298723d68ffbdaacf896",bytes:5440},{name:"testfont.fnt",md5:"0abb31af7328a52a4405b83e05eddc36",bytes:21146},{name:"meterBack.png",md5:"1071f150be61c78706c1520ba6dd4624",bytes:3822},{name:"score/scoreBottomBubble.png",md5:"1e22b69fc3772e1f34c6d0501f3c3945",bytes:3646},{name:"score/scoreBottom.png",md5:"fdfc618e5ad56332007082f57a3d5a0c",bytes:32999},{name:"score/scoreTop.png",md5:"ba7aa429a5051e0dd6040a0c3aea0512",bytes:19176},{name:"score/score.png",md5:"29b490a9012e9d52cb20bc099d07050a",bytes:2173},{name:"score/scoreTopBubble.png",md5:"37600e5e3facd0d3ef664c71896767a9",bytes:2798},{name:"homeButton.png",md5:"bdc6fb000d0b24df71acdbfa38a5fea9",bytes:2607},{name:"cafe/sun/sunStripes.png",md5:"2376226fe50a1fbf1450efe3deb713eb",bytes:14829},{name:"cafe/sun/mouthSmile.png",md5:"8a10b0cd842ed62fd3c755ec7d276bd1",bytes:1703},{name:"cafe/sun/eyebrow.png",md5:"e43b0bda8b52d0f73d27115ddaabbbac",bytes:469},{name:"cafe/sun/eyePupil.png",md5:"4dbeaf65cb862045f5ea8680ae5bb1ed",bytes:721},{name:"cafe/sun/ear.png",md5:"676aea963c0243b9e80a5a0e1fd20175",bytes:2430},{name:"cafe/sun/eye.png",md5:"722cb9af440c6a56896feee178edf3ab",bytes:1671},{name:"cafe/sun/sun.png",md5:"e4383a12b4058cc87a533b5b6edd1286",bytes:9654},{name:"cafe/sun/mouthOpen.png",md5:"d12e4144cf38ceeade58f71957339f60",bytes:775},{name:"cafe/beerStar.png",md5:"ceef9b8a475b27e2a3b335c200ce0b29",bytes:4346},{name:"cafe/title.png",md5:"070c12f83ea9fbad95327c9aece99404",bytes:63211},{name:"cafe/puke/puke3.png",md5:"07ba5a37dab2888a67e1b7692fd72c21",bytes:1089},{name:"cafe/puke/puke2.png",md5:"daad143db789be7b54b10796d0e005ce",bytes:1083},{name:"cafe/puke/puke.pex",md5:"f600e9e5653c4129accb99fb77b643c5",bytes:2310},{name:"cafe/puke/puke0.png",md5:"deab95c4d3e88793e9f9bcd259a81fd5",bytes:1082},{name:"cafe/puke/puke1.png",md5:"9e0748665121ad543db166bf8b7aca2e",bytes:987},{name:"cafe/puke/puke4.png",md5:"bbdc45a06af3da59f6c549dce21af3f9",bytes:994},{name:"cafe/flamingo.png",md5:"2215f45f1f4f8954e195585438cc5878",bytes:12184},{name:"cafe/body/body.png",md5:"516e0c3af06ff71b31e06dcc90a4a394",bytes:26311},{name:"cafe/body/hand.png",md5:"f94695c8dff2a439b80170db7d13dc89",bytes:4155},{name:"cafe/body/armTop.png",md5:"9bd02fa9176b8a4d792b8f7208d3b4a1",bytes:3778},{name:"cafe/body/head.png",md5:"49a23eb1a6333fcdae47acf74a37bf49",bytes:17496},{name:"cafe/body/armBottom.png",md5:"b3aad89486708d64f8aa7e87c60236a6",bytes:3548},{name:"cafe/beerTriangle.png",md5:"b1676d257e6cb0ae7976fe3352982da5",bytes:4164},{name:"cafe/mainBack.png",md5:"fbd6bd9c5b9f149f2bfe9eb1d1f6340e",bytes:34518},{name:"cafe/beerCircle.png",md5:"7ddd7543b0232f56ccf6ad13a3d6ce16",bytes:4229},{name:"cafe/table.png",md5:"6c73b3a15bd70669fb4bc10d01c63740",bytes:15485},{name:"cafe/playButton.png",md5:"687c8dd6c4745aa7ae865a3c410871a9",bytes:3665},{name:"cloud.png",md5:"0610986236c0e18abf4773458c535d6e",bytes:2009},{name:"points.png",md5:"be054d96480093a0fd59be800ed187a0",bytes:2304},{name:"timeMid.png",md5:"e3f8c1ea4767d449c3b14adff9f1430d",bytes:3732},{name:"drinkMid.png",md5:"2bc56532d2deb5b5b5be3c88389a4b1d",bytes:5658},{name:"text/phone.png",md5:"082f1b25c7408b0c48965f4c618a61f8",bytes:928},{name:"text/text4.png",md5:"74cf25d8a4cd67ec8f10fafbf07544b5",bytes:12523},{name:"text/text1.png",md5:"76c8410d802446c10b6626cf11f71449",bytes:15866},{name:"text/text2.png",md5:"62023c4dc38a98d09e649a4b50a74025",bytes:21883},{name:"text/text3.png",md5:"64704ce215bd597c6f44c5f7a25c993a",bytes:23732}],"background.png":[],bootstrap:[{name:"ball.png",md5:"cfbdbcf4cb3e3c4526b0746b49f2d805",bytes:26236},{name:"silence.mp3",md5:"607808d15b383bdf65355454bf314632",bytes:8950},{name:"ballLineWater.png",md5:"3aba2ce74b7d98656e300cbf6fe297ec",bytes:852},{name:"loadingBack.png",md5:"35effb32203feba71403df4a79c89468",bytes:71726},{name:"play.png",md5:"0bae891f519e596a553e1dc9fec9140f",bytes:3805}],".DS_Store":[]}]}},W._supportsCrossOrigin=function(e){var t,n;if(i.navigator.userAgent.indexOf("Linux; U; Android")>=0)n=!1;else{var a=new XMLHttpRequest;n=null!=a.withCredentials}return n||D.logger.warn("This browser does not support cross-domain asset loading, any Manifest.remoteBase setting will be ignored.",null),t=n,t}(),q._scratchPoint=new z,ee.NEWLINE=new $(10),Me._sharedEvent=new pe,Re._sharedEvent=new ge,Be._sharedEvent=new be,st.CANVAS_TEXTURES=function(e){var t,n=new _("(iPhone|iPod|iPad)","");return t=n.match(window.navigator.userAgent),t}(),ht._mediaRefCount=0,ht._detectBlobSupport=!0,xt.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"],xt.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&new _("Mobile(/.*)? Safari","").match(i.navigator.userAgent),At._detectSupport=!0,Et._scratchMatrix=new xe,on._scratch={x:0,y:0,scale:1},vn.SPRITE_SCRATCH=new z,bn._scratchLocal=new z,Sn.DESTROYED_DURATION=2,Sn.ACTIVE_DURATION=4,hi.escapes=function(e){var t,n=new ni;return n.h["lt"]="<",n.h["gt"]=">",n.h["amp"]="&",n.h["quot"]='"',n.h["apos"]="'",t=n,t}(),cn.main()}).call(this,n("c8ba"))},"56d7":function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[e.ui?t(e.ui.def,e._b({tag:"component",staticClass:"ui",style:{width:e.gameWidth+"px"}},"component",e.uiprops,!1)):e._e(),t("canvas",{ref:"canvas"})],1)},r=[],s={name:"App",data(){return{gameWidth:1920,gameHeight:1080,stack:[]}},computed:{ui(){const e=this.stack.length-1;return this.stack[e]},uiprops(){return{...this.ui.props}}},mounted(){window.flambe={canvas:this.$refs.canvas};const e=n("5085");this.stack=e.flambe.System.get_web().stack;const t=e.game.Container.getSize;window.addEventListener("resize",this.layoutScale.bind(this,t)),this.layoutScale(t),e.game.Main.start(this.gameWidth,this.gameHeight)},methods:{layoutScale(e){var t=e(this.gameWidth,this.gameHeight,window.innerWidth,window.innerHeight);document.documentElement.style.setProperty("--layout-scale",t.scale),document.documentElement.style.setProperty("--layout-x",t.x+"px"),document.documentElement.style.setProperty("--layout-y",t.y+"px")}}},o=s,_=(n("ca51"),n("2877")),h=Object(_["a"])(o,a,r,!1,null,null,null),l=h.exports;i["a"].config.productionTip=!1,new i["a"]({render:e=>e(l)}).$mount("#app")},ca51:function(e,t,n){"use strict";n("2af0")}});
//# sourceMappingURL=app.1e7f77e9.js.map